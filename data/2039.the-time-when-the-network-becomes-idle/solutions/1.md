## [2039.ç½‘ç»œç©ºé—²çš„æ—¶åˆ» ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/the-time-when-the-network-becomes-idle/solutions/100000/by-ac_oier-5txs)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)
## å»ºå›¾ + BFS

æ ¹æ®é¢˜ç›®å¯çŸ¥è¿™æ˜¯ä¸€ä¸ªè¾¹æƒä¸º $1$ çš„æ— å‘è¿é€šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ã€Œé‚»æ¥è¡¨å»ºå›¾ + BFSã€çš„æ–¹å¼é¢„å¤„ç†å‡º $dist$ æ•°ç»„ï¼Œ$dist[i]$ å«ä¹‰ä¸ºèŠ‚ç‚¹ $i$ åˆ° $0$ å·ç‚¹çš„æœ€çŸ­è·ç¦»ã€‚

ä¸€ä¸ªæ•°æ®æœåŠ¡å™¨ $i$ å¾€ä¸»æœåŠ¡å™¨å‘é€æ¶ˆæ¯æ‰€æ¶ˆè€—çš„æ—¶é—´ä¸ºä¸¤èŠ‚ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ $dist[i]$ï¼Œè€Œä»å‘é€æ¶ˆæ¯åˆ°æ”¶åˆ°å›å¤æ‰€éœ€çš„æ—¶é—´ä¸º $di = 2 * dist[i]$ã€‚

åŒæ—¶æ¯ä¸ªæ•°æ®æœåŠ¡å™¨è¿˜å­˜åœ¨æ—¶é—´é—´éš”ä¸º $t = patience[i]$ çš„é‡å‘åŠ¨ä½œï¼Œå¹¶ä¸”åŠ¨ä½œåªæœ‰åœ¨ç¬¬ä¸€æ¬¡æ”¶åˆ°ä¸»æœåŠ¡çš„å›å¤åæ‰ä¼šåœæ­¢ã€‚

å› æ­¤å¦‚æœ $di <= t$ï¼Œé‚£ä¹ˆæ•°æ®æœåŠ¡å™¨ä¸ä¼šå‘ç”Ÿé‡å‘åŠ¨ä½œï¼Œè¯¥èŠ‚ç‚¹æ´»åŠ¨åœæ­¢æ—¶é—´ç‚¹ä¸º $di$ï¼›å½“ $di > t$ï¼Œæ•°æ®æœåŠ¡å™¨å°†ä¼šå‘ç”Ÿé‡å‘åŠ¨ä½œï¼Œä¸”æœ€åä¸€ä¸ªæ•°æ®åŒ…çš„å‘é€æ—¶é—´ä¸º $(di - 1) / t * t$ï¼Œåªæœ‰å½“æœ€åä¸€ä¸ªæ•°æ®åŒ…æ”¶åˆ°å›å¤ï¼Œè¯¥èŠ‚ç‚¹çš„æ‰€æœ‰æ´»åŠ¨æ‰ç®—åœæ­¢ï¼Œåœæ­¢æ—¶é—´ç‚¹ä¸º $(di - 1) / t * t + di$ã€‚æ‰€æœ‰èŠ‚ç‚¹çš„æ´»åŠ¨åœæ­¢æ—¶é—´ç‚¹çš„æœ€å¤§å€¼å³æ˜¯ç­”æ¡ˆã€‚

> ä¸€äº›ç»†èŠ‚ï¼šè€è§„çŸ©ï¼Œä¸ºäº†é¿å…æ¯ä¸ªæ ·ä¾‹éƒ½ `new` å¤§æ•°ç»„ï¼Œæˆ‘ä»¬ä½¿ç”¨ `static` ä¼˜åŒ–ã€‚ä½¿ç”¨ `static` ä¼˜åŒ–åï¼Œä½ ç”šè‡³ä¼šæ”¶è·ä¸€ä¸ªç¨³å®š $100$% çš„ç»“æœ ğŸ¤£

ä»£ç ï¼š
```Java []
class Solution {
    static int N = 100010, M = N * 2, INF = 0x3f3f3f3f;
    static int[] he = new int[N], e = new int[M], ne = new int[M];
    static int[] dist = new int[N];
    int idx;
    void add(int a, int b) {
        e[idx] = b;
        ne[idx] = he[a];
        he[a] = idx++;
    }
    public int networkBecomesIdle(int[][] edges, int[] patience) {
        Arrays.fill(he, -1);
        Arrays.fill(dist, INF);
        int n = patience.length;
        for (int[] e : edges) {
            add(e[0], e[1]);
            add(e[1], e[0]);
        }
        Deque<Integer> d = new ArrayDeque<>();
        d.addLast(0);
        dist[0] = 0;
        while (!d.isEmpty()) {
            int t = d.pollFirst();
            for (int i = he[t]; i != -1; i = ne[i]) {
                int j = e[i];
                if (dist[j] != INF) continue;
                dist[j] = dist[t] + 1;
                d.addLast(j);
            }
        }
        int ans = 0;
        for (int i = 1; i < n; i++) {
            int di = dist[i] * 2, t = patience[i];
            int cur = di <= t ? di : (di - 1) / t * t + di;
            if (cur > ans) ans = cur;
        }
        return ans + 1;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n + m)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n + m)$

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~