## [219.å­˜åœ¨é‡å¤å…ƒç´  II ä¸­æ–‡çƒ­é—¨é¢˜è§£2](https://leetcode.cn/problems/contains-duplicate-ii/solutions/100000/gong-shui-san-xie-hua-dong-chuang-kou-yu-q02i)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)
## æ»‘åŠ¨çª—å£ + å“ˆå¸Œè¡¨

æ•´ç†é¢˜æ„ï¼šæ˜¯å¦å­˜åœ¨é•¿åº¦ä¸è¶…è¿‡çš„ $k + 1$ çª—å£ï¼Œçª—å£å†…æœ‰ç›¸åŒå…ƒç´ ã€‚

æˆ‘ä»¬å¯ä»¥ä»å‰å¾€åéå† $nums$ï¼ŒåŒæ—¶ä½¿ç”¨ `Set` è®°å½•éå†å½“å‰æ»‘çª—å†…å‡ºç°è¿‡çš„å…ƒç´ ã€‚

å‡è®¾å½“å‰éå†çš„å…ƒç´ ä¸º $nums[i]$ï¼š

* ä¸‹æ ‡å°äºç­‰äº $k$ï¼ˆèµ·å§‹æ»‘çª—é•¿åº¦è¿˜ä¸è¶³ $k + 1$ï¼‰ï¼šç›´æ¥å¾€æ»‘çª—åŠ æ•°ï¼Œå³å°†å½“å‰å…ƒç´ åŠ å…¥ `Set` ä¸­ï¼›
* ä¸‹æ ‡å¤§äº $k$ï¼šå°†ä¸Šä¸€æ»‘çª—çš„å·¦ç«¯ç‚¹å…ƒç´  $nums[i - k - 1]$ ç§»é™¤ï¼Œåˆ¤æ–­å½“å‰æ»‘çª—çš„å³ç«¯ç‚¹å…ƒç´  $nums[i]$ æ˜¯å¦å­˜åœ¨ `Set` ä¸­ï¼Œè‹¥å­˜åœ¨ï¼Œè¿”å› `True`ï¼Œå¦åˆ™å°†å½“å‰å…ƒç´  $nums[i]$ åŠ å…¥ `Set` ä¸­ã€‚

é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œè‹¥æ•´ä¸ª $nums$ å¤„ç†å®Œåä»æœªæ‰¾åˆ°ï¼Œè¿”å› `False`ã€‚

**ä»£ç ï¼ˆæ„Ÿè°¢ [@Benhao](/u/himymben/)ã€[@ğŸ­å¯ä¹å¯ä¹å—](/u/littletime_cc/) å’Œ [@5cm/s ğŸŒ¸](/u/megurine/) åŒå­¦æä¾›çš„å…¶ä»–è¯­è¨€ç‰ˆæœ¬ï¼‰ï¼š**
```Java []
class Solution {
    public boolean containsNearbyDuplicate(int[] nums, int k) {
        int n = nums.length;
        Set<Integer> set = new HashSet<>();
        for (int i = 0; i < n; i++) {
            if (i > k) set.remove(nums[i - k - 1]);
            if (set.contains(nums[i])) return true;
            set.add(nums[i]);
        }
        return false;
    }
}
```
```Python3 []
class Solution:
    def containsNearbyDuplicate(self, nums: List[int], k: int) -> bool:
        n = len(nums)
        s = set()
        for i in range(n):
            if i > k:
                s.remove(nums[i - k - 1])
            if nums[i] in s:
                return True
            s.add(nums[i])
        return False
````
```Go []
func containsNearbyDuplicate(nums []int, k int) bool {
    n := len(nums)
    set := map[int]bool{}
    for i := 0; i < n; i++ {
        if i > k {
            set[nums[i - k - 1]] = false
        }
        if set[nums[i]] {
            return true
        }
        set[nums[i]] = true
    }
    return false
}
```
```C++ []
class Solution {
public:
    bool containsNearbyDuplicate(vector<int>& nums, int k) {
        int n = nums.size();
        unordered_map<int, bool> set;
        for(int i = 0; i < n; ++i){
            if(i > k) set[nums[i - k - 1]] = false;
            if(set[nums[i]]) return true;
            set[nums[i]] = true;
        }
        return false;
    }
};
```
```JS []
var containsNearbyDuplicate = function(nums, k) {
    const mp = new Map()
    for (let i in nums) {
        if (mp.has(nums[i]) && i - mp.get(nums[i]) <= k) {
            return true;
        }
        mp.set(nums[i], i);
    }
    return false;
};
```
```Racket []
(define/contract (contains-nearby-duplicate nums k)
  (-> (listof exact-integer?) exact-integer? boolean?)
    (define h (make-hasheq))
    (let loop([nums nums] [i 0])
      (cond
        [(empty? nums) false]
        [(and (hash-has-key? h (car nums)) (>= k (- i (hash-ref h (car nums))))) true]
        [else
          (hash-set! h (car nums) i)
          (loop (cdr nums) (+ i 1))
        ]
      )
    )
  )
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(k)$

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~