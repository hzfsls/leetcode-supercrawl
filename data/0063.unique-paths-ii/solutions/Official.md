## [63.ä¸åŒè·¯å¾„ II ä¸­æ–‡å®˜æ–¹é¢˜è§£](https://leetcode.cn/problems/unique-paths-ii/solutions/100000/bu-tong-lu-jing-ii-by-leetcode-solution-2)

### ğŸ“º è§†é¢‘é¢˜è§£ 
![63. ä¸åŒè·¯å¾„ II.mp4](ab6377a8-24bf-4c03-bd31-d29810272468)

### ğŸ“– æ–‡å­—é¢˜è§£
#### æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’

**æ€è·¯å’Œç®—æ³•**

æˆ‘ä»¬ç”¨ $f(i, j)$ æ¥è¡¨ç¤ºä»åæ ‡ $(0, 0)$ åˆ°åæ ‡ $(i, j)$ çš„è·¯å¾„æ€»æ•°ï¼Œ$u(i, j)$ è¡¨ç¤ºåæ ‡ $(i, j)$ æ˜¯å¦å¯è¡Œï¼Œå¦‚æœåæ ‡ $(i, j)$ æœ‰éšœç¢ç‰©ï¼Œ$u(i, j) = 0$ï¼Œå¦åˆ™ $u(i, j) = 1$ã€‚

å› ä¸ºã€Œæœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€ï¼Œæ‰€ä»¥ä»åæ ‡ $(0, 0)$ åˆ°åæ ‡ $(i, j)$ çš„è·¯å¾„æ€»æ•°çš„å€¼åªå–å†³äºä»åæ ‡ $(0, 0)$ åˆ°åæ ‡ $(i - 1, j)$ çš„è·¯å¾„æ€»æ•°å’Œä»åæ ‡ $(0, 0)$ åˆ°åæ ‡ $(i, j - 1)$ çš„è·¯å¾„æ€»æ•°ï¼Œå³ $f(i, j)$ åªèƒ½é€šè¿‡ $f(i - 1, j)$ å’Œ $f(i, j - 1)$ è½¬ç§»å¾—åˆ°ã€‚å½“åæ ‡ $(i, j)$ æœ¬èº«æœ‰éšœç¢çš„æ—¶å€™ï¼Œä»»ä½•è·¯å¾„éƒ½åˆ°åˆ°ä¸äº† $f(i, j)$ï¼Œæ­¤æ—¶ $f(i, j) = 0$ï¼›ä¸‹é¢æˆ‘ä»¬æ¥è®¨è®ºåæ ‡ $(i, j)$ æ²¡æœ‰éšœç¢çš„æƒ…å†µï¼šå¦‚æœåæ ‡ $(i - 1, j)$ æ²¡æœ‰éšœç¢ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ä»åæ ‡ $(i - 1, j)$ å¯ä»¥èµ°åˆ° $(i, j)$ï¼Œå³ $(i - 1, j)$ ä½ç½®å¯¹ $f(i, j)$ çš„è´¡çŒ®ä¸º $f(i - 1, j)$ï¼ŒåŒç†ï¼Œå½“åæ ‡ $(i, j - 1)$ æ²¡æœ‰éšœç¢çš„æ—¶å€™ï¼Œ$(i, j - 1)$ ä½ç½®å¯¹ $f(i, j)$ çš„è´¡çŒ®ä¸º $f(i, j - 1)$ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™æ ·çš„åŠ¨æ€è§„åˆ’è½¬ç§»æ–¹ç¨‹ï¼š

$$
f(i, j) = \left \{ \begin{aligned}
    0 & , & u(i, j) = 0 \\
    f(i - 1, j) + f(i, j - 1) & , & u(i, j) \neq 0 \end{aligned} \right.
$$

å¾ˆæ˜¾ç„¶æˆ‘ä»¬å¯ä»¥ç»™å‡ºä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ $O(nm)$ å¹¶ä¸”ç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯ $O(nm)$ çš„å®ç°ï¼Œç”±äºè¿™é‡Œ $f(i, j)$ åªä¸ $f(i - 1, j)$ å’Œ $f(i, j - 1)$ ç›¸å…³ï¼Œæˆ‘ä»¬å¯ä»¥è¿ç”¨ã€Œæ»šåŠ¨æ•°ç»„æ€æƒ³ã€æŠŠç©ºé—´å¤æ‚åº¦ä¼˜åŒ–ç§° $O(m)$ã€‚**ã€Œæ»šåŠ¨æ•°ç»„æ€æƒ³ã€æ˜¯ä¸€ç§å¸¸è§çš„åŠ¨æ€è§„åˆ’ä¼˜åŒ–æ–¹æ³•ï¼Œåœ¨æˆ‘ä»¬çš„é¢˜ç›®ä¸­å·²ç»å¤šæ¬¡ä½¿ç”¨åˆ°ï¼Œä¾‹å¦‚ã€Œå‰‘æŒ‡ Offer 46. æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²ã€ã€ã€Œ70. çˆ¬æ¥¼æ¢¯ã€ç­‰ï¼Œå½“æˆ‘ä»¬å®šä¹‰çš„çŠ¶æ€åœ¨åŠ¨æ€è§„åˆ’çš„è½¬ç§»æ–¹ç¨‹ä¸­åªå’ŒæŸå‡ ä¸ªçŠ¶æ€ç›¸å…³çš„æ—¶å€™ï¼Œå°±å¯ä»¥è€ƒè™‘è¿™ç§ä¼˜åŒ–æ–¹æ³•ï¼Œç›®çš„æ˜¯ç»™ç©ºé—´å¤æ‚åº¦ã€Œé™ç»´ã€ã€‚å¦‚æœä½ è¿˜ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ã€Œæ»šåŠ¨æ•°ç»„æ€æƒ³ã€ï¼Œä¸€å®šè¦æŸ¥é˜…ç›¸å…³èµ„æ–™è¿›è¡Œå­¦ä¹ å“¦ã€‚**

ä»£ç ä¸­ç»™å‡ºäº†ä½¿ç”¨ã€Œæ»šåŠ¨æ•°ç»„æ€æƒ³ã€ä¼˜åŒ–åçš„å®ç°ã€‚

å›é¡¾è¿™é“é¢˜ï¼Œå…¶å®è¿™ç±»åŠ¨æ€è§„åˆ’çš„é¢˜ç›®åœ¨é¢˜åº“ä¸­ä¹Ÿå‡ºç°è¿‡å¤šæ¬¡ï¼Œä¾‹å¦‚ã€Œ221. æœ€å¤§æ­£æ–¹å½¢ã€ã€ã€Œ1162. åœ°å›¾åˆ†æã€ç­‰ã€‚ä»–ä»¬éƒ½ä»¥äºŒç»´åæ ‡ä½œä¸ºçŠ¶æ€ï¼Œå¤§å¤šæ•°éƒ½å¯ä»¥ä½¿ç”¨æ»šåŠ¨æ•°ç»„è¿›è¡Œä¼˜åŒ–ã€‚å¦‚æœæˆ‘ä»¬ç†Ÿæ‚‰è¿™ç±»é—®é¢˜ï¼Œå¯ä»¥ä¸€çœ¼çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªåŠ¨æ€è§„åˆ’é—®é¢˜ã€‚å½“æˆ‘ä»¬ä¸ç†Ÿæ‚‰çš„æ—¶å€™ï¼Œæ€ä¹ˆæƒ³åˆ°ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä»é—®é¢˜æœ¬èº«å‡ºå‘ï¼Œå¯»æ‰¾ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æœ¬é¢˜ä¸­ï¼š

+ $(i, j)$ ä½ç½®åªèƒ½ä» $(i - 1, j)$ å’Œ $(i, j - 1)$ èµ°åˆ°ï¼Œè¿™æ ·çš„æ¡ä»¶å°±æ˜¯åœ¨å‘Šè¯‰æˆ‘ä»¬è¿™é‡Œè½¬ç§»æ˜¯ **ã€Œæ— åæ•ˆæ€§ã€** çš„ï¼Œ$f(i, j)$ å’Œä»»ä½•çš„ $f(i', j')(i' > i, j' > j)$ æ— å…³ã€‚
+ åŠ¨æ€è§„åˆ’çš„é¢˜ç›®åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œä¸€ç§æ˜¯æ±‚æœ€ä¼˜è§£ç±»ï¼Œå…¸å‹é—®é¢˜æ˜¯èƒŒåŒ…é—®é¢˜ï¼Œå¦ä¸€ç§å°±æ˜¯è®¡æ•°ç±»ï¼Œæ¯”å¦‚è¿™é‡Œçš„ç»Ÿè®¡æ–¹æ¡ˆæ•°çš„é—®é¢˜ï¼Œå®ƒä»¬éƒ½å­˜åœ¨ä¸€å®šçš„é€’æ¨æ€§è´¨ã€‚å‰è€…çš„é€’æ¨æ€§è´¨è¿˜æœ‰ä¸€ä¸ªåå­—ï¼Œå«åš **ã€Œæœ€ä¼˜å­ç»“æ„ã€** â€”â€”å³å½“å‰é—®é¢˜çš„æœ€ä¼˜è§£å–å†³äºå­é—®é¢˜çš„æœ€ä¼˜è§£ï¼Œåè€…ç±»ä¼¼ï¼Œå½“å‰é—®é¢˜çš„æ–¹æ¡ˆæ•°å–å†³äºå­é—®é¢˜çš„æ–¹æ¡ˆæ•°ã€‚æ‰€ä»¥åœ¨é‡åˆ°æ±‚æ–¹æ¡ˆæ•°çš„é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾€åŠ¨æ€è§„åˆ’çš„æ–¹å‘è€ƒè™‘ã€‚

é€šå¸¸å¦‚æœæˆ‘ä»¬å¯Ÿè§‰åˆ°äº†è¿™ä¸¤ç‚¹è¦ç´ ï¼Œè¿™ä¸ªé—®é¢˜å…«æˆå¯ä»¥ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³ã€‚è¯»è€…å¯ä»¥å¤šå¤šç»ƒä¹ ï¼Œç†Ÿèƒ½ç”Ÿå·§ã€‚

**ä»£ç **

```cpp [sol1-C++]
class Solution {
public:
    int uniquePathsWithObstacles(vector<vector<int>>& obstacleGrid) {
        int n = obstacleGrid.size(), m = obstacleGrid.at(0).size();
        vector <int> f(m);

        f[0] = (obstacleGrid[0][0] == 0);
        for (int i = 0; i < n; ++i) {
            for (int j = 0; j < m; ++j) {
                if (obstacleGrid[i][j] == 1) {
                    f[j] = 0;
                    continue;
                }
                if (j - 1 >= 0 && obstacleGrid[i][j - 1] == 0) {
                    f[j] += f[j - 1];
                }
            }
        }

        return f.back();
    }
};
```

```java [sol1-Java]
class Solution {
    public int uniquePathsWithObstacles(int[][] obstacleGrid) {
        int n = obstacleGrid.length, m = obstacleGrid[0].length;
        int[] f = new int[m];

        f[0] = obstacleGrid[0][0] == 0 ? 1 : 0;
        for (int i = 0; i < n; ++i) {
            for (int j = 0; j < m; ++j) {
                if (obstacleGrid[i][j] == 1) {
                    f[j] = 0;
                    continue;
                }
                if (j - 1 >= 0 && obstacleGrid[i][j - 1] == 0) {
                    f[j] += f[j - 1];
                }
            }
        }
        
        return f[m - 1];
    }
}
```

```golang [sol1-Golang]
func uniquePathsWithObstacles(obstacleGrid [][]int) int {
    n, m := len(obstacleGrid), len(obstacleGrid[0])
    f := make([]int, m)
    if obstacleGrid[0][0] == 0 {
        f[0] = 1
    }
    for i := 0; i < n; i++ {
        for j := 0; j < m; j++ {
            if obstacleGrid[i][j] == 1 {
                f[j] = 0
                continue
            }
            if j - 1 >= 0 && obstacleGrid[i][j-1] == 0 {
                f[j] += f[j-1]
            }
        }
    }
    return f[len(f)-1]
}
```

```C [sol1-C]
int uniquePathsWithObstacles(int** obstacleGrid, int obstacleGridSize,
                             int* obstacleGridColSize) {
    int n = obstacleGridSize, m = obstacleGridColSize[0];
    int f[m];
    memset(f, 0, sizeof(f));
    f[0] = (obstacleGrid[0][0] == 0);
    for (int i = 0; i < n; ++i) {
        for (int j = 0; j < m; ++j) {
            if (obstacleGrid[i][j] == 1) {
                f[j] = 0;
                continue;
            }
            if (j - 1 >= 0 && obstacleGrid[i][j - 1] == 0) {
                f[j] += f[j - 1];
            }
        }
    }

    return f[m - 1];
}
```

**å¤æ‚åº¦åˆ†æ**

+ æ—¶é—´å¤æ‚åº¦ï¼š$O(nm)$ï¼Œå…¶ä¸­ $n$ ä¸ºç½‘æ ¼çš„è¡Œæ•°ï¼Œ$m$ ä¸ºç½‘æ ¼çš„åˆ—æ•°ã€‚æˆ‘ä»¬åªéœ€è¦éå†æ‰€æœ‰ç½‘æ ¼ä¸€æ¬¡å³å¯ã€‚

+ ç©ºé—´å¤æ‚åº¦ï¼š$O(m)$ã€‚åˆ©ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥åªç”¨ $O(m)$ å¤§å°çš„ç©ºé—´æ¥è®°å½•å½“å‰è¡Œçš„ $f$ å€¼ã€‚