## [762.äºŒè¿›åˆ¶è¡¨ç¤ºä¸­è´¨æ•°ä¸ªè®¡ç®—ç½®ä½ ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/prime-number-of-set-bits-in-binary-representation/solutions/100000/by-ac_oier-w50x)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)

## æ¨¡æ‹Ÿ + lowbit

åˆ©ç”¨ä¸€ä¸ª `int` çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸è¶…è¿‡ $32$ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°† $32$ ä»¥å†…çš„è´¨æ•°è¿›è¡Œæ‰“è¡¨ã€‚

ä»å‰å¾€åå¤„ç† $[left, right]$ ä¸­çš„æ¯ä¸ªæ•° $x$ï¼Œåˆ©ç”¨ `lowbit` æ“ä½œç»Ÿè®¡ $x$ å…±æœ‰å¤šå°‘ä½ $1$ï¼Œè®°ä¸º $cnt$ï¼Œè‹¥ $cnt$ ä¸ºè´¨æ•°ï¼Œåˆ™å¯¹ç­”æ¡ˆè¿›è¡ŒåŠ ä¸€æ“ä½œã€‚

ä»£ç ï¼š
```Java []
class Solution {
    static boolean[] hash = new boolean[40];
    static {
        int[] nums = new int[]{2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31};
        for (int x : nums) hash[x] = true;
    }
    public int countPrimeSetBits(int left, int right) {
        int ans = 0;
        for (int i = left; i <= right; i++) {
            int x = i, cnt = 0;
            while (x != 0 && ++cnt >= 0) x -= (x & -x);
            if (hash[cnt]) ans++;
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O((right - left) * \log{right})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(C)$

---

## æ¨¡æ‹Ÿ + åˆ†æ²»

æšä¸¾ $[left, right]$ èŒƒå›´å†…çš„æ•°æ€»æ˜¯ä¸å¯é¿å…ï¼Œä¸Šè¿°è§£æ³•çš„å¤æ‚åº¦å–å†³äºå¤æ‚åº¦ä¸º $O(\log{x})$ çš„ `lowbit` æ“ä½œã€‚

è€Œæ¯” `lowbit` æ›´åŠ ä¼˜ç§€çš„ç»Ÿè®¡ã€ŒäºŒè¿›åˆ¶ $1$ çš„æ•°é‡ã€çš„åšæ³•æœ€æ—©åœ¨ [(é¢˜è§£) 191. ä½1çš„ä¸ªæ•°](https://leetcode-cn.com/problems/number-of-1-bits/solution/yi-ti-san-jie-wei-shu-jian-cha-you-yi-to-av1r/) è®²è¿‡ï¼Œé‡‡ç”¨ã€Œåˆ†æ²»ã€æ€è·¯å¯¹äºŒè¿›åˆ¶è¿›è¡Œæˆç»„ç»Ÿè®¡ï¼Œå¤æ‚åº¦ä¸º $O(\log{\log{x}})$ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    static boolean[] hash = new boolean[40];
    static {
        int[] nums = new int[]{2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31};
        for (int x : nums) hash[x] = true;
    }
    public int countPrimeSetBits(int left, int right) {
        int ans = 0;
        for (int i = left; i <= right; i++) {
            int x = i;
            x = (x & 0x55555555) + ((x >>> 1)  & 0x55555555);
            x = (x & 0x33333333) + ((x >>> 2)  & 0x33333333);
            x = (x & 0x0f0f0f0f) + ((x >>> 4)  & 0x0f0f0f0f);
            x = (x & 0x00ff00ff) + ((x >>> 8)  & 0x00ff00ff);
            x = (x & 0x0000ffff) + ((x >>> 16) & 0x0000ffff);
            if (hash[x]) ans++;
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O((right - left) * \log{\log{right}})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(C)$

---

### å…¶ä»–ã€Œä½è¿ç®—ã€ç›¸å…³å†…å®¹

è€ƒè™‘åŠ ç»ƒå…¶ä»–ã€Œä½è¿ç®—ã€ç›¸å…³å†…å®¹ ğŸ­ğŸ­ğŸ­

| é¢˜ç›®                                                         | é¢˜è§£                                                         | éš¾åº¦ | æ¨èæŒ‡æ•° |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---- | -------- |
| [137. åªå‡ºç°ä¸€æ¬¡çš„æ•°å­— II](https://leetcode-cn.com/problems/single-number-ii/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/single-number-ii/solution/gong-shui-san-xie-yi-ti-san-jie-ha-xi-bi-fku8/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [190. é¢ å€’äºŒè¿›åˆ¶ä½](https://leetcode-cn.com/problems/reverse-bits/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/reverse-bits/solution/yi-ti-san-jie-dui-cheng-wei-zhu-wei-fen-ub1hi/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [191. ä½1çš„ä¸ªæ•°](https://leetcode-cn.com/problems/number-of-1-bits/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/number-of-1-bits/solution/yi-ti-san-jie-wei-shu-jian-cha-you-yi-to-av1r/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [231. 2 çš„å¹‚](https://leetcode-cn.com/problems/power-of-two/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/power-of-two/solution/gong-shui-san-xie-2-de-mi-by-ac_oier-qm6e/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [338. æ¯”ç‰¹ä½è®¡æ•°](https://leetcode-cn.com/problems/counting-bits/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/counting-bits/solution/po-su-jie-fa-dong-tai-gui-hua-jie-fa-by-vvail/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [342. 4çš„å¹‚](https://leetcode-cn.com/problems/power-of-four/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/power-of-four/solution/gong-shui-san-xie-zhuan-hua-wei-2-de-mi-y21lq/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [461. æ±‰æ˜è·ç¦»](https://leetcode-cn.com/problems/hamming-distance/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/hamming-distance/solution/gong-shui-san-xie-tong-ji-liang-shu-er-j-987a/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [477. æ±‰æ˜è·ç¦»æ€»å’Œ](https://leetcode-cn.com/problems/total-hamming-distance/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/total-hamming-distance/solution/gong-shui-san-xie-ying-yong-cheng-fa-yua-g21t/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [1178. çŒœå­—è°œ](https://leetcode-cn.com/problems/number-of-valid-words-for-each-puzzle/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/number-of-valid-words-for-each-puzzle/solution/xiang-jin-zhu-shi-xiang-jie-po-su-wei-yu-3cr2/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [å‰‘æŒ‡ Offer 15. äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°](https://leetcode-cn.com/problems/er-jin-zhi-zhong-1de-ge-shu-lcof/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/er-jin-zhi-zhong-1de-ge-shu-lcof/solution/gong-shui-san-xie-yi-ti-si-jie-wei-shu-j-g9w6/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©      |

**æ³¨ï¼šä»¥ä¸Šç›®å½•æ•´ç†æ¥è‡ª [wiki](https://github.com/SharingSource/LogicStack-LeetCode/wiki/ä½è¿ç®—)ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½å¼•ç”¨è¯·ä¿ç•™å‡ºå¤„ã€‚**

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~