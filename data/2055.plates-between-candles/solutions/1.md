## [2055.èœ¡çƒ›ä¹‹é—´çš„ç›˜å­ ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/plates-between-candles/solutions/100000/gong-shui-san-xie-er-fen-qian-zhui-he-yu-0qt0)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)

## äºŒåˆ† + å‰ç¼€å’Œ

å¯¹äºä»»æ„ä¸€ä¸ªæŸ¥è¯¢ $[a, b]$ è€Œè¨€ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿè®¡æ‰€æœ‰å·¦è¾¹å’Œå³è¾¹èƒ½å¤Ÿæ‰¾åˆ°èœ¡çƒ›çš„ç›˜å­æ•°é‡ã€‚

ä¸€ä¸ªè‡ªç„¶çš„æƒ³æ³•æ˜¯ï¼š**æ‰¾åˆ°åŒºé—´ $[a, b]$ ä¸¤è¾¹ç¼˜çš„èœ¡çƒ›ï¼Œåˆ†åˆ«è®°ä¸º $c$ å’Œ $d$ï¼Œæ˜¾ç„¶åŒºé—´ $[c, d]$ å†…çš„ç›˜å­éƒ½æ˜¯éœ€è¦è¢«ç»Ÿè®¡çš„ã€‚**

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å­—ç¬¦ä¸² `s` è¿›è¡Œä»å‰å¾€åçš„æ‰«æï¼Œå°†æ‰€æœ‰çš„èœ¡çƒ›ä¸‹æ ‡æ·»åŠ åˆ°æ•°ç»„ï¼ˆæ•°ç»„ä¸¥æ ¼é€’å¢ï¼‰ï¼Œå¹¶é¢„å¤„ç†å‡ºç›˜å­çš„ã€Œå‰ç¼€å’Œã€æ•°ç»„ã€‚

ç„¶åå¤„ç†è¯¢é—®æ—¶çš„ã€Œæ‰¾åŒºé—´ $[a, b]$ è¾¹ç¼˜èœ¡çƒ›ã€æ“ä½œå¯é€šè¿‡å¯¹æ•°ç»„ã€ŒäºŒåˆ†ã€æ¥åšï¼Œè€Œã€ŒæŸ¥è¯¢åŒºé—´ $[c, d]$ å†…çš„ç›˜å­æ•°é‡ã€æ“ä½œå¯ç›´æ¥æŸ¥è¯¢ã€Œå‰ç¼€å’Œã€æ•°ç»„ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int[] platesBetweenCandles(String s, int[][] qs) {
        char[] cs = s.toCharArray();
        int n = cs.length, m = qs.length;
        int[] ans = new int[m], sum = new int[n + 1];
        List<Integer> list = new ArrayList<>();
        for (int i = 0; i < n; i++) {
            if (cs[i] == '|') list.add(i);
            sum[i + 1] = sum[i] + (cs[i] == '*' ? 1 : 0);
        }
        if (list.size() == 0) return ans;
        for (int i = 0; i < m; i++) {
            int a = qs[i][0], b = qs[i][1];
            int c = -1, d = -1;
            // æ‰¾åˆ° a å³è¾¹æœ€è¿‘çš„èœ¡çƒ›
            int l = 0, r = list.size() - 1;
            while (l < r) {
                int mid = l + r >> 1;
                if (list.get(mid) >= a) r = mid;
                else l = mid + 1;
            }
            if (list.get(r) >= a) c = list.get(r);
            else continue;
            // æ‰¾åˆ° b å·¦è¾¹æœ€è¿‘çš„èœ¡çƒ›
            l = 0; r = list.size() - 1;
            while (l < r) {
                int mid = l + r + 1 >> 1;
                if (list.get(mid) <= b) l = mid;
                else r = mid - 1;
            }
            if (list.get(r) <= b) d = list.get(r);
            else continue;
            if (c <= d) ans[i] = sum[d + 1] - sum[c];
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šä»¤ `s` çš„é•¿åº¦ä¸º $n$ï¼Œ`qs` é•¿åº¦ä¸º $m$ã€‚ç»Ÿè®¡æ‰€æœ‰çš„èœ¡çƒ›å¹¶å­˜å…¥ `list` çš„å¤æ‚åº¦ä¸º $O(n)$ï¼›é¢„å¤„ç†å‰ç¼€å’Œæ•°ç»„å¤æ‚åº¦ä¸º $O(n)$ï¼›å¤„ç†å•ä¸ªè¯¢é—®éœ€è¦è¿›è¡Œä¸¤æ¬¡äºŒåˆ†ï¼ˆèœ¡çƒ›æ•°é‡æœ€å¤šä¸º $n$ï¼‰ï¼Œå¤æ‚åº¦ä¸º $O(\log{n})$ï¼Œå…±æœ‰ $m$ ä¸ªè¯¢é—®éœ€è¦å¤„ç†ï¼Œå¤æ‚åº¦ä¸º $O(m * \log{n})$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(n + m\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## å‰ç¼€å’Œ 

æ›´è¿›ä¸€æ­¥ï¼Œåœ¨ç»™å®š `s` çš„å‰æä¸‹ï¼Œæ¯ä¸ªä½ç½®å…¶å·¦è¾¹å’Œå³è¾¹æœ€è¿‘çš„èœ¡çƒ›å”¯ä¸€ç¡®å®šã€‚

æˆ‘ä»¬å¯ä»¥åœ¨é¢„å¤„ç†å‰ç¼€å’Œçš„åŒæ—¶ï¼Œé¢„å¤„ç†æ¯ä¸ªä½ç½®å·¦å³æœ€è¿‘çš„èœ¡çƒ›ä¸‹æ ‡ï¼Œä»è€Œçœå»æ¯æ¬¡äºŒåˆ†ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int[] platesBetweenCandles(String s, int[][] qs) {
        char[] cs = s.toCharArray();
        int n = cs.length, m = qs.length;
        int[] l = new int[n], r = new int[n];
        int[] sum = new int[n + 1];
        for (int i = 0, j = n - 1, p = -1, q = -1; i < n; i++, j--) {
            if (cs[i] == '|') p = i;
            if (cs[j] == '|') q = j;
            l[i] = p; r[j] = q;
            sum[i + 1] = sum[i] + (cs[i] == '*' ? 1 : 0);
        }
        int[] ans = new int[m];
        for (int i = 0; i < m; i++) {
            int a = qs[i][0], b = qs[i][1];
            int c = r[a], d = l[b];
            if (c != -1 && c <= d) ans[i] = sum[d + 1] - sum[c];
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n + m)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## åŒç±»é¢˜åŠ é¤

åŒæ ·ç”±ã€Œå‰ç¼€å’Œ & äºŒåˆ†ã€ç»“åˆçš„ç»å…¸é¢è¯•é¢˜è¿˜æœ‰ï¼š[éš¾åº¦ 2.5/5ï¼Œä¸€é“å¯ä»¥æŠ–æœºçµçš„ç»å…¸ç¬”è¯•é¢˜](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247490303%26idx%3D1%26sn%3D401cef134d0ba804d18d4173a50ad24f%26chksm%3Dfd9cb1e0caeb38f643434ed67135d5144443f22795e9b126ff5d521ce47cf7f41972ae1ba5f9%26token%3D168273153%26lang%3Dzh_CN%23rd) ğŸ­

æˆ–æ˜¯åŠ ç»ƒå¦‚ä¸‹ã€Œå‰ç¼€å’Œã€æ¿å­é¢˜ï¼š

| é¢˜ç›®                                                         | é¢˜è§£                                                         | éš¾åº¦ | æ¨èæŒ‡æ•° |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---- | -------- |
| [304. äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜](https://leetcode-cn.com/problems/range-sum-query-2d-immutable/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/range-sum-query-2d-immutable/solution/xia-ci-ru-he-zai-30-miao-nei-zuo-chu-lai-ptlo/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜](https://leetcode-cn.com/problems/range-sum-query-immutable/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/range-sum-query-immutable/solution/sha-shi-qian-zhui-he-ya-tu-jie-qian-zhui-0rla/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [525. è¿ç»­æ•°ç»„](https://leetcode-cn.com/problems/contiguous-array/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/contiguous-array/solution/gong-shui-san-xie-qian-zhui-he-ha-xi-bia-q400/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [724. å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒä¸‹æ ‡](https://leetcode-cn.com/problems/find-pivot-index/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/find-pivot-index/solution/shi-yong-shao-bing-ji-qiao-liang-bian-qi-vkju/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [1004. æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III](https://leetcode-cn.com/problems/max-consecutive-ones-iii/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/max-consecutive-ones-iii/solution/san-chong-jie-fa-cong-dong-tai-gui-hua-d-gxks/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1154. ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©](https://leetcode-cn.com/problems/day-of-the-year/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/day-of-the-year/solution/gong-shui-san-xie-jian-dan-qian-zhui-he-lwo2g/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [1480. ä¸€ç»´æ•°ç»„çš„åŠ¨æ€å’Œ](https://leetcode-cn.com/problems/running-sum-of-1d-array/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/running-sum-of-1d-array/solution/gong-shui-san-xie-yi-wei-qian-zhui-he-mo-g8hn/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [1588. æ‰€æœ‰å¥‡æ•°é•¿åº¦å­æ•°ç»„çš„å’Œ](https://leetcode-cn.com/problems/sum-of-all-odd-length-subarrays/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/sum-of-all-odd-length-subarrays/solution/gong-shui-san-xie-yi-ti-shuang-jie-qian-18jq3/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |

**æ³¨ï¼šä»¥ä¸Šç›®å½•æ•´ç†æ¥è‡ª [wiki](https://github.com/SharingSource/LogicStack-LeetCode/wiki/å‰ç¼€å’Œ)ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½å¼•ç”¨è¯·ä¿ç•™å‡ºå¤„ã€‚**

---

## å…¨å®¶ç¦

åœ¨å…±åŒèµ°è¿‡çš„ $400$ å¤©é‡Œï¼Œæ„Ÿè°¢æœ‰ä½ ä»¬ â¤ï¸â¤ï¸

å’”åš“ï¼Œå…¨å®¶ç¦ Get ğŸ‰ï¼ˆä¹Ÿæ„Ÿè°¢ç…§ç‰‡ä»¥å¤–ï¼Œå¸®æˆ‘ä»¬æ‹¿ç›¸æœºçš„å¤§å®¶ ğŸ¤£

![WechatIMG2259.jpeg](https://pic.leetcode-cn.com/1646692295-xgTKqc-WechatIMG2259.jpeg)
![WechatIMG2264.jpeg](https://pic.leetcode-cn.com/1646692412-LhIrtt-WechatIMG2264.jpeg)
![WechatIMG2261.jpeg](https://pic.leetcode-cn.com/1646692307-fZLrix-WechatIMG2261.jpeg)
![WechatIMG2265.jpeg](https://pic.leetcode-cn.com/1646692442-AZYiQv-WechatIMG2265.jpeg)
![WechatIMG2263.jpeg](https://pic.leetcode-cn.com/1646692323-TCJFiD-WechatIMG2263.jpeg)

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~