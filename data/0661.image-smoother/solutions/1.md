## [661.å›¾ç‰‡å¹³æ»‘å™¨ ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/image-smoother/solutions/100000/by-ac_oier-nn3v)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)

## æœ´ç´ è§£æ³•

ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ç§°æ¯ä¸ªå•å…ƒæ ¼åŠå…¶å…«è¿é€šæ–¹å‘å•å…ƒæ ¼æ‰€ç»„æˆçš„è¿é€šå—ä¸ºä¸€ä¸ª `item`ã€‚

æ•°æ®èŒƒå›´åªæœ‰ $200$ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¹æ¯ä¸ª `item` è¿›è¡Œéå†æ¨¡æ‹Ÿã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int[][] imageSmoother(int[][] img) {
        int m = img.length, n = img[0].length;
        int[][] ans = new int[m][n];
        int[][] dirs = new int[][]{{0,0},{1,0},{-1,0},{0,1},{0,-1},{-1,-1},{-1,1},{1,-1},{1,1}};
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                int tot = 0, cnt = 0;
                for (int[] di : dirs) {
                    int nx = i + di[0], ny = j + di[1];
                    if (nx < 0 || nx >= m || ny < 0 || ny >= n) continue;
                    tot += img[nx][ny]; cnt++;
                }
                ans[i][j] = tot / cnt;
            }
        }
        return ans;
    }
}
```
```Python3 []
dirs = list(product(*[[-1,0,1]] * 2))
class Solution:
    def imageSmoother(self, img: List[List[int]]) -> List[List[int]]:
        m, n = len(img), len(img[0])
        ans = [[0] * n for _ in range(m)]
        for i, j in product(range(m), range(n)):
            tot, cnt = 0, 0
            for di in dirs:
                if 0 <= (nx := i + di[0]) < m and 0 <= (ny := j + di[1]) < n:
                    tot += img[nx][ny]
                    cnt += 1
            ans[i][j] = tot // cnt
        return ans
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(m * n * C)$ï¼Œå…¶ä¸­ $C$ ä¸ºç°åº¦å•ä½æ‰€åŒ…å«çš„å•å…ƒæ ¼æ•°é‡ï¼Œå›ºå®šä¸º $9$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(m * n)$

---

## å‰ç¼€å’Œ 

åœ¨æœ´ç´ è§£æ³•ä¸­ï¼Œå¯¹äºæ¯ä¸ª $ans[i][j]$ æˆ‘ä»¬éƒ½ä¸å¯é¿å…çš„éå† $8$ è”é€šæ–¹å‘ï¼Œè€Œåˆ©ç”¨ã€Œå‰ç¼€å’Œã€æˆ‘ä»¬å¯ä»¥å¯¹è¯¥æ“ä½œè¿›è¡Œä¼˜åŒ–ã€‚

> ä¸äº†è§£ã€ŒäºŒç»´å‰ç¼€å’Œã€çš„åŒå­¦å¯ä»¥çœ‹å‰ç½® ğŸ§€ï¼š [äºŒç»´å‰ç¼€å’Œæ¨¡æ¿å¦‚ä½•è®°å¿†](https://leetcode-cn.com/problems/range-sum-query-2d-immutable/solution/xia-ci-ru-he-zai-30-miao-nei-zuo-chu-lai-ptlo/)

å¯¹äºæŸä¸ª $ans[i][j]$ è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¡ç®—å‡ºå…¶æ‰€åœ¨ `item` çš„å·¦ä¸Šè§’ $(a, b) = (i - 1, j - 1)$ ä»¥åŠå…¶å³ä¸‹è§’ $(c, d) = (i + 1, j + 1)$ï¼ŒåŒæ—¶ä¸ºäº†é˜²æ­¢è¶…å‡ºåŸçŸ©é˜µï¼Œæˆ‘ä»¬éœ€è¦å°† $(a, b)$ ä¸ $(c, d)$ å¯¹è¾¹ç•Œåˆ†åˆ«å– `max` å’Œ `min`ã€‚

å½“æœ‰äº†åˆæ³•çš„ $(a, b)$ å’Œ $(c, d)$ åï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¡ç®—å‡º `item` çš„å•å…ƒæ ¼æ•°é‡ï¼ˆæ‰€åŒ…å«çš„è¡Œåˆ—ä¹˜ç§¯ï¼‰åŠ `item`  çš„å•å…ƒæ ¼ä¹‹å’Œï¼ˆå‰ç¼€å’ŒæŸ¥è¯¢ï¼‰ï¼Œä»è€Œç®—å¾— $ans[i][j]$ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int[][] imageSmoother(int[][] img) {
        int m = img.length, n = img[0].length;
        int[][] sum = new int[m + 10][n + 10];
        for (int i = 1; i <= m; i++) {
            for (int j = 1; j <= n; j++) {
                sum[i][j] = sum[i - 1][j] + sum[i][j - 1] - sum[i - 1][j - 1] + img[i - 1][j - 1];
            }
        }
        int[][] ans = new int[m][n];
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                int a = Math.max(0, i - 1), b = Math.max(0, j - 1);
                int c = Math.min(m - 1, i + 1), d = Math.min(n - 1, j + 1);
                int cnt = (c - a + 1) * (d - b + 1);
                int tot = sum[c + 1][d + 1] - sum[a][d + 1] - sum[c + 1][b] + sum[a][b];
                ans[i][j] = tot / cnt;
            }
        }
        return ans;
    }
}
```
```Python3 []
class Solution:
    def imageSmoother(self, img: List[List[int]]) -> List[List[int]]:
        m, n = len(img), len(img[0])
        sum = [[0] * (n + 10) for _ in range(m + 10)]
        for i, j in product(range(1, m + 1), range(1, n + 1)):
            sum[i][j] = sum[i - 1][j] + sum[i][j - 1] - sum[i - 1][j - 1] + img[i - 1][j - 1]
        ans = [[0] * n for _ in range(m)]
        for i, j in product(range(m), range(n)):
            a, b = max(0, i - 1), max(0, j - 1)
            c, d = min(m - 1, i + 1), min(n - 1, j + 1)
            cnt = (c - a + 1) * (d - b + 1)
            tot = sum[c + 1][d + 1] - sum[a][d + 1] - sum[c + 1][b] + sum[a][b]
            ans[i][j] = tot // cnt
        return ans
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(m * n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(m * n)$

---

## åŒç±»å‹åŠ é¤

**ä»Šæ—¥ä»½åŠ é¤ï¼š[ã€é¢è¯•é«˜é¢‘é¢˜ã€‘éš¾åº¦ 1.5/5ï¼Œä¸€é“ã€Œæ¡¶æ’åº + å‰ç¼€å’Œã€ä¼˜åŒ–é¢˜](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247490510%26idx%3D1%26sn%3D1caa56e8871fb4236264b40048b06fb6) ğŸ‰ ğŸ‰**

æˆ–æ˜¯åŠ ç»ƒå¦‚ä¸‹ã€Œå‰ç¼€å’Œã€é¢˜ç›® ğŸ­ğŸ­ 

| é¢˜ç›®                                                         | é¢˜è§£                                                         | éš¾åº¦ | æ¨èæŒ‡æ•° |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---- | -------- |
| [689. ä¸‰ä¸ªæ— é‡å å­æ•°ç»„çš„æœ€å¤§å’Œ](https://leetcode-cn.com/problems/maximum-sum-of-3-non-overlapping-subarrays/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/maximum-sum-of-3-non-overlapping-subarrays/solution/gong-shui-san-xie-jie-he-qian-zhui-he-de-ancx/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1074. å…ƒç´ å’Œä¸ºç›®æ ‡å€¼çš„å­çŸ©é˜µæ•°é‡](https://leetcode-cn.com/problems/number-of-submatrices-that-sum-to-target/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/number-of-submatrices-that-sum-to-target/solution/gong-shui-san-xie-you-hua-mei-ju-de-ji-b-uttw/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1310. å­æ•°ç»„å¼‚æˆ–æŸ¥è¯¢](https://leetcode-cn.com/problems/xor-queries-of-a-subarray/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/xor-queries-of-a-subarray/solution/gong-shui-san-xie-yi-ti-shuang-jie-shu-z-rcgu/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [1442. å½¢æˆä¸¤ä¸ªå¼‚æˆ–ç›¸ç­‰æ•°ç»„çš„ä¸‰å…ƒç»„æ•°ç›®](https://leetcode-cn.com/problems/count-triplets-that-can-form-two-arrays-of-equal-xor/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/count-triplets-that-can-form-two-arrays-of-equal-xor/solution/gong-shui-san-xie-xiang-jie-shi-yong-qia-7gzm/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1738. æ‰¾å‡ºç¬¬ K å¤§çš„å¼‚æˆ–åæ ‡å€¼](https://leetcode-cn.com/problems/find-kth-largest-xor-coordinate-value/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/find-kth-largest-xor-coordinate-value/solution/gong-shui-san-xie-xiang-jie-li-yong-er-w-ai0d/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1749. ä»»æ„å­æ•°ç»„å’Œçš„ç»å¯¹å€¼çš„æœ€å¤§å€¼](https://leetcode-cn.com/problems/maximum-absolute-sum-of-any-subarray/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/maximum-absolute-sum-of-any-subarray/solution/xiang-jie-qian-zhui-he-jie-fa-fen-xi-si-yibby/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1894. æ‰¾åˆ°éœ€è¦è¡¥å……ç²‰ç¬”çš„å­¦ç”Ÿç¼–å·](https://leetcode-cn.com/problems/find-the-student-that-will-replace-the-chalk/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/find-the-student-that-will-replace-the-chalk/solution/gong-shui-san-xie-yi-ti-shuang-jie-qian-kpqsk/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |

**æ³¨ï¼šä»¥ä¸Šç›®å½•æ•´ç†æ¥è‡ª [wiki](https://github.com/SharingSource/LogicStack-LeetCode/wiki/å‰ç¼€å’Œ)ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½å¼•ç”¨è¯·ä¿ç•™å‡ºå¤„ã€‚**

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~