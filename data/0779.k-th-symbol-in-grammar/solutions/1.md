## [779.ç¬¬Kä¸ªè¯­æ³•ç¬¦å· ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/k-th-symbol-in-grammar/solutions/100000/by-lcbin-2eyj)

ä½œè€…ï¼š[lcbin](https://leetcode.cn/u/lcbin)


**æ–¹æ³•ä¸€ï¼šé€’å½’**

æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å‰å‡ è¡Œçš„è§„å¾‹ï¼š

```
n = 1: 0
n = 2: 0 1
n = 3: 0 1 1 0
n = 4: 0 1 1 0 1 0 0 1
n = 5: 0 1 1 0 1 0 0 1 1 0 0 1 0 1 1 0
...
```

å¯ä»¥å‘ç°ï¼Œæ¯ä¸€è¡Œçš„å‰åŠéƒ¨åˆ†å’Œä¸Šä¸€è¡Œå®Œå…¨ä¸€è‡´ï¼ŒååŠéƒ¨åˆ†æ˜¯ä¸Šä¸€è¡Œçš„åè½¬ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„â€œåè½¬â€æŒ‡çš„æ˜¯ $0$ å˜ $1$, $1$ å˜ $0$ã€‚

å¦‚æœ $k$ åœ¨å‰åŠéƒ¨åˆ†ï¼Œé‚£ä¹ˆç¬¬ $k$ ä¸ªå­—ç¬¦å°±æ˜¯ä¸Šä¸€è¡Œçš„ç¬¬ $k$ ä¸ªå­—ç¬¦ï¼Œç›´æ¥é€’å½’ $kthGrammar(n - 1, k)$ å³å¯ã€‚

å¦‚æœ $k$ åœ¨ååŠéƒ¨åˆ†ï¼Œé‚£ä¹ˆç¬¬ $k$ ä¸ªå­—ç¬¦å°±æ˜¯ä¸Šä¸€è¡Œçš„ç¬¬ $k - 2^{n - 2}$ ä¸ªå­—ç¬¦çš„åè½¬ï¼Œå³ $kthGrammar(n - 1, k - 2^{n - 2}) \oplus 1$ã€‚

æ—¶é—´å¤æ‚åº¦ $O(n)$ï¼Œç©ºé—´å¤æ‚åº¦ $O(n)$ã€‚


```python [sol1-Python3]
class Solution:
    def kthGrammar(self, n: int, k: int) -> int:
        if n == 1:
            return 0
        if k <= (1 << (n - 2)):
            return self.kthGrammar(n - 1, k)
        return self.kthGrammar(n - 1, k - (1 << (n - 2))) ^ 1
```


```java [sol1-Java]
class Solution {
    public int kthGrammar(int n, int k) {
        if (n == 1) {
            return 0;
        }
        if (k <= (1 << (n - 2))) {
            return kthGrammar(n - 1, k);
        }
        return kthGrammar(n - 1, k - (1 << (n - 2))) ^ 1;
    }
}
```


```cpp [sol1-C++]
class Solution {
public:
    int kthGrammar(int n, int k) {
        if (n == 1) return 0;
        if (k <= (1 << (n - 2))) return kthGrammar(n - 1, k);
        return kthGrammar(n - 1, k - (1 << (n - 2))) ^ 1;
    }
};
```




```go [sol1-Go]
func kthGrammar(n int, k int) int {
	if n == 1 {
		return 0
	}
	if k <= (1 << (n - 2)) {
		return kthGrammar(n-1, k)
	}
	return kthGrammar(n-1, k-(1<<(n-2))) ^ 1
}
```

----

**æ–¹æ³•äºŒï¼šä½è¿ç®—**

é¢˜ç›®ä¸­ç´¢å¼•ä» $1$ å¼€å§‹ï¼Œæˆ‘ä»¬å°† $k$ æ”¹æˆ $k-1$ï¼Œå°†ç´¢å¼•è½¬æ¢ä¸ºä» $0$ å¼€å§‹ã€‚åœ¨æ¥ä¸‹æ¥çš„è®¨è®ºä¸­ï¼Œç´¢å¼•å‡ä» $0$ å¼€å§‹ã€‚

ä»”ç»†è§‚å¯Ÿï¼Œä¸€è¡Œä¸­çš„ç¬¬ $i$ ä¸ªå­—ç¬¦ï¼Œä¼šåœ¨ç¬¬ $2i$ å’Œç¬¬ $2i+1$ ä¸ªä½ç½®äº§ç”Ÿä¸¤ä¸ªå­—ç¬¦ã€‚

```
0 1 1 0 1 0 0 1 1 0 0 1 0 1 1 0
```

å¦‚æœç¬¬ $i$ ä¸ªå­—ç¬¦æ˜¯ $0$ï¼Œé‚£ä¹ˆåœ¨ä½ç½® $2i$ å’Œ $2i+1$ äº§ç”Ÿçš„å­—ç¬¦åˆ†åˆ«æ˜¯ $0$ å’Œ $1$ï¼›å¦‚æœç¬¬ $i$ ä¸ªå­—ç¬¦æ˜¯ $1$ï¼Œäº§ç”Ÿçš„å­—ç¬¦æ˜¯ $1$ å’Œ $0$ã€‚

```
0 1 1 0 1 0 0 1 1 0 0 1 0 1 1 0
      ^     * *
```

```
0 1 1 0 1 0 0 1 1 0 0 1 0 1 1 0
        ^       * *
```

å¯ä»¥å‘ç°ï¼Œç¬¬ $2i$ ï¼ˆå¶æ•°ä½ï¼‰ä¸ªå­—ç¬¦æ€»æ˜¯å’Œç¬¬ $i$ ä¸ªå­—ç¬¦ç›¸åŒï¼Œè€Œç¬¬ $2i+1$ ï¼ˆå¥‡æ•°ä½ï¼‰ä¸ªå­—ç¬¦æ˜¯ç¬¬ $i$ ä¸ªå­—ç¬¦çš„åè½¬ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¥‡æ•°ä½ä¸Šçš„å­—ç¬¦æ€»æ˜¯å‘ç”Ÿäº†ä¸€æ¬¡åè½¬è€Œæ¥çš„ã€‚åè½¬å¶æ•°æ¬¡ï¼Œå­—ç¬¦ä¸å˜ï¼›åè½¬å¥‡æ•°æ¬¡ï¼Œç›¸å½“äºåè½¬äº†ä¸€æ¬¡ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦çœ‹ $k$ è¿™ä¸ªæ•°å­—æ˜¯å¦æ˜¯å¥‡æ•°ï¼Œè‹¥æ˜¯ï¼Œç´¯è®¡ä¸€æ¬¡åè½¬ã€‚ç„¶åå°† $k$ é™¤ä»¥ $2$ï¼Œç»§ç»­åˆ¤æ–­ï¼Œå¹¶ç´¯è®¡åè½¬æ¬¡æ•°ï¼Œç›´è‡³ $k$ ä¸º $0$ã€‚

æœ€ååˆ¤æ–­åè½¬çš„æ¬¡æ•°æ˜¯å¦ä¸ºå¥‡æ•°ï¼Œæ˜¯åˆ™ç­”æ¡ˆä¸º $1$ï¼Œå¦åˆ™ä¸º $0$ã€‚

ä»¥ä¸Šç´¯è®¡åè½¬æ¬¡æ•°çš„è¿‡ç¨‹ï¼Œå®é™…ä¸Šç­‰ä»·äºæ±‚ $k$ çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ï¼Œæœ‰å¤šå°‘ä½æ˜¯ $1$ã€‚

æ—¶é—´å¤æ‚åº¦ $O(\log k)$ï¼Œç©ºé—´å¤æ‚åº¦ $O(1)$ã€‚




```python [sol2-Python3]
class Solution:
    def kthGrammar(self, n: int, k: int) -> int:
        return (k - 1).bit_count() & 1
```




```java [sol2-Java]
class Solution {
    public int kthGrammar(int n, int k) {
        return Integer.bitCount(k - 1) & 1;
    }
}
```




```cpp [sol2-C++]
class Solution {
public:
    int kthGrammar(int n, int k) {
        return __builtin_popcount(k - 1) & 1;
    }
};
```


```go [sol2-Go]
func kthGrammar(n int, k int) int {
	return bits.OnesCount(uint(k-1)) & 1
}
```

---

æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºäº¤æµï¼Œæ¬¢è¿è¯„è®ºåŒºæä¾›å…¶å®ƒè§£é¢˜æ€è·¯ï¼ˆä»£ç ï¼‰ï¼Œä¹Ÿå¯ä»¥ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ä½œè€…å“ˆğŸ˜„~