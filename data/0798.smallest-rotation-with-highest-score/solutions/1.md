## [798.å¾—åˆ†æœ€é«˜çš„æœ€å°è½®è°ƒ ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/smallest-rotation-with-highest-score/solutions/100000/gong-shui-san-xie-shang-xia-jie-fen-xi-c-p6kh)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)

## ä¸Šä¸‹ç•Œåˆ†æ + å·®åˆ†åº”ç”¨

ä¸ºäº†æ–¹ä¾¿ï¼Œä»¤ $n$ ä¸º $nums$ é•¿åº¦ï¼ˆä¸­æ–‡çš„æ•°æ®èŒƒå›´æ˜¯é”™çš„ï¼Œæ•°ç»„é•¿åº¦åº”è¯¥æ˜¯ $10^5$ï¼Œä¸æ˜¯ $20000$ï¼‰ã€‚

å¯¹äºç»™å®šçš„ $nums$ è€Œè¨€ï¼Œæœ‰æ•ˆçš„è½®è°ƒèŒƒå›´ä¸º $[0, n - 1]$ï¼Œå³å¯¹äºä»»æ„ $nums[i]$ è€Œè¨€ï¼Œå¯å–çš„ä¸‹æ ‡å…±æœ‰ $n$ ç§ã€‚

å‡å®šå½“å‰ä¸‹æ ‡ä¸º $i$ï¼Œè½®è°ƒæ¬¡æ•°ä¸º $k$ï¼Œé‚£ä¹ˆè½®è°ƒåä¸‹æ ‡ä¸º $i - k$ï¼Œå½“æ–°ä¸‹æ ‡ä¸ºè´Ÿæ•°æ—¶ï¼Œç›¸å½“äº $nums[i]$ å‡ºç°åœ¨æ¯”åŸæ•°ç»„æ›´â€œé åâ€çš„ä½ç½®ï¼Œæ­¤æ—¶ä¸‹æ ‡ç­‰ä»·äº $(i - k + n) \mod n$ã€‚

è€ƒè™‘ä»€ä¹ˆæƒ…å†µä¸‹ $nums[i]$ èƒ½å¤Ÿå¾—åˆ†ï¼Ÿ

é¦–å…ˆæ–°ä¸‹æ ‡çš„å–å€¼èŒƒå›´ä¸º $[0, n - 1]$ï¼Œå³æœ‰ $0 \leqslant i - k \leqslant n - 1$ ã€‚ç”±æ­¤å¯åˆ†æå‡º $k$ çš„å–å€¼èŒƒå›´ä¸ºï¼š

$$
0 \leqslant i - k \Leftrightarrow k \leqslant i
$$

$$
i - k \leqslant n - 1 \Leftrightarrow i - (n - 1) \leqslant k
$$

å³ç”±æ–°ä¸‹æ ‡å–å€¼èŒƒå›´å¯çŸ¥ $k$ çš„ä¸Šä¸‹ç•Œåˆ†åˆ«ä¸º $i$ å’Œ $i - (n - 1)$ã€‚

åŒæ—¶ä¸ºäº†æ»¡è¶³å¾—åˆ†å®šä¹‰ï¼Œè¿˜æœ‰ $nums[i] \leqslant i - k$ï¼Œè¿›è¡Œå˜å½¢å¯å¾—ï¼š

$$
nums[i] \leqslant i - k \Leftrightarrow k \leqslant i - nums[i]
$$

æ­¤æ—¶æˆ‘ä»¬æœ‰ä¸¤ä¸ªå…³äº $k$ çš„ä¸Šç•Œ $k \leqslant i$ å’Œ $k \leqslant i - nums[i]$ï¼Œç”±äº $nums[i]$ å–å€¼èŒƒå›´ä¸º $[0, n)$ï¼Œåˆ™æœ‰ $i - nums[i] \leqslant i$ï¼Œç”±äºå¿…é¡»åŒæ—¶æ»¡è¶³ã€Œåˆæ³•ç§»åŠ¨ï¼ˆæœ‰æ•ˆä¸‹æ ‡ï¼‰ã€å’Œã€Œèƒ½å¤Ÿå¾—åˆ†ã€ï¼Œæˆ‘ä»¬ä»…è€ƒè™‘èŒƒå›´æ›´å°ï¼ˆæ›´ä¸¥æ ¼ï¼‰ç”± $nums[i] \leqslant i - k$ æ¨å¯¼è€Œæ¥çš„ä¸Šç•Œ $k \leqslant i - nums[i]$ å³å¯ã€‚

ç»¼ä¸Šï¼Œ$nums[i]$ èƒ½å¤Ÿå¾—åˆ†çš„ $k$ çš„å–å€¼èŒƒå›´ä¸º $[i - (n - 1), i - nums[i]]$ã€‚

æœ€åè€ƒè™‘ $[i - (n - 1), i - nums[i]]$ï¼ˆå‡è¿›è¡ŒåŠ  $n$ æ¨¡ $n$ è½¬ä¸ºæ­£æ•°ï¼‰ä»€ä¹ˆæƒ…å†µä¸‹ä¸ºåˆæ³•çš„è¿ç»­æ®µï¼š

* å½“ $i - (n - 1) \leqslant i - nums[i]$ æ—¶ï¼Œ$[i - (n - 1), i - nums[i]]$ ä¸ºåˆæ³•è¿ç»­æ®µï¼›
* å½“ $i - (n - 1) > i - nums[i]$ æ—¶ï¼Œæ ¹æ®è´Ÿæ•°ä¸‹æ ‡ç­‰ä»·äº $(i - k + n) \mod n$ï¼Œæ­¤æ—¶ $[i - (n - 1), i - nums[i]]$ ç­‰ä»·äº $[0, i - nums[i]]$ å’Œ $[i - (n - 1), n - 1]$ ä¸¤æ®µã€‚

è‡³æ­¤ï¼Œæˆ‘ä»¬åˆ†æå‡ºåŸæ•°ç»„çš„æ¯ä¸ª $nums[i]$ èƒ½å¤Ÿå¾—åˆ†çš„ $k$ çš„å–å€¼èŒƒå›´ï¼Œå‡å®šå–å€¼èŒƒå›´ä¸º $[l, r]$ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ $[l, r]$ è¿›è¡Œ $+1$ æ ‡è®°ï¼Œä»£è¡¨èŒƒå›´ä¸º $k$ èƒ½å¤Ÿå¾— $1$ åˆ†ï¼Œå½“å¤„ç†å®Œæ‰€æœ‰çš„ $nums[i]$ åï¼Œæ‰¾åˆ°æ ‡è®°æ¬¡æ•°æœ€å¤šçš„ä½ç½® $k$ å³æ˜¯ç­”æ¡ˆã€‚

æ ‡è®°æ“ä½œå¯ä½¿ç”¨ã€Œå·®åˆ†ã€å®ç°ï¼ˆä¸äº†è§£å·®åˆ†çš„åŒå­¦ï¼Œå¯ä»¥å…ˆçœ‹å‰ç½®ğŸ§€ï¼š[å·®åˆ†å…¥é—¨æ¨¡æ¿é¢˜](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247490329%26idx%3D1%26sn%3D6d448a53cd722bbd990fda82bd262857%26chksm%3Dfd9cb006caeb3910758522054564348b7eb4bde333889300bd5d249950be12a5b990b5d2c059%26token%3D168273153%26lang%3Dzh_CN%23rd)ï¼Œé‡Œé¢è®²è§£äº†å·®åˆ†çš„ä¸¤ä¸ªæ ¸å¿ƒæ“ä½œã€ŒåŒºé—´ä¿®æ”¹ã€&ã€Œå•ç‚¹æŸ¥è¯¢ã€ï¼‰ï¼Œè€Œæ‰¾æ ‡è®°æ¬¡æ•°æœ€å¤šçš„ä½ç½®å¯å¯¹å·®åˆ†æ•°ç»„æ±‚å‰ç¼€å’Œå†è¿›è¡Œéå†å³å¯ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    static int N = 100010;
    static int[] c = new int[N];
    void add(int l, int r) {
        c[l] += 1; c[r + 1] -= 1;
    }
    public int bestRotation(int[] nums) {
        Arrays.fill(c, 0);
        int n = nums.length;
        for (int i = 0; i < n; i++) {
            int a = (i - (n - 1) + n) % n, b = (i - nums[i] + n) % n;
            if (a <= b) {
                add(a, b);
            } else {
                add(0, b);
                add(a, n - 1);
            }
        }
        for (int i = 1; i <= n; i++) c[i] += c[i - 1];
        int ans = 0;
        for (int i = 1; i <= n; i++) {
            if (c[i] > c[ans]) ans = i;
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## åŒç±»å‹åŠ é¤

[åŒºé—´æ±‚å’Œé—®é¢˜ ã® å·®åˆ†å…¥é—¨æ¨¡æ¿é¢˜](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247490329%26idx%3D1%26sn%3D6d448a53cd722bbd990fda82bd262857%26chksm%3Dfd9cb006caeb3910758522054564348b7eb4bde333889300bd5d249950be12a5b990b5d2c059%26token%3D168273153%26lang%3Dzh_CN%23rd)

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~