## [1238.å¾ªç¯ç æ’åˆ— ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/circular-permutation-in-binary-representation/solutions/100000/python3javacgotypescript-yi-ti-shuang-ji-zhm7)

ä½œè€…ï¼š[lcbin](https://leetcode.cn/u/lcbin)



> åˆšæ‰å‘äº†ä¸€ç¯‡æœ¬é¢˜çš„é¢˜è§£ï¼Œè¿Ÿè¿Ÿæ²¡æ”¾å‡ºæ¥ï¼Œè¿™é‡Œé‡æ–°å¼€ä¸€ç¯‡æ–‡ç« å‘ä¸€ä¸‹è¯•è¯•ã€‚

**æ–¹æ³•ä¸€ï¼šäºŒè¿›åˆ¶ç è½¬æ ¼é›·ç **

æˆ‘ä»¬è§‚å¯Ÿé¢˜ç›®ä¸­çš„æ’åˆ—ï¼Œå¯ä»¥å‘ç°ï¼Œå®ƒçš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ï¼Œä»»æ„ä¸¤ä¸ªï¼ˆåŒ…æ‹¬é¦–å°¾ï¼‰ç›¸é‚»çš„æ•°åªæœ‰ä¸€ä½äºŒè¿›åˆ¶æ•°ä¸åŒã€‚è¿™ç§ç¼–ç æ–¹å¼å°±æ˜¯æ ¼é›·ç ï¼Œå®ƒæ˜¯æˆ‘ä»¬åœ¨å·¥ç¨‹ä¸­ä¼šé‡åˆ°çš„ä¸€ç§ç¼–ç æ–¹å¼ã€‚

äºŒè¿›åˆ¶ç è½¬æ¢æˆäºŒè¿›åˆ¶æ ¼é›·ç ï¼Œå…¶æ³•åˆ™æ˜¯ä¿ç•™äºŒè¿›åˆ¶ç çš„æœ€é«˜ä½ä½œä¸ºæ ¼é›·ç çš„æœ€é«˜ä½ï¼Œè€Œæ¬¡é«˜ä½æ ¼é›·ç ä¸ºäºŒè¿›åˆ¶ç çš„é«˜ä½ä¸æ¬¡é«˜ä½ç›¸å¼‚æˆ–ï¼Œè€Œæ ¼é›·ç å…¶ä½™å„ä½ä¸æ¬¡é«˜ä½çš„æ±‚æ³•ç›¸ç±»ä¼¼ã€‚

å‡è®¾æŸä¸ªäºŒè¿›åˆ¶æ•°è¡¨ç¤ºä¸º $B_{n-1}B_{n-2}...B_2B_1B_0$ï¼Œå…¶æ ¼é›·ç è¡¨ç¤ºä¸º $G_{n-1}G_{n-2}...G_2G_1G_0$ã€‚æœ€é«˜ä½ä¿ç•™ï¼Œæ‰€ä»¥ $G_{n-1} = B_{n-1}$ï¼›è€Œå…¶å®ƒå„ä½ $G_i = B_{i+1} \oplus B_{i}$ï¼Œå…¶ä¸­ $i=0,1,2..,n-2$ã€‚

å› æ­¤ï¼Œå¯¹äºä¸€ä¸ªæ•´æ•° $x$ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•° $gray(x)$ å¾—åˆ°å…¶æ ¼é›·ç ï¼š

```python [sol1-Python3]
def gray(x):
    return x ^ (x >> 1)
```

```java [sol1-Java]
int gray(x) {
    return x ^ (x >> 1);
}
```

```cpp [sol1-C++]
int gray(x) {
    return x ^ (x >> 1);
}
```

```go [sol1-Go]
func gray(x int) int {
	return x ^ (x >> 1)
}
```

æˆ‘ä»¬å¯ä»¥ç›´æ¥å°† $[0,..2^n - 1]$ è¿™äº›æ•´æ•°è½¬æ¢æˆå¯¹åº”çš„æ ¼é›·ç æ•°ç»„ï¼Œç„¶åæ‰¾åˆ° $start$ åœ¨æ ¼é›·ç æ•°ç»„ä¸­çš„ä½ç½®ï¼Œå°†æ ¼é›·ç æ•°ç»„ä»è¯¥ä½ç½®å¼€å§‹æˆªå–ï¼Œå†å°†æˆªå–çš„éƒ¨åˆ†æ‹¼æ¥åˆ°æ ¼é›·ç æ•°ç»„çš„å‰é¢ï¼Œå°±å¾—åˆ°äº†é¢˜ç›®è¦æ±‚çš„æ’åˆ—ã€‚

```python [sol2-Python3]
class Solution:
    def circularPermutation(self, n: int, start: int) -> List[int]:
        g = [i ^ (i >> 1) for i in range(1 << n)]
        j = g.index(start)
        return g[j:] + g[:j]
```




```java [sol2-Java]
class Solution {
    public List<Integer> circularPermutation(int n, int start) {
        int[] g = new int[1 << n];
        int j = 0;
        for (int i = 0; i < 1 << n; ++i) {
            g[i] = i ^ (i >> 1);
            if (g[i] == start) {
                j = i;
            }
        }
        List<Integer> ans = new ArrayList<>();
        for (int i = j; i < j + (1 << n); ++i) {
            ans.add(g[i % (1 << n)]);
        }
        return ans;
    }
}
```





```cpp [sol2-C++]
class Solution {
public:
    vector<int> circularPermutation(int n, int start) {
        int g[1 << n];
        int j = 0;
        for (int i = 0; i < 1 << n; ++i) {
            g[i] = i ^ (i >> 1);
            if (g[i] == start) {
                j = i;
            }
        }
        vector<int> ans;
        for (int i = j; i < j + (1 << n); ++i) {
            ans.push_back(g[i % (1 << n)]);
        }
        return ans;
    }
};
```




```go [sol2-Go]
func circularPermutation(n int, start int) []int {
	g := make([]int, 1<<n)
	j := 0
	for i := range g {
		g[i] = i ^ (i >> 1)
		if g[i] == start {
			j = i
		}
	}
	return append(g[j:], g[:j]...)
}
```

æ—¶é—´å¤æ‚åº¦ $O(2^n)$ï¼Œç©ºé—´å¤æ‚åº¦ $O(2^n)$ã€‚å…¶ä¸­ $n$ ä¸ºé¢˜ç›®ç»™å®šçš„æ•´æ•°ã€‚

---

**æ–¹æ³•äºŒï¼šè½¬æ¢ä¼˜åŒ–**

ç”±äº $gray(0) = 0$ï¼Œé‚£ä¹ˆ $gray(0) \oplus start = start$ï¼Œè€Œ $gray(i)$ ä¸ $gray(i-1)$ åªæœ‰ä¸€ä¸ªäºŒè¿›åˆ¶ä½ä¸åŒï¼Œæ‰€ä»¥ $gray(i) \oplus start$ ä¸ $gray(i-1) \oplus start$ ä¹Ÿåªæœ‰ä¸€ä¸ªäºŒè¿›åˆ¶ä½ä¸åŒã€‚

å› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å°† $[0,..2^n - 1]$ è¿™äº›æ•´æ•°è½¬æ¢æˆå¯¹åº”çš„ $gray(i) \oplus start$ï¼Œå³å¯å¾—åˆ°é¦–é¡¹ä¸º $start$ çš„æ ¼é›·ç æ’åˆ—ã€‚

```python [sol3-Python3]
class Solution:
    def circularPermutation(self, n: int, start: int) -> List[int]:
        return [i ^ (i >> 1) ^ start for i in range(1 << n)]
```


```java [sol3-Java]
class Solution {
    public List<Integer> circularPermutation(int n, int start) {
        List<Integer> ans = new ArrayList<>();
        for (int i = 0; i < 1 << n; ++i) {
            ans.add(i ^ (i >> 1) ^ start);
        }
        return ans;
    }
}
```

```cpp [sol3-C++]
class Solution {
public:
    vector<int> circularPermutation(int n, int start) {
        vector<int> ans(1 << n);
        for (int i = 0; i < 1 << n; ++i) {
            ans[i] = i ^ (i >> 1) ^ start;
        }
        return ans;
    }
};
```


```go [sol3-Go]
func circularPermutation(n int, start int) (ans []int) {
	for i := 0; i < 1<<n; i++ {
		ans = append(ans, i^(i>>1)^start)
	}
	return
}
```

æ—¶é—´å¤æ‚åº¦ $O(2^n)$ï¼Œå…¶ä¸­ $n$ ä¸ºé¢˜ç›®ç»™å®šçš„æ•´æ•°ã€‚å¿½ç•¥ç­”æ¡ˆçš„ç©ºé—´æ¶ˆè€—ï¼Œç©ºé—´å¤æ‚åº¦ $O(1)$ã€‚

---

æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºäº¤æµï¼Œæ¬¢è¿è¯„è®ºåŒºæä¾›å…¶å®ƒè§£é¢˜æ€è·¯ï¼ˆä»£ç ï¼‰ï¼Œä¹Ÿå¯ä»¥ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ä½œè€…å“ˆğŸ˜„~