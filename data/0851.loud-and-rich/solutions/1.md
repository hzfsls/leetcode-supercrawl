## [851.å–§é—¹å’Œå¯Œæœ‰ ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/loud-and-rich/solutions/100000/gong-shui-san-xie-tuo-bu-pai-xu-yun-yong-ylih)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)
## æ‹“æ‰‘æ’åº

æ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `richer` è¿›è¡Œå»ºå›¾ï¼ˆé‚»æ¥çŸ©é˜µ/é‚»æ¥è¡¨ï¼‰ï¼Œå¯¹äºæ¯ç»„ $richer[i] = (a_i, b_i)$ è€Œè¨€ï¼Œæ·»åŠ ä¸€æ¡ä» $a$ åˆ° $b$ çš„æœ‰å‘è¾¹ï¼ˆæœ‰é’±æŒ‡å‘æ²¡é’±ï¼‰ã€‚

å…¶ä¸­é¢˜ç›®ä¸­çš„ã€Œ`richer` é€»è¾‘è‡ªæ°ã€æ˜¯æŒ‡åœ¨è¯¥å›¾ä¸­ä¸å­˜åœ¨ç¯ï¼Œå³ä¸º DAGã€‚

å› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨å»ºå›¾è¿‡ç¨‹ä¸­ï¼ŒåŒæ—¶ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦æ•°ï¼Œç„¶ååœ¨å›¾ä¸­è·‘ä¸€éæ‹“æ‰‘æ’åºæ¥æ±‚å¾—ç­”æ¡ˆ $ans$ã€‚

**å¯¹ã€Œå›¾è®º æ‹“æ‰‘æ’åºã€ä¸äº†è§£çš„åŒå­¦ï¼Œå¯ä»¥å…ˆçœ‹å‰ç½® ğŸ§€ï¼š[æ‹“æ‰‘æ’åºå…¥é—¨](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247489706%26idx%3D1%26sn%3D771cd807f39d1ca545640c0ef7e5baec)ï¼Œé‡Œé¢è¯¦ç»†è¯´æ˜äº†ã€Œæ‹“æ‰‘æ’åºçš„åŸºæœ¬æµç¨‹ã€&ã€Œåå‘å›¾ + æ‹“æ‰‘æ’åºåšæ³•çš„æ­£ç¡®æ€§è¯æ˜ã€ã€‚**

èµ·å§‹æ—¶ï¼Œæ¯ä¸ª $ans[i] = i$ï¼Œç„¶åå°†ç»Ÿè®¡å…¥åº¦ä¸º $0$ çš„èŠ‚ç‚¹è¿›è¡Œå…¥é˜Ÿï¼Œæ¯æ¬¡å‡ºé˜Ÿæ—¶ï¼Œå°†è¯¥èŠ‚ç‚¹åˆ æ‰ï¼Œå¯¹è¯¥ DAG å¸¦æ¥å½±å“æ˜¯ã€Œè¯¥èŠ‚ç‚¹çš„é‚»ç‚¹çš„å…¥åº¦å‡ä¸€ã€ï¼Œè‹¥æ›´æ–°å…¥åº¦åæ•°å€¼ä¸º $0$ï¼Œåˆ™å°†è¯¥é‚»ç‚¹è¿›è¡Œå…¥é˜Ÿæ“ä½œã€‚

åŒæ—¶ï¼Œåˆ©ç”¨è·‘æ‹“æ‰‘æ’åºè¿‡ç¨‹ä¸­çš„ $t -> u$ å…³ç³»ï¼Œå°è¯•ä½¿ç”¨ $ans[t]$ æ›´æ–° $ans[u]$ï¼ˆç”±äºå­˜åœ¨ $t$ æŒ‡å‘ $u$ çš„è¾¹ï¼Œè¯´æ˜ $t$ æ¯” $u$ æœ‰é’±ï¼Œæ­¤æ—¶æ£€æŸ¥ä¸¤è€…çš„å®‰é™å€¼ï¼Œè‹¥æ»¡è¶³ $quiet[ans[t]] < quiet[ans[u]]$ï¼Œåˆ™ç”¨ $ans[t]$ æ›´æ–° $ans[u]$ï¼‰ã€‚

> æœ¬é¢˜ä¸ºç¨ å¯†å›¾ï¼ˆç‚¹æ•°ä¸º $n$ï¼Œè¾¹æ•°ä¸º $m$ï¼Œå½“ $m$ ä¸ $n^2$ ä¸ºåŒä¸€æ•°æ®çº§ï¼Œå®šä¹‰ä»¥ä¸ºç¨ å¯†å›¾ï¼‰ï¼Œå¯ç›´æ¥ä½¿ç”¨ã€Œé‚»æ¥çŸ©é˜µã€è¿›è¡Œå­˜å›¾ã€‚
å…³äºä½•ç§å›¾é€‰æ‹©ä»€ä¹ˆå­˜å›¾æ–¹å¼ï¼Œåœ¨ [è¿™é‡Œ](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247488007%26idx%3D1%26sn%3D9d0dcfdf475168d26a5a4bd6fcd3505d) è¯¦ç»†è®²è¿‡ï¼Œæœ¬æ¬¡ä¸å†èµ˜è¿°ã€‚

ä»£ç ï¼ˆ$P1$ ä¸ºé‚»æ¥çŸ©é˜µï¼Œ$P2$ ä¸ºé‚»æ¥è¡¨ï¼‰ï¼š
```Java []
class Solution {
    public int[] loudAndRich(int[][] richer, int[] quiet) {
        int n = quiet.length;
        int[][] w = new int[n][n];
        int[] in = new int[n];
        for (int[] r : richer) {
            int a = r[0], b = r[1];
            w[a][b] = 1; in[b]++;
        }
        Deque<Integer> d = new ArrayDeque<>();
        int[] ans = new int[n];
        for (int i = 0; i < n; i++) {
            ans[i] = i;
            if (in[i] == 0) d.addLast(i);
        }
        while (!d.isEmpty()) {
            int t = d.pollFirst();
            for (int u = 0; u < n; u++) {
                if (w[t][u] == 1) {
                    if (quiet[ans[t]] < quiet[ans[u]]) ans[u] = ans[t];
                    if (--in[u] == 0) d.addLast(u);
                }
            }
        }
        return ans;
    }
}
```
```Java []
class Solution {
    int N = 510, M = N * N + 10;
    int[] he = new int[N], e = new int[M], ne = new int[M];
    int idx;
    void add(int a, int b) {
        e[idx] = b;
        ne[idx] = he[a];
        he[a] = idx;
        idx++;
    }
    public int[] loudAndRich(int[][] richer, int[] quiet) {
        int n = quiet.length;
        int[] in = new int[n];
        Arrays.fill(he, -1);
        for (int[] r : richer) {
            int a = r[0], b = r[1];
            add(a, b); in[b]++;
        }
        Deque<Integer> d = new ArrayDeque<>();
        int[] ans = new int[n];
        for (int i = 0; i < n; i++) {
            ans[i] = i;
            if (in[i] == 0) d.addLast(i);
        }
        while (!d.isEmpty()) {
            int t = d.pollFirst();
            for (int i = he[t]; i != -1; i = ne[i]) {
                int u = e[i];
                if (quiet[ans[t]] < quiet[ans[u]]) ans[u] = ans[t];
                if (--in[u] == 0) d.addLast(u);
            }
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šä»¤ $n$ ä¸º `person` æ•°é‡ï¼ˆç‚¹æ•°ï¼‰ï¼Œ$m$ ä¸º `richer` é•¿åº¦ï¼ˆè¾¹æ•°ï¼‰ã€‚çš„å»ºå›¾çš„å¤æ‚åº¦ä¸º $O(m)$ï¼›æ‹“æ‰‘æ’åºå¤æ‚åº¦ä¸º $O(m + n)$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(m + n)$
* ç©ºé—´å¤æ‚åº¦ï¼šä½¿ç”¨é‚»æ¥çŸ©é˜µå­˜å›¾çš„å¤æ‚åº¦ä¸º $O(n^2)$ï¼›ä½¿ç”¨é‚»æ¥è¡¨å¤æ‚åº¦ä¸º $O(m + n)$

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~ 