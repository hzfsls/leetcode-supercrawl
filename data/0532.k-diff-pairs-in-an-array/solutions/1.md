## [532.æ•°ç»„ä¸­çš„ k-diff æ•°å¯¹ ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/k-diff-pairs-in-an-array/solutions/100000/by-ac_oier-ap3v)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)
## å“ˆå¸Œè¡¨

ä¸€ä¸ªç®€å•çš„æƒ³æ³•æ˜¯å…ˆä½¿ç”¨ã€Œå“ˆå¸Œè¡¨ã€è¿›è¡Œè®¡æ•°ã€‚

å¯¹äºæ¯ä¸ª $x = nums[i]$ è€Œè¨€ï¼Œæ ¹æ® $k$ æ˜¯å¦ä¸º $0$ è¿›è¡Œåˆ†æƒ…å†µè®¨è®ºï¼š

* $k$ ä¸º $0$ï¼šæ­¤æ—¶åªèƒ½ $(x, x)$ ç»„æˆæ•°å¯¹ï¼Œæ­¤æ—¶åˆ¤æ–­ $x$ å‡ºç°æ¬¡æ•°æ˜¯å¦å¤§äº $1$ æ¬¡ï¼Œè‹¥æ»¡è¶³åˆ™è¿›è¡Œè®¡æ•°åŠ ä¸€ï¼›
* $k$ ä¸ä¸º $0$ï¼šæ­¤æ—¶ $x$ èƒ½å¤Ÿä¸ $a = x - k$ æˆ– $b = x + k$ ç»„æˆæ•°å¯¹ï¼Œåˆ†åˆ«æŸ¥è¯¢ $a$ å’Œ $b$ æ˜¯å¦å‡ºç°è¿‡ï¼Œè‹¥å‡ºç°è¿‡åˆ™è¿›è¡Œè®¡æ•°åŠ ä¸€ã€‚

ä¸ºäº†é˜²æ­¢ç›¸åŒçš„ $x$ è¿›è¡Œé‡å¤è®¡æ•°ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿè®¡å®Œ $x$ åï¼Œæ¸…ç©ºå…¶å‡ºç°æ¬¡æ•°ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int findPairs(int[] nums, int k) {
        Map<Integer, Integer> map = new HashMap<>();
        for (int i : nums) map.put(i, map.getOrDefault(i, 0) + 1);
        int ans = 0;
        for (int i : nums) {
            if (map.get(i) == 0) continue;
            if (k == 0) {
                if (map.get(i) > 1) ans++;
            } else {
                int a = i - k, b = i + k;
                if (map.getOrDefault(a, 0) > 0) ans++;
                if (map.getOrDefault(b, 0) > 0) ans++;
            }
            map.put(i, 0);
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## ç¦»æ•£åŒ– + äºŒåˆ†

æˆ‘ä»¬çŸ¥é“å¯ä»¥ä½¿ç”¨ã€Œæ•°ç»„ã€å……å½“ã€Œå“ˆå¸Œè¡¨ã€æ¥å‡å°‘å¸¸æ•°ï¼Œä½†ç”±äº $nums[i]$ çš„å€¼åŸŸå¤§å°ä¸º $2 \times 10^7$ï¼Œå¯èƒ½ä¼šæœ‰ `MLE` é£é™©ã€‚

æˆ‘ä»¬éœ€è¦å¯¹ $nums$ è¿›è¡Œç¦»æ•£åŒ–ï¼Œé¢„å¤„ç†å‡ºä¸€ä¸ªå»é‡ä¸”æœ‰åºçš„æ•°ç»„ `list`ã€‚

åœ¨ç»Ÿè®¡ç­”æ¡ˆæ—¶ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦åœ¨ `nums` åŸºç¡€ä¸Šç»Ÿè®¡ï¼Œè€Œå¯ä»¥ç›´æ¥åœ¨å»é‡æ•°ç»„ `list` ä¸Šè¿›è¡Œç»Ÿè®¡ï¼ŒåŒæ—¶å°†å¯¹ã€Œæ•°å€¼ã€çš„ç»Ÿè®¡æ“ä½œè½¬æ¢ä¸ºå¯¹ã€Œä¸‹æ ‡ã€çš„ç»Ÿè®¡æ“ä½œã€‚

ä»£ç ï¼š
```Java []
class Solution {
    static int[] cnt = new int[10010];
    List<Integer> list;
    int find(int x) {
        int n = list.size(), l = 0, r = n - 1;
        while (l < r) {
            int mid = l + r >> 1;
            if (list.get(mid) >= x) r = mid;
            else l = mid + 1;
        }
        return list.get(r) == x ? r : -1;
    }
    public int findPairs(int[] nums, int k) {
        Arrays.sort(nums);
        list = new ArrayList<>();
        for (int i : nums) {
            if (list.isEmpty() || i != list.get(list.size() - 1)) list.add(i);
        }
        Arrays.fill(cnt, 0);
        for (int i : nums) cnt[find(i)]++;
        int ans = 0, idx = 0;
        for (int i : list) {
            if (k == 0) {
                if (cnt[idx] > 1) ans++;
            } else {
                int a = find(i - k), b = find(i + k);
                if (a != -1 && cnt[a] > 0) ans++;
                if (b != -1 && cnt[b] > 0) ans++;
            }
            cnt[idx++] = 0;
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šæ’åºç¦»æ•£åŒ–å¤æ‚åº¦ä¸º $O(n\log{n})$ï¼Œç»Ÿè®¡ç­”æ¡ˆå¤æ‚åº¦ä¸º $O(n\log{n})$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(n\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## ç¦»æ•£åŒ– + åŒæŒ‡é’ˆ

æ›´è¿›ä¸€æ­¥çš„ï¼Œå¯¹äº $x = nums[i]$ è€Œè¨€ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½åœ¨æ•´æ®µçš„ `list` ä¸­äºŒåˆ†æ‰¾ $a = nums[i] - k$ å’Œ $b = nums[i] + k$ çš„ä¸‹æ ‡ï¼Œå¯¼è‡´æˆ‘ä»¬ç»Ÿè®¡ $nums[i]$ å¯¹ç­”æ¡ˆçš„è´¡çŒ®æ—¶å¤æ‚åº¦ä¸º $O(\log{n})$ï¼Œç»Ÿè®¡æ‰€æœ‰ $nums[i]$ å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸º $O(n\log{n})$ã€‚

å®é™…ä¸Šï¼Œåˆ©ç”¨ `list` æœ¬èº«çš„æœ‰åºæ€§ï¼Œæˆ‘ä»¬åœ¨ä»å‰å¾€åå¤„ç†æ¯ä¸ª $nums[idx]$ æ—¶ï¼Œå¯¹åº”çš„ $a$ å’Œ $b$ ä¹Ÿå¿…ç„¶æ˜¯é€æ­¥å¢å¤§ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ã€ŒåŒæŒ‡é’ˆã€æ¥é¿å…ã€ŒäºŒåˆ†ã€æ“ä½œï¼Œä½¿å¾—ç»Ÿè®¡æ‰€æœ‰ $nums[i]$ å¯¹ç­”æ¡ˆè´¡çŒ®çš„å¤æ‚åº¦ä» $O(n\log{n})$ ä¸‹é™åˆ° $O(n)$ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    static int[] cnt = new int[10010];
    public int findPairs(int[] nums, int k) {
        Arrays.sort(nums);
        List<Integer> list = new ArrayList<>();
        for (int i : nums) {
            if (list.isEmpty() || i != list.get(list.size() - 1)) list.add(i);
        }
        Arrays.fill(cnt, 0);
        for (int i = 0, j = 0; i < nums.length; i++) {
            if (nums[i] != list.get(j)) j++;
            cnt[j]++;
        }
        int n = list.size(), idx = 0, ans = 0, l = 0, r = 0;
        for (int i : list) {
            if (k == 0) {
                if (cnt[idx] > 1) ans++;
            } else {
                int a = i - k, b = i + k;
                while (l < n && list.get(l) < a) l++;
                while (r < n && list.get(r) < b) r++;
                if (l < n && list.get(l) == a && cnt[l] > 0) ans++;
                if (r < n && list.get(r) == b && cnt[r] > 0) ans++;
            }
            cnt[idx++] = 0;
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šæ’åºç¦»æ•£åŒ–å¤æ‚åº¦ä¸º $O(n\log{n})$ï¼Œç»Ÿè®¡ç­”æ¡ˆå¤æ‚åº¦ä¸º $O(n)$ï¼Œæ•´ä½“å¤æ‚åº¦ä¸º $O(n\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## è‡´è°¢

**è´´ä¸€ä¸ªæ˜¨å¤©æ‹çš„å…¨å®¶ç¦ ğŸ“· å†æ¬¡æ„Ÿè°¢å¤§å®¶çš„åŒ…å®¹å’Œæ”¯æŒ â¤ï¸**

![WechatIMG2431.jpeg](https://pic.leetcode-cn.com/1655345342-Ugbnxv-WechatIMG2431.jpeg)
![WechatIMG2432.jpeg](https://pic.leetcode-cn.com/1655345342-pCsAyT-WechatIMG2432.jpeg)
