## [1630.ç­‰å·®å­æ•°ç»„ ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/arithmetic-subarrays/solutions/100000/python3javacgotypescript-yi-ti-yi-jie-sh-o8fj)

ä½œè€…ï¼š[lcbin](https://leetcode.cn/u/lcbin)



**æ–¹æ³•ä¸€ï¼šæ•°å­¦ + æ¨¡æ‹Ÿ**

æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªå‡½æ•° $check(nums, l, r)$ï¼Œç”¨äºŽåˆ¤æ–­å­æ•°ç»„ $nums[l], nums[l+1], \dots, nums[r]$ æ˜¯å¦å¯ä»¥é‡æ–°æŽ’åˆ—å½¢æˆç­‰å·®æ•°åˆ—ã€‚

å‡½æ•° $check(nums, l, r)$ çš„å®žçŽ°é€»è¾‘å¦‚ä¸‹ï¼š

- é¦–å…ˆï¼Œæˆ‘ä»¬è®¡ç®—å­æ•°ç»„çš„é•¿åº¦ $n = r - l + 1$ï¼Œå¹¶å°†å­æ•°ç»„ä¸­çš„å…ƒç´ æ”¾å…¥é›†åˆ $s$ ä¸­ï¼Œæ–¹ä¾¿åŽç»­çš„æŸ¥æ‰¾ï¼›
- ç„¶åŽï¼Œæˆ‘ä»¬èŽ·å–å­æ•°ç»„ä¸­çš„æœ€å°å€¼ $a_1$ å’Œæœ€å¤§å€¼ $a_n$ï¼Œå¦‚æžœ $a_n - a_1$ ä¸èƒ½è¢« $n - 1$ æ•´é™¤ï¼Œé‚£ä¹ˆå­æ•°ç»„ä¸å¯èƒ½å½¢æˆç­‰å·®æ•°åˆ—ï¼Œç›´æŽ¥è¿”å›ž $false$ï¼›å¦åˆ™ï¼Œæˆ‘ä»¬è®¡ç®—ç­‰å·®æ•°åˆ—çš„å…¬å·® $d = \frac{a_n - a_1}{n - 1}$ï¼›
- æŽ¥ä¸‹æ¥ä»Ž $a_1$ å¼€å§‹ï¼Œä¾æ¬¡è®¡ç®—ç­‰å·®æ•°åˆ—ä¸­ç¬¬ $i$ é¡¹å…ƒç´ ï¼Œå¦‚æžœç¬¬ $i$ é¡¹å…ƒç´  $a_1 + (i - 1) \times d$ ä¸åœ¨é›†åˆ $s$ ä¸­ï¼Œé‚£ä¹ˆå­æ•°ç»„ä¸å¯èƒ½å½¢æˆç­‰å·®æ•°åˆ—ï¼Œç›´æŽ¥è¿”å›ž $false$ï¼›å¦åˆ™ï¼Œå½“æˆ‘ä»¬éåŽ†å®Œæ‰€æœ‰çš„å…ƒç´ ï¼Œè¯´æ˜Žå­æ•°ç»„å¯ä»¥é‡æ–°æŽ’åˆ—å½¢æˆç­‰å·®æ•°åˆ—ï¼Œè¿”å›ž $true$ã€‚

åœ¨ä¸»å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éåŽ†æ‰€æœ‰çš„æŸ¥è¯¢ï¼Œå¯¹äºŽæ¯ä¸ªæŸ¥è¯¢ $l[i]$ å’Œ $r[i]$ï¼Œæˆ‘ä»¬è°ƒç”¨å‡½æ•° $check(nums, l[i], r[i])$ åˆ¤æ–­å­æ•°ç»„æ˜¯å¦å¯ä»¥é‡æ–°æŽ’åˆ—å½¢æˆç­‰å·®æ•°åˆ—ï¼Œå°†ç»“æžœå­˜å…¥ç­”æ¡ˆæ•°ç»„ä¸­ã€‚



```python [sol1-Python3]
class Solution:
    def checkArithmeticSubarrays(self, nums: List[int], l: List[int], r: List[int]) -> List[bool]:
        def check(nums, l, r):
            n = r - l + 1
            s = set(nums[l: l + n])
            a1, an = min(nums[l: l + n]), max(nums[l: l + n])
            d, mod = divmod(an - a1, n - 1)
            return mod == 0 and all((a1 + (i - 1) * d) in s for i in range(1, n))
        
        return [check(nums, left, right) for left, right in zip(l, r)]
```



```java [sol1-Java]
class Solution {
    public List<Boolean> checkArithmeticSubarrays(int[] nums, int[] l, int[] r) {
        List<Boolean> ans = new ArrayList<>();
        for (int i = 0; i < l.length; ++i) {
            ans.add(check(nums, l[i], r[i]));
        }
        return ans;
    }

    private boolean check(int[] nums, int l, int r) {
        Set<Integer> s = new HashSet<>();
        int n = r - l + 1;
        int a1 = 1 << 30, an = -a1;
        for (int i = l; i <= r; ++i) {
            s.add(nums[i]);
            a1 = Math.min(a1, nums[i]);
            an = Math.max(an, nums[i]);
        }
        if ((an - a1) % (n - 1) != 0) {
            return false;
        }
        int d = (an - a1) / (n - 1);
        for (int i = 1; i < n; ++i) {
            if (!s.contains(a1 + (i - 1) * d)) {
                return false;
            }
        }
        return true;
    }
}
```



```cpp [sol1-C++]
class Solution {
public:
    vector<bool> checkArithmeticSubarrays(vector<int>& nums, vector<int>& l, vector<int>& r) {
        vector<bool> ans;
        auto check = [](vector<int>& nums, int l, int r) {
            unordered_set<int> s;
            int n = r - l + 1;
            int a1 = 1 << 30, an = -a1;
            for (int i = l; i <= r; ++i) {
                s.insert(nums[i]);
                a1 = min(a1, nums[i]);
                an = max(an, nums[i]);
            }
            if ((an - a1) % (n - 1)) {
                return false;
            }
            int d = (an - a1) / (n - 1);
            for (int i = 1; i < n; ++i) {
                if (!s.count(a1 + (i - 1) * d)) {
                    return false;
                }
            }
            return true;
        };
        for (int i = 0; i < l.size(); ++i) {
            ans.push_back(check(nums, l[i], r[i]));
        }
        return ans;
    }
};
```



```go [sol1-Go]
func checkArithmeticSubarrays(nums []int, l []int, r []int) (ans []bool) {
	check := func(nums []int, l, r int) bool {
		s := map[int]struct{}{}
		n := r - l + 1
		a1, an := 1<<30, -(1 << 30)
		for _, x := range nums[l : r+1] {
			s[x] = struct{}{}
			if a1 > x {
				a1 = x
			}
			if an < x {
				an = x
			}
		}
		if (an-a1)%(n-1) != 0 {
			return false
		}
		d := (an - a1) / (n - 1)
		for i := 1; i < n; i++ {
			if _, ok := s[a1+(i-1)*d]; !ok {
				return false
			}
		}
		return true
	}
	for i := range l {
		ans = append(ans, check(nums, l[i], r[i]))
	}
	return
}
```



```ts [sol1-TypeScript]
function checkArithmeticSubarrays(nums: number[], l: number[], r: number[]): boolean[] {
    const check = (nums: number[], l: number, r: number): boolean => {
        const s = new Set<number>();
        const n = r - l + 1;
        let a1 = 1 << 30;
        let an = -a1;
        for (let i = l; i <= r; ++i) {
            s.add(nums[i]);
            a1 = Math.min(a1, nums[i]);
            an = Math.max(an, nums[i]);
        }
        if ((an - a1) % (n - 1) !== 0) {
            return false;
        }
        const d = Math.floor((an - a1) / (n - 1));
        for (let i = 1; i < n; ++i) {
            if (!s.has(a1 + (i - 1) * d)) {
                return false;
            }
        }
        return true;
    };
    const ans: boolean[] = [];
    for (let i = 0; i < l.length; ++i) {
        ans.push(check(nums, l[i], r[i]));
    }
    return ans;
}
```


æ—¶é—´å¤æ‚åº¦ $O(n \times m)$ï¼Œç©ºé—´å¤æ‚åº¦ $O(n)$ã€‚å…¶ä¸­ $n$ å’Œ $m$ åˆ†åˆ«ä¸ºæ•°ç»„ $nums$ çš„é•¿åº¦ä»¥åŠæŸ¥è¯¢çš„ç»„æ•°ã€‚



---

æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿Žè¯„è®ºåŒºäº¤æµï¼Œæ¬¢è¿Žè¯„è®ºåŒºæä¾›å…¶å®ƒè§£é¢˜æ€è·¯ï¼ˆä»£ç ï¼‰ï¼Œä¹Ÿå¯ä»¥ç‚¹ä¸ªèµžæ”¯æŒä¸€ä¸‹ä½œè€…å“ˆðŸ˜„~