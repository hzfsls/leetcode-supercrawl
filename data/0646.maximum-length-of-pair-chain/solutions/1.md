## [646.æœ€é•¿æ•°å¯¹é“¾ ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/maximum-length-of-pair-chain/solutions/100000/by-ac_oier-z91l)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)

## æ’åº + è´ªå¿ƒ DP

èµ·å§‹å…ˆå°† `pairs` æ ¹æ®ç¬¬ä¸€ç»´æ’å‡åºï¼ˆæˆ–ç›´æ¥åŒå…³é”®å­—æ’å‡åºï¼‰ã€‚

è€ƒè™‘å®šä¹‰ $f[i]$ ä¸ºä»¥ $pairs[i]$ ä¸ºç»“å°¾çš„æœ€é•¿æ•°å¯¹é“¾é•¿åº¦ï¼Œæ‰€æœ‰ $f[i]$ ä¸­çš„æœ€å¤§å€¼ä¸ºç­”æ¡ˆã€‚

ä¸å¤±ä¸€èˆ¬æ€§è€ƒè™‘ $f[i]$ è¯¥å¦‚ä½•è½¬ç§»ï¼šä¸éš¾å‘ç° $f[i]$ ä¸ºæ‰€æœ‰æ»¡è¶³ã€Œä¸‹æ ‡èŒƒå›´åœ¨ $[0, i - 1]$ï¼Œä¸” $pairs[j][1] < pairs[i][0]$ã€æ¡ä»¶çš„ $f[j] + 1$ çš„æœ€å¤§å€¼ã€‚

ä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦ä» $j = i - 1$ å¼€å§‹å¾€å›æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ $pairs[j][1] < pairs[i][0]$ çš„ä½ç½® $j$ å³å¯ã€‚

å®¹æ˜“è¯æ˜è¯¥åšæ³•çš„æ­£ç¡®æ€§ï¼š**å‡è®¾è´ªå¿ƒè§£ï¼ˆè¯¥åšæ³•ï¼‰æ‰¾åˆ°çš„ä½ç½® $j$ ä¸æ˜¯æœ€ä¼˜ä½ç½®ï¼Œå³å­˜åœ¨æ¯” $j$ æ›´å°çš„åˆæ³•ä¸‹æ ‡ $j'$ æ»¡è¶³ $f[j'] > f[j]$ã€‚æ ¹æ®æˆ‘ä»¬çš„æ’åºè§„åˆ™å¿…ç„¶æœ‰ $pairs[j'][0] <= pairs[j][0]$ çš„æ€§è´¨ï¼Œåˆ™å¯çŸ¥ $pairs[j]$ å¿…ç„¶å¯ä»¥ä»£æ›¿ $pairs[j']$ æ¥åœ¨åŸæœ¬ä»¥ $pairs[j']$ ä¸ºç»“å°¾çš„æœ€ä¼˜æ•°é“¾ä¸Šï¼ˆæœ€ä¼˜æ•°é“¾é•¿åº¦ä¸å˜ï¼Œç»“æœä¸ä¼šå˜å·®ï¼‰ï¼Œåˆ™è‡³å°‘æœ‰ $f[j'] = f[j]$ã€‚**

ä»£ç ï¼š
```Java []
class Solution {
    public int findLongestChain(int[][] pairs) {
        Arrays.sort(pairs, (a,b)->a[0]-b[0]);
        int n = pairs.length, ans = 1;
        int[] f = new int[n];
        for (int i = 0; i < n; i++) {
            f[i] = 1;
            for (int j = i - 1; j >= 0 && f[i] == 1; j--) {
                if (pairs[j][1] < pairs[i][0]) f[i] = f[j] + 1;
            }
            ans = Math.max(ans, f[i]);
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šæ’åºçš„å¤æ‚åº¦ä¸º $O(n\log{n})$ï¼›ä¸è€ƒè™‘å‰ªææ•ˆæœ `DP` å¤æ‚åº¦ä¸º $O(n^2)$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(n^2)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## æ’åº + è´ªå¿ƒ DPï¼ˆä¼˜åŒ–è½¬ç§»ï¼‰

æ ¹æ®ä¸Šè¿°åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“å¯¹äºä¸€ä¸ªç‰¹å®šçš„ $pairs[i]$ è€Œè¨€ï¼Œå…¶æ‰€æœ‰åˆæ³•ï¼ˆæ»¡è¶³æ¡ä»¶ $pairs[j][1] < pairs[i][0]$ï¼‰çš„å‰é©±çŠ¶æ€ $f[j]$ å¿…ç„¶æ˜¯éå•è°ƒé€’å¢çš„ã€‚

æ ¹æ® `LIS` é—®é¢˜çš„è´ªå¿ƒè§£çš„æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥é¢å¤–ä½¿ç”¨ä¸€ä¸ªæ•°ç»„è®°å½•ä¸‹ç‰¹å®šé•¿åº¦æ•°é“¾çš„æœ€å°ç»“å°¾å€¼ï¼Œä»è€Œå®ç°äºŒåˆ†æ‰¾å‰é©±çŠ¶æ€ã€‚

å…·ä½“çš„ï¼Œåˆ›å»º $g$ æ•°ç»„ï¼Œå…¶ä¸­ $g[len] = x$ ä»£è¡¨æ•°é“¾é•¿åº¦ä¸º $len$ æ—¶ç»“å°¾å…ƒç´ çš„ç¬¬äºŒç»´æœ€å°å€¼ä¸º $x$ã€‚

å¦‚æ­¤ä¸€æ¥ï¼Œå½“æˆ‘ä»¬è¦æ‰¾ $f[i]$ çš„å‰é©±çŠ¶æ€æ—¶ï¼Œç­‰ä»·äºåœ¨ $g$ æ•°ç»„ä¸­æ‰¾æ»¡è¶³ã€Œå°äº $pairs[i][0]$ã€çš„æœ€å¤§ä¸‹æ ‡ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦æ˜¾å¼ç»´æŠ¤ $f$ æ•°ç»„ï¼Œåªéœ€è¦è¾¹è½¬ç§»å˜æ›´æ–°ç­”æ¡ˆå³å¯ã€‚

> **ä¸äº†è§£ `LIS` é—®é¢˜çš„åŒå­¦å¯ä»¥çœ‹å‰ç½® ğŸ§€ : [LCS é—®é¢˜ä¸ LIS é—®é¢˜çš„ç›¸äº’å…³ç³»ï¼Œä»¥åŠ LIS é—®é¢˜çš„æœ€ä¼˜è§£è¯æ˜](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247487814&idx=1&sn=e33023c2d474ff75af83eda1***d01892) ğŸ‰ğŸ‰ğŸ‰**

ä»£ç ï¼š
```Java []
class Solution {
    public int findLongestChain(int[][] pairs) {
        Arrays.sort(pairs, (a,b)->a[0]-b[0]);
        int n = pairs.length, ans = 1;
        int[] g = new int[n + 10];
        Arrays.fill(g, 0x3f3f3f3f);
        for (int i = 0; i < n; i++) {
            int l = 1, r = i + 1;
            while (l < r) {
                int mid = l + r >> 1;
                if (g[mid] >= pairs[i][0]) r = mid;
                else l = mid + 1;
            }
            g[r] = Math.min(g[r], pairs[i][1]);
            ans = Math.max(ans, r);
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šæ’åºçš„å¤æ‚åº¦ä¸º $O(n\log{n})$ï¼›`DP` å¤æ‚åº¦ä¸º $O(n\log{n})$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(n\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~