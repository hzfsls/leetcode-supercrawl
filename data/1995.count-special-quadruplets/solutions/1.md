## [1995.ç»Ÿè®¡ç‰¹æ®Šå››å…ƒç»„ ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/count-special-quadruplets/solutions/100000/gong-shui-san-xie-yi-ti-si-jie-mei-ju-ha-gmhv)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)
## æœ´ç´ è§£æ³•

åˆ©ç”¨æ•°æ®èŒƒå›´åªæœ‰ $50$ï¼Œå¯ç›´æ¥æ ¹æ®é¢˜æ„è¿›è¡Œæ¨¡æ‹Ÿã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int countQuadruplets(int[] nums) {
        int n = nums.length, ans = 0;
        for (int a = 0; a < n; a++) {
            for (int b = a + 1; b < n; b++) {
                for (int c = b + 1; c < n; c++) {
                    for (int d = c + 1; d < n; d++) {
                        if (nums[a] + nums[b] + nums[c] == nums[d]) ans++;
                    }
                }
            }
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n^4)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

## å“ˆå¸Œè¡¨

åˆ©ç”¨ç­‰å¼å…³ç³» $nums[a] + nums[b] + nums[c] = nums[d]$ï¼Œå¯ä»¥è°ƒæ•´æšä¸¾ $c$ çš„é¡ºåºä¸ºã€Œé€†åºã€ï¼Œæ¯æ¬¡ $c$ å¾€å·¦ç§»åŠ¨ä¸€ä¸ªå•ä½ï¼Œ$d$ çš„å¯å–ä¸‹æ ‡èŒƒå›´å¢åŠ ä¸€ä¸ªï¼ˆå³ $c + 1$ ä½ç½®)ï¼Œä½¿ç”¨æ•°ç»„ä»£æ›¿å“ˆå¸Œè¡¨å¯¹ $nums[d]$ çš„ä¸ªæ•°è¿›è¡Œç»Ÿè®¡ï¼Œå¯ä½¿å¤æ‚åº¦ä¸‹é™åˆ° $O(n^3)$ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int countQuadruplets(int[] nums) {
        int n = nums.length, ans = 0;
        int[] cnt = new int[10010];
        for (int c = n - 2; c >= 2; c--) {
            cnt[nums[c + 1]]++;
            for (int a = 0; a < n; a++) {
                for (int b = a + 1; b < c; b++) {
                    ans += cnt[nums[a] + nums[b] + nums[c]];
                }
            }
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n^3)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(C)$

---

## å“ˆå¸Œè¡¨

æ›´è¿›ä¸€æ­¥ï¼Œæ ¹æ®ç­‰å¼å…³ç³»è¿›è¡Œç§»é¡¹å¯å¾—ï¼š$nums[a] + nums[b] = nums[d] - nums[c]$ï¼Œå…¶ä¸­å„ä¸‹æ ‡æ»¡è¶³ $a < b < c < d$ã€‚

æˆ‘ä»¬å¯åœ¨ã€Œé€†åºã€æšä¸¾ $b$ æ—¶ï¼Œå°†æ–°äº§ç”Ÿçš„ $c$ï¼ˆå³ $b + 1$ ä½ç½®ï¼‰æ‰€èƒ½äº§ç”Ÿçš„æ–° $nums[d] - nums[c]$ çš„å€¼å­˜å…¥å“ˆå¸Œè¡¨ï¼ˆå³ ä» $[b + 2, n)$ èŒƒå›´å†…æšä¸¾ $d$ï¼‰ï¼Œæœ€åé€šè¿‡æšä¸¾ $a$ æ¥ç»Ÿè®¡ç­”æ¡ˆã€‚

> ä¸€äº›ç»†èŠ‚ï¼šç”±äº $nums[d] - nums[c]$ å¯èƒ½ä¸ºè´Ÿï¼Œåœ¨ä½¿ç”¨æ•°ç»„ä»£æ›¿å“ˆå¸Œè¡¨æ—¶ï¼Œå¯åˆ©ç”¨ $1 <= nums[i] <= 100$ åšä¸€ä¸ªå€¼åç§»ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int countQuadruplets(int[] nums) {
        int n = nums.length, ans = 0;
        int[] cnt = new int[10010];
        for (int b = n - 3; b >= 1; b--) {
            for (int d = b + 2; d < n; d++) cnt[nums[d] - nums[b + 1] + 200]++;
            for (int a = 0; a < b; a++) ans += cnt[nums[a] + nums[b] + 200];
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(C)$

---

## å¤šç»´èƒŒåŒ…

åˆ©ç”¨ç­‰å¼å…³ç³» $nums[a] + nums[b] + nums[c] = nums[d]$ï¼Œå…·æœ‰æ˜ç¡®çš„ã€Œæ•°å€¼ã€å’Œã€Œä¸ªæ•°ã€å…³ç³»ï¼Œå¯å°†é—®é¢˜æŠ½è±¡ä¸ºç»„åˆä¼˜åŒ–é—®é¢˜æ±‚æ–¹æ¡ˆæ•°ã€‚

é™åˆ¶ç»„åˆä¸ªæ•°çš„ç»´åº¦æœ‰ä¸¤ä¸ªï¼Œå‡ä¸ºã€Œæ°å¥½ã€é™åˆ¶ï¼Œè½¬æ¢ä¸ºã€ŒäºŒç»´è´¹ç”¨èƒŒåŒ…é—®é¢˜æ±‚æ–¹æ¡ˆæ•°ã€é—®é¢˜ã€‚

**å®šä¹‰ $f[i][j][k]$ ä¸ºè€ƒè™‘å‰ $i$ ä¸ªç‰©å“ï¼ˆä¸‹æ ‡ä» $1$ å¼€å§‹ï¼‰ï¼Œå‡‘æˆæ•°å€¼æ°å¥½ $j$ï¼Œä½¿ç”¨ä¸ªæ•°æ°å¥½ä¸º $k$ çš„æ–¹æ¡ˆæ•°ã€‚**

æœ€ç»ˆç­”æ¡ˆä¸º $\sum_{i = 3}^{n - 1}(f[i][nums[i]][3])$ï¼Œèµ·å§‹çŠ¶æ€ $f[0][0][0] = 1$ ä»£è¡¨ä¸è€ƒè™‘ä»»ä½•ç‰©å“æ—¶ï¼Œæ‰€ç”¨ä¸ªæ•°ä¸º $0$ï¼Œå‡‘æˆæ•°å€¼ä¸º $0$ çš„æ–¹æ¡ˆæ•°ä¸º $1$ã€‚

ä¸å¤±ä¸€èˆ¬æ€§è€ƒè™‘ $f[i][j][k]$ è¯¥å¦‚ä½•è½¬ç§»ï¼Œæ ¹æ® $nums[i - 1]$ æ˜¯å¦å‚ä¸ç»„åˆè¿›è¡Œåˆ†æƒ…å†µè®¨è®ºï¼š

* $nums[i - 1]$ ä¸å‚ä¸ç»„æˆï¼Œæ­¤æ—¶æœ‰ï¼š$f[i - 1][j][k]$;
* $nums[i - 1]$ å‚ä¸ç»„æˆï¼Œæ­¤æ—¶æœ‰ï¼š$f[i - 1][j - t][k - 1]$;

æœ€ç»ˆ $f[i][j][k]$ ä¸ºä¸Šè¿°ä¸¤ç§æƒ…å†µä¹‹å’Œï¼Œæœ€ç»ˆç»Ÿè®¡ $\sum_{i = 3}^{n - 1}(f[i][nums[i]][3])$ å³æ˜¯ç­”æ¡ˆã€‚

> åˆ©ç”¨ $f[i][j][k]$ ä»…ä¾èµ–äº $f[i - 1][j][k]$ å’Œ `j` `k` ç»´åº¦å€¼æ›´å°çš„ $f[i - 1][X][X]$ï¼Œå¯è¿›è¡Œç»´åº¦ä¼˜åŒ–ï¼Œå¹¶åœ¨è½¬ç§»è¿‡ç¨‹ä¸­ç»Ÿè®¡ç­”æ¡ˆã€‚

ä»£ç ï¼ˆç»´åº¦ä¼˜åŒ–è§ $P2$ï¼‰ï¼š
```Java []
class Solution {
    public int countQuadruplets(int[] nums) {
        int n = nums.length;
        int[][][] f = new int[n + 1][110][4];
        f[0][0][0] = 1;
        for (int i = 1; i <= n; i++) {
            int t = nums[i - 1];
            for (int j = 0; j < 110; j++) {
                for (int k = 0; k < 4; k++) {
                    f[i][j][k] += f[i - 1][j][k];
                    if (j - t >= 0 && k - 1 >= 0) f[i][j][k] += f[i - 1][j - t][k - 1];
                }
            }
        }
        int ans = 0;
        for (int i = 3; i < n; i++) ans += f[i][nums[i]][3];
        return ans;
    }
}
```
```Java []
class Solution {
    public int countQuadruplets(int[] nums) {
        int n = nums.length, ans = 0;
        int[][] f = new int[110][4];
        f[0][0] = 1;
        for (int i = 1; i <= n; i++) {
            int t = nums[i - 1];
            ans += f[t][3];
            for (int j = 109; j >= 0; j--) {
                for (int k = 3; k >= 0; k--) {
                    if (j - t >= 0 && k - 1 >= 0) f[j][k] += f[j - t][k - 1];
                }
            }
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n * 110 * 4)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n * 110 * 4)$

---

## å…¶ä»–ã€ŒèƒŒåŒ…ã€é—®é¢˜

çœ‹ä¸æ˜ç™½ã€ŒèƒŒåŒ…ã€è§£å†³æ–¹æ¡ˆï¼Ÿ

ä»¥ä¸‹æ˜¯å…¬ä¸»å·è®²è¿‡çš„ã€ŒèƒŒåŒ…ä¸“é¢˜ã€ç³»åˆ—ç›®å½•ï¼Œæ¬¢è¿ [å…³æ³¨](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) ğŸ­ğŸ­ğŸ­ ï¼š

1. 01èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬ä¸€è®²](https%3A//mp.weixin.qq.com/s/xmgK7SrTnFIM3Owpk-emmg)

    1. ã€ç»ƒä¹ ã€‘01èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬äºŒè®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247485658%26idx%3D1%26sn%3Df298abe76d9cc058805b6a18d2523db6)
    
    2. ã€å­¦ä¹ &ç»ƒä¹ ã€‘01èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬ä¸‰è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247485727%26idx%3D1%26sn%3D2cfb1a43bdb4f47cf4457c58f809deb8)
    
    3. ã€åŠ é¤/è¡¥å……ã€‘01 èƒŒåŒ…ï¼š[èƒŒåŒ…é—®é¢˜ ç¬¬äºŒåä¸€è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247488868%26idx%3D1%26sn%3D5e54a1d091a8249d3033a28fc299076d)

2. å®Œå…¨èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬å››è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247486107%26idx%3D1%26sn%3De5fa523008fc5588737b7ed801caf4c3)

    1. ã€ç»ƒä¹ ã€‘å®Œå…¨èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬äº”è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247486225%26idx%3D1%26sn%3Df63388476ccf29e465536a065cffe8d8)
    
    2. ã€ç»ƒä¹ ã€‘å®Œå…¨èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬å…­è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247486435%26idx%3D1%26sn%3D2464b01e9c0fb8d81fcea6dd4ed0ec92)
    
    3. ã€ç»ƒä¹ ã€‘å®Œå…¨èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬ä¸ƒè®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247486586%26idx%3D1%26sn%3Dda57c4d7d39bcbd2e16c2cc4e21b2361)

3. å¤šé‡èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬å…«è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247486649%26idx%3D1%26sn%3Dba09ee2d78377c2ddbb9e43622880133)

4. å¤šé‡èƒŒåŒ…ï¼ˆä¼˜åŒ–ç¯‡ï¼‰

    1.  ã€ä¸Šã€‘å¤šé‡èƒŒåŒ…ï¼ˆä¼˜åŒ–ç¯‡ï¼‰: [èƒŒåŒ…é—®é¢˜ ç¬¬ä¹è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247486796%26idx%3D1%26sn%3Da382b38f8aed295410550bb1767437bd)

    2.  ã€ä¸‹ã€‘å¤šé‡èƒŒåŒ…ï¼ˆä¼˜åŒ–ç¯‡ï¼‰: [èƒŒåŒ…é—®é¢˜ ç¬¬åè®²](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247486963&idx=1&sn=51d34f0f841122ed9be2335a402041e8&chksm=fd9ca6eccaeb2ffa1abe413177be376799b427b092bfb73c13e7b77e171b460f4c24b3b7d3bc&token=1872331648&lang=zh_CN#rd)
    
5. æ··åˆèƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬åä¸€è®²](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247487034&idx=1&sn=eaa05b76387d34aa77f7f14f35fa78a4&chksm=fd9ca525caeb2c33095d285222dcee0dd072465bf7288bda0aab39e90a04bb7b1af018b89fd4&token=1872331648&lang=zh_CN#rd)


6. åˆ†ç»„èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬åäºŒè®²](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247487504&idx=1&sn=9ac523ec0ac14c8634a229f8c3f919d7&chksm=fd9cbb0fcaeb32196b80a40e4408f6a7e2651167e0b9e31aa6d7c6109fbc2117340a59db12a1&token=1936267333&lang=zh_CN#rd)

    1. ã€ç»ƒä¹ ã€‘åˆ†ç»„èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬åä¸‰è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247487587%26idx%3D1%26sn%3Dcc18c2e8c3374612113df7ab7fdc8d46)

7. å¤šç»´èƒŒåŒ… 

    1. ã€ç»ƒä¹ ã€‘å¤šç»´èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬åå››è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247487782%26idx%3D1%26sn%3Df6852cea7a28eb2c522dc424270617b5)
    
    2. ã€ç»ƒä¹ ã€‘å¤šç»´èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬åäº”è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247488103%26idx%3D1%26sn%3D5767d5691b6c87f15ca3182c3742fc79)

8. æ ‘å½¢èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬åå…­è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247488290%26idx%3D1%26sn%3Da9c525e36211710e0ff480e3300e346b)

    1. ã€ç»ƒä¹ ç¯‡ã€‘æ ‘å½¢èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬åä¸ƒè®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247488337%26idx%3D1%26sn%3D016e65bdff75841c9041a14adeb24f64)
    
    2. ã€ç»ƒä¹ ç¯‡ã€‘æ ‘å½¢èƒŒåŒ… : [èƒŒåŒ…é—®é¢˜ ç¬¬åå…«è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247488400%26idx%3D1%26sn%3D7ec15fd8dbb8d85fb9a895a7073157ce)

9. èƒŒåŒ…æ±‚æ–¹æ¡ˆæ•° 

    1. ã€ç»ƒä¹ ã€‘èƒŒåŒ…æ±‚æ–¹æ¡ˆæ•° : [èƒŒåŒ…é—®é¢˜ ç¬¬åä¹è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247488724%26idx%3D1%26sn%3D68b106ec37730b9ce3988195ae45ac7b)
    
    2. ã€ç»ƒä¹ ã€‘èƒŒåŒ…æ±‚æ–¹æ¡ˆæ•° : [èƒŒåŒ…é—®é¢˜ ç¬¬åäº”è®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247488103%26idx%3D1%26sn%3D5767d5691b6c87f15ca3182c3742fc79)

    [æ³¨ï¼šå› ä¸ºä¹‹å‰å®åœ¨æ‰¾ä¸åˆ°é¢˜ï¼Œè¿™é“ã€Œæ±‚æ–¹æ¡ˆæ•°ã€é¢˜ä½œä¸ºâ€œç‰¹æ®Šâ€çš„ã€Œå¤šç»´è´¹ç”¨èƒŒåŒ…é—®é¢˜æ±‚æ–¹æ¡ˆæ•°ã€è®²è¿‡]


10. èƒŒåŒ…æ±‚å…·ä½“æ–¹æ¡ˆ

    1. ã€ç»ƒä¹ ã€‘èƒŒåŒ…æ±‚å…·ä½“æ–¹æ¡ˆ : [èƒŒåŒ…é—®é¢˜ ç¬¬äºŒåè®²](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247488752%26idx%3D1%26sn%3De7af274d7293558718748d54f7ddade1)

11. æ³›åŒ–èƒŒåŒ…

    1. ã€ç»ƒä¹ ã€‘æ³›åŒ–èƒŒåŒ…

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png)ï¼ˆå…¬ä¸»å·åå°å›å¤ã€Œé€ä¹¦ã€å³å¯å‚ä¸é•¿æœŸçœ‹é¢˜è§£å­¦ç®—æ³•é€å®ä½“ä¹¦æ´»åŠ¨ï¼‰æˆ– åŠ å…¥[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~ 