## [678.æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸² ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/valid-parenthesis-string/solutions/100000/gong-shui-san-xie-yi-ti-shuang-jie-dong-801rq)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)
## åŠ¨æ€è§„åˆ’

**å®šä¹‰ $f[i][j]$ ä¸ºè€ƒè™‘å‰ $i$ ä¸ªå­—ç¬¦ï¼ˆå­—ç¬¦ä¸‹æ ‡ä» $1$ å¼€å§‹ï¼‰ï¼Œèƒ½å¦ä¸ $j$ ä¸ªå³æ‹¬å·å½¢æˆåˆæ³•æ‹¬å·åºåˆ—ã€‚**

èµ·å§‹æ—¶åªæœ‰ $f[0][0]$ ä¸º $true$ï¼Œæœ€ç»ˆç­”æ¡ˆä¸º $f[n][0]$ã€‚

ä¸å¤±ä¸€èˆ¬æ€§çš„è€ƒè™‘ $f[i][j]$ è¯¥å¦‚ä½•è½¬ç§»ï¼š

* å½“å‰å­—ç¬¦ä¸º `(` : å¦‚æœ $f[i][j]$ ä¸º $true$ï¼Œå¿…ç„¶æœ‰ $f[i - 1][j - 1]$ ä¸º $true$ï¼Œåä¹‹äº¦ç„¶ã€‚å³æœ‰ $f[i][j] = f[i - 1][j - 1]$ï¼›
* å½“å‰å­—ç¬¦ä¸º `)` : å¦‚æœ $f[i][j]$ ä¸º $true$ï¼Œå¿…ç„¶æœ‰ $f[i - 1][j + 1]$ ä¸º $true$ï¼Œåä¹‹äº¦ç„¶ã€‚å³æœ‰ $f[i][j] = f[i - 1][j + 1]$ï¼›
* å½“å‰å­—ç¬¦ä¸º `*` : æ ¹æ® `*` ä»£æŒ‡çš„ç¬¦å·ä¸åŒï¼Œåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼Œåªæœ‰æœ‰ä¸€ç§æƒ…å†µä¸º $true$ å³å¯ã€‚å³æœ‰ $f[i][j] = f[i - 1][j - 1] âˆ¨ f[i - 1][j + 1] âˆ¨ f[i - 1][j]$ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public boolean checkValidString(String s) {
        int n = s.length();
        boolean[][] f = new boolean[n + 1][n + 1];
        f[0][0] = true;
        for (int i = 1; i <= n; i++) {
            char c = s.charAt(i - 1);
            for (int j = 0; j <= i; j++) {
                if (c == '(') {
                    if (j - 1 >= 0) f[i][j] = f[i - 1][j - 1];
                } else if (c == ')') {
                    if (j + 1 <= i) f[i][j] = f[i - 1][j + 1];
                } else {
                    f[i][j] = f[i - 1][j];
                    if (j - 1 >= 0) f[i][j] |= f[i - 1][j - 1];
                    if (j + 1 <= i) f[i][j] |= f[i - 1][j + 1];
                }
            }
        }
        return f[n][0];
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(n^2)$

---

## æ¨¡æ‹Ÿ

é€šè¿‡è§£æ³•ä¸€ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥å‘ç°ï¼Œå¯¹äºæŸä¸ª $f[i][x]$ è€Œè¨€ï¼ˆå³åŠ¨è§„æ•°ç»„ä¸­çš„æŸä¸€è¡Œï¼‰ï¼Œå€¼ä¸º $true$ çš„å¿…ç„¶ä¸ºè¿ç»­ä¸€æ®µã€‚

å³ **ç”±äºå­˜åœ¨å¯å˜åŒ–çš„ `*` ç¬¦å·ï¼Œå› æ­¤è€ƒè™‘åœ¨è€ƒè™‘å‰ $i$ ä¸ªå­—ç¬¦ï¼Œå…¶èƒ½ä¸æ¶ˆè€—çš„å·¦æ‹¬å·çš„æ•°é‡å…·æœ‰æ˜ç¡®çš„ã€Œä¸Šç•Œä¸ä¸‹ç•Œã€ã€‚ä¸”å½“å‰ä¸Šç•Œä¸ä¸‹ç•Œçš„å˜åŒ–ï¼Œä»…å–å†³äºã€Œå½“å‰ä¸ºä½•ç§å­—ç¬¦ã€ï¼Œä»¥åŠã€Œå¤„ç†ä¸Šä¸€ä¸ªå­—ç¬¦æ—¶ä¸Šç•Œä¸ä¸‹ç•Œä¸ºå¤šå°‘ã€ã€‚**

ä½†ç›´æ¥è®°å½•æ‰€èƒ½æ¶ˆè€—çš„å·¦æ‹¬å·ä¸Šé™å’Œä¸‹é™éœ€è¦å¤„ç†è¾ƒå¤šçš„è¾¹ç•Œé—®é¢˜ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸[ï¼ˆé¢˜è§£ï¼‰301. åˆ é™¤æ— æ•ˆçš„æ‹¬å·](https://leetcode-cn.com/problems/remove-invalid-parentheses/solution/yi-fen-zhong-nei-kan-dong-jiang-gua-hao-aya6k/) ç±»ä¼¼çš„æ€è·¯ï¼š

ä»¤å·¦æ‹¬å·çš„å¾—åˆ†ä¸º $1$ï¼›å³æ‹¬å·çš„å¾—åˆ†ä¸º $-1$ã€‚é‚£ä¹ˆå¯¹äºåˆæ³•çš„æ–¹æ¡ˆè€Œè¨€ï¼Œå¿…å®šæ»¡è¶³æœ€ç»ˆå¾—åˆ†ä¸º $0$ã€‚

åŒæ—¶ç”±äºæœ¬é¢˜å­˜åœ¨ `*`ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è®°å½•å¾—åˆ†çš„åŒºé—´åŒºé—´æ˜¯å¤šå°‘ï¼Œè€Œä¸ä»…æ˜¯ä¸€ä¸ªå…·ä½“çš„å¾—åˆ†ã€‚

å…·ä½“çš„ï¼Œä½¿ç”¨ä¸¤ä¸ªå˜é‡ `l` å’Œ `r` åˆ†åˆ«è¡¨ç¤ºã€Œæœ€ä½å¾—åˆ†ã€å’Œã€Œæœ€é«˜å¾—åˆ†ã€ã€‚

æ ¹æ®å½“å‰å¤„ç†åˆ°çš„å­—ç¬¦è¿›è¡Œåˆ†æƒ…å†µè®¨è®ºï¼š

* å½“å‰å­—ç¬¦ä¸º `(` : `l` å’Œ `r` åŒæ—¶åŠ ä¸€ï¼›
* å½“å‰å­—ç¬¦ä¸º `)` : `l` å’Œ `r` åŒæ—¶å‡ä¸€ï¼›
* å½“å‰å­—ç¬¦ä¸º `*` : å¦‚æœ `*` ä»£æŒ‡æˆ `(` çš„è¯ï¼Œ`l` å’Œ `r` éƒ½è¿›è¡ŒåŠ ä¸€ï¼›å¦‚æœ `*` ä»£æŒ‡æˆ `)` çš„è¯ï¼Œ`l` å’Œ `r` éƒ½è¿›è¡Œå‡ä¸€ï¼›å¦‚æœ `*` ä¸å˜çš„è¯ï¼Œ`l` å’Œ `r` å‡ä¸å‘ç”Ÿå˜åŒ–ã€‚å› æ­¤æ€»çš„ `l` çš„å˜åŒ–ä¸ºå‡ä¸€ï¼Œæ€»çš„ `r` çš„å˜åŒ–ä¸ºåŠ ä¸€ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨åŒ¹é…è¿‡ç¨‹ä¸­å¦‚æœ `l` ä¸ºè´Ÿæ•°ï¼Œéœ€è¦é‡ç½®ä¸º $0$ï¼Œå› ä¸ºå¦‚æœå½“å‰åºåˆ—æœ¬èº«ä¸ºä¸åˆæ³•æ‹¬å·åºåˆ—çš„è¯ï¼Œå¢åŠ  `(` å¿…ç„¶è¿˜æ˜¯ä¸åˆæ³•ã€‚åŒæ—¶ï¼Œå½“å‡ºç° `l > r` è¯´æ˜ä¸Šç•Œä¸ºè´Ÿæ•°ï¼Œå³å³æ‹¬å·è¿‡å¤šï¼Œå¿…ç„¶ä¸ºéåˆæ³•æ–¹æ¡ˆï¼Œè¿”å› $false$ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public boolean checkValidString(String s) {
        int l = 0, r = 0;
        for (char c : s.toCharArray()) {
            if (c == '(') {
                l++; r++;
            } else if (c == ')') {
                l--; r--;
            } else {
                l--; r++;
            }
            l = Math.max(l, 0);
            if (l > r) return false;
        }
        return l == 0;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$

---

## å…¶ä»–ã€Œæ‹¬å·é—®é¢˜ã€å†…å®¹

ä»Šå¤©ä»½é€ä¹¦è¥ä¸šä¸­ï¼Œæˆ³ [è¿™é‡Œ](https://mp.weixin.qq.com/s?__biz=MzU4NDE3MTEyMA==&mid=2247488463&idx=1&sn=8475ab4cacb2ac8a361d43a32401b129&chksm=fd9cb8d0caeb31c695c9d107a1f11003bf91eb46cb3c611d06e0702e4eb6b3d6475f8883f5db&token=897976565&lang=zh_CN#rd) è¿›è¡Œäº†è§£ ~ 


| é¢˜ç›®                                                         | é¢˜è§£                                                         | éš¾åº¦ | æ¨èæŒ‡æ•° |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---- | -------- |
| [20. æœ‰æ•ˆçš„æ‹¬å·](https://leetcode-cn.com/problems/valid-parentheses/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/valid-parentheses/solution/shua-chuan-lc-zhan-ascii-chai-zhi-jie-fa-00zo/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |
| [22. æ‹¬å·ç”Ÿæˆ](https://leetcode-cn.com/problems/generate-parentheses/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/generate-parentheses/solution/shua-chuan-lc-dfs-jie-fa-by-ac_oier-nknl/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [32. æœ€é•¿æœ‰æ•ˆæ‹¬å·](https://leetcode-cn.com/problems/longest-valid-parentheses/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/longest-valid-parentheses/solution/shua-chuan-lc-miao-dong-xi-lie-shi-yong-95ezk/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [301. åˆ é™¤æ— æ•ˆçš„æ‹¬å·](https://leetcode-cn.com/problems/remove-invalid-parentheses/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/remove-invalid-parentheses/solution/yi-fen-zhong-nei-kan-dong-jiang-gua-hao-aya6k/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [678. æœ‰æ•ˆçš„æ‹¬å·å­—ç¬¦ä¸²](https://leetcode-cn.com/problems/valid-parenthesis-string/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/valid-parenthesis-string/solution/gong-shui-san-xie-yi-ti-shuang-jie-dong-801rq/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©    |


**æ³¨ï¼šä»¥ä¸Šç›®å½•æ•´ç†æ¥è‡ª [wiki](https://github.com/SharingSource/LogicStack-LeetCode/wiki/æ‹¬å·é—®é¢˜)ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½å¼•ç”¨è¯·ä¿ç•™å‡ºå¤„ã€‚**



---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png)ï¼ˆå…¬ä¸»å·åå°å›å¤ã€Œé€ä¹¦ã€å³å¯å‚ä¸é•¿æœŸçœ‹é¢˜è§£å­¦ç®—æ³•é€å®ä½“ä¹¦æ´»åŠ¨ï¼‰æˆ– åŠ å…¥[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~ 