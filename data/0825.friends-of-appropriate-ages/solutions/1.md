## [825.é€‚é¾„çš„æœ‹å‹ ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/friends-of-appropriate-ages/solutions/100000/gong-shui-san-xie-yi-ti-shuang-jie-pai-x-maa8)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)
## æ’åº + åŒæŒ‡é’ˆ 

ä»ä¸‰ä¸ªä¸å‘é€å¥½å‹è¯·æ±‚çš„æ¡ä»¶æ¥çœ‹ï¼Œä»¥ $y$ çš„è§’åº¦æ¥è¯´ï¼Œå¯æ€»ç»“ä¸ºï¼š**å¹´é¾„æ¯”æˆ‘å°çš„ä¸è€ƒè™‘ï¼ˆåŒé¾„çš„å¯ä»¥ï¼‰ï¼Œå¹´é¾„æ¯”æˆ‘å¤§å¯ä»¥è€ƒè™‘ï¼Œä½†æ˜¯ä¸èƒ½è¶…è¿‡ä¸€å®šèŒƒå›´åˆ™ä¸è€ƒè™‘ã€‚**

å³å¯¹äºä¸€ä¸ªç¡®å®šçš„ $y$ è€Œè¨€ï¼Œä¼šå‘é€å¥½å‹è¯·æ±‚çš„ $x$ èŒƒå›´ä¸ºè¿ç»­æ®µï¼š

![image.png](https://pic.leetcode-cn.com/1640558862-McjmOR-image.png)

**éšç€ $y$ çš„é€æ¸å¢å¤§ï¼Œå¯¹åº”çš„ $x$ è¿ç»­æ®µçš„å·¦å³è¾¹ç•Œå‡é€æ¸å¢å¤§ï¼ˆæ•°è½´ä¸Šå‡å¾€å³ç§»åŠ¨ï¼‰ã€‚**

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå¯¹ $ages$ è¿›è¡Œæ’åºï¼Œæšä¸¾æ¯ä¸ª $y = ages[k]$ï¼ŒåŒæ—¶ä½¿ç”¨ $i$ å’Œ $j$ ç»´æŠ¤å·¦å³åŒºé—´ï¼Œ$[i, j)$ ä»£è¡¨åœ¨ $ages$ ä¸Šä¼šå¾€ $y = ages[k]$ å‘é€è¯·æ±‚çš„ $x$ è¿ç»­æ®µï¼Œç»Ÿè®¡æ¯ä¸ª $y = ages[k]$ çš„ $x$ æœ‰å¤šå°‘ä¸ªå³æ˜¯ç­”æ¡ˆï¼ŒåŒæ—¶éœ€è¦æ³¨æ„åœ¨ $[i, j)$ èŒƒå›´å†…æ˜¯åŒ…å« $y = ages[k]$ è‡ªèº«ï¼Œç»Ÿè®¡åŒºé—´é•¿åº¦æ—¶éœ€è¦è¿›è¡Œ $-1$ æ“ä½œã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public int numFriendRequests(int[] ages) {
        Arrays.sort(ages);
        int n = ages.length, ans = 0;
        for (int k = 0, i = 0, j = 0; k < n; k++) {
            while (i < k && !check(ages[i], ages[k])) i++;
            if (j < k) j = k;
            while (j < n && check(ages[j], ages[k])) j++;
            if (j > i) ans += j - i - 1;
        }
        return ans;
    }
    boolean check(int x, int y) {
        if (y <= 0.5 * x + 7) return false;
        if (y > x) return false;
        if (y > 100 && x < 100) return false; 
        return true;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼š$O(n\log{n})$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(\log{n})$

---

## æ¡¶æ’åº + å‰ç¼€å’Œ 

åœ¨è§£æ³•ä¸€ä¸­ï¼Œå¤æ‚åº¦çš„ä¸Šç•Œåœ¨äºã€ŒåŒè½´å¿«æ’ã€ï¼Œåˆ©ç”¨æœ¬é¢˜æ•°æ®èŒƒå›´ `1 <= ages[i] <= 120`ï¼Œå€¼åŸŸè¾ƒå°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ã€Œæ¡¶æ’åºã€çš„æ–¹å¼è¿›è¡Œæ’åºä¼˜åŒ–ã€‚

å‡è®¾å¯¹ $ages$ è¿›è¡Œæ¡¶æ’åå¾—åˆ°çš„æ•°ç»„ä¸º $nums$ï¼Œå…¶ä¸­ $cnt = nums[i]$ çš„å«ä¹‰ä¸ºåœ¨ $ages$ ä¸­å¹´é¾„ä¸º $i$ çš„äººæœ‰ $cnt$ ä¸ªã€‚

åŒæ—¶ï¼Œæˆ‘ä»¬å‘ç°åœ¨è§£æ³•ä¸€ä¸­ï¼Œæˆ‘ä»¬æšä¸¾ $y = ages[k]$ï¼Œå¹¶ä½¿ç”¨ $i$ å’Œ $j$ ä¸¤ä¸ªæŒ‡é’ˆå¯»æ‰¾è¿ç»­çš„ $x$ æ®µçš„è¿‡ç¨‹ï¼Œ$x$ ä¼šå§‹ç»ˆåœç•™äºå€¼ä¸ $y = ages[k]$ ç›¸ç­‰çš„æœ€å°ä¸‹æ ‡å¤„ï¼Œè€Œå¯¹äºæ¡¶æ’æ•°ç»„è€Œè¨€ï¼Œå½“å‰ä½ç½®å°±æ˜¯æœ€å°åˆæ³• $x$ å€¼ï¼ˆä¸ $y$ ç›¸ç­‰ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°æœ€å¤§åˆæ³• $x$ å€¼çš„ä½ç½®å³å¯ï¼ˆå¯¹åº”è§£æ³•ä¸€çš„ $j$ ä½ç½®ï¼‰ã€‚

åŒæ ·ï¼Œæœ€å¤§ $x$ çš„ä½ç½®åœ¨æ¡¶æ’æ•°ç»„ä¸­ä¹Ÿæ˜¯éšç€ $y$ çš„å¢å¤§ï¼ˆå³ç§»ï¼‰é€æ¸å¢å¤§ï¼ˆå³ç§»ï¼‰ã€‚

å‰©ä¸‹çš„é—®é¢˜åœ¨äºï¼Œå¦‚ä½•ç»Ÿè®¡æ¡¶æ’æ•°ç»„ä¸­è¿ç»­æ®µä¸‹æ ‡çš„å’Œä¸ºå¤šå°‘ï¼ˆæœ‰å¤šå°‘ä¸ªåˆæ³• $x$ å€¼ï¼‰ï¼Œè¿™å¯ä»¥ç›´æ¥åœ¨æ¡¶æ’æ•°ç»„åº”ç”¨å‰ç¼€å’Œå³å¯ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    int N = 130;
    public int numFriendRequests(int[] ages) {
        int[] nums = new int[N];
        for (int i : ages) nums[i]++;
        for (int i = 1; i < N; i++) nums[i] += nums[i - 1];
        int ans = 0;
        for (int y = 1, x = 1; y < N; y++) {
            int a = nums[y] - nums[y - 1]; // æœ‰ a ä¸ª y
            if (a == 0) continue;
            if (x < y) x = y;
            while (x < N && check(x, y)) x++;
            int b = nums[x - 1] - nums[y - 1] - 1; // [y, x) ä¸ºåˆæ³•çš„ x èŒƒå›´ï¼Œå¯¹äºæ¯ä¸ª y è€Œè¨€ï¼Œæœ‰ b ä¸ª x
            if (b > 0) ans += b * a;
        }
        return ans;
    }
    boolean check(int x, int y) {
        if (y <= 0.5 * x + 7) return false;
        if (y > x) return false;
        if (y > 100 && x < 100) return false; 
        return true;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šä»¤ $C$ ä¸ºå¹´é¾„å€¼åŸŸå¤§å°ï¼Œå¯¹äºæœ¬é¢˜ $C$ å›ºå®šä¸º $130$ã€‚å¤æ‚åº¦ä¸º $O(\max(n, C))$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(C)$

---

## åŒç±»å‹åŠ é¤

**ä»Šæ—¥ä»½åŠ é¤ï¼š[ã€é¢è¯•é«˜é¢‘é¢˜ã€‘éš¾åº¦ 1.5/5ï¼Œä¸€é“ã€Œæ¡¶æ’åº + å‰ç¼€å’Œã€ä¼˜åŒ–é¢˜](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247490510%26idx%3D1%26sn%3D1caa56e8871fb4236264b40048b06fb6) ğŸ‰ ğŸ‰**

æˆ–æ˜¯åŠ ç»ƒå¦‚ä¸‹ã€Œå‰ç¼€å’Œã€é¢˜ç›® ğŸ­ğŸ­ 

| é¢˜ç›®                                                         | é¢˜è§£                                                         | éš¾åº¦ | æ¨èæŒ‡æ•° |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ---- | -------- |
| [689. ä¸‰ä¸ªæ— é‡å å­æ•°ç»„çš„æœ€å¤§å’Œ](https://leetcode-cn.com/problems/maximum-sum-of-3-non-overlapping-subarrays/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/maximum-sum-of-3-non-overlapping-subarrays/solution/gong-shui-san-xie-jie-he-qian-zhui-he-de-ancx/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1074. å…ƒç´ å’Œä¸ºç›®æ ‡å€¼çš„å­çŸ©é˜µæ•°é‡](https://leetcode-cn.com/problems/number-of-submatrices-that-sum-to-target/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/number-of-submatrices-that-sum-to-target/solution/gong-shui-san-xie-you-hua-mei-ju-de-ji-b-uttw/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1310. å­æ•°ç»„å¼‚æˆ–æŸ¥è¯¢](https://leetcode-cn.com/problems/xor-queries-of-a-subarray/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/xor-queries-of-a-subarray/solution/gong-shui-san-xie-yi-ti-shuang-jie-shu-z-rcgu/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |
| [1442. å½¢æˆä¸¤ä¸ªå¼‚æˆ–ç›¸ç­‰æ•°ç»„çš„ä¸‰å…ƒç»„æ•°ç›®](https://leetcode-cn.com/problems/count-triplets-that-can-form-two-arrays-of-equal-xor/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/count-triplets-that-can-form-two-arrays-of-equal-xor/solution/gong-shui-san-xie-xiang-jie-shi-yong-qia-7gzm/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1738. æ‰¾å‡ºç¬¬ K å¤§çš„å¼‚æˆ–åæ ‡å€¼](https://leetcode-cn.com/problems/find-kth-largest-xor-coordinate-value/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/find-kth-largest-xor-coordinate-value/solution/gong-shui-san-xie-xiang-jie-li-yong-er-w-ai0d/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1749. ä»»æ„å­æ•°ç»„å’Œçš„ç»å¯¹å€¼çš„æœ€å¤§å€¼](https://leetcode-cn.com/problems/maximum-absolute-sum-of-any-subarray/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/maximum-absolute-sum-of-any-subarray/solution/xiang-jie-qian-zhui-he-jie-fa-fen-xi-si-yibby/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1894. æ‰¾åˆ°éœ€è¦è¡¥å……ç²‰ç¬”çš„å­¦ç”Ÿç¼–å·](https://leetcode-cn.com/problems/find-the-student-that-will-replace-the-chalk/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/find-the-student-that-will-replace-the-chalk/solution/gong-shui-san-xie-yi-ti-shuang-jie-qian-kpqsk/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©     |

**æ³¨ï¼šä»¥ä¸Šç›®å½•æ•´ç†æ¥è‡ª [wiki](https://github.com/SharingSource/LogicStack-LeetCode/wiki/å‰ç¼€å’Œ)ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½å¼•ç”¨è¯·ä¿ç•™å‡ºå¤„ã€‚**

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~ 