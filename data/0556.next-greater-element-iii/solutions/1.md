## [556.ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  III ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/next-greater-element-iii/solutions/100000/by-lfool-vi69)

ä½œè€…ï¼š[lfool](https://leetcode.cn/u/lfool)
# [å¦‚æœæƒ³è¦æŸ¥çœ‹ä½œè€…æ›´å¤šæ–‡ç« ï¼Œå¯ä»¥ç‚¹å‡»æ­¤å¤„ï¼ï¼ï¼ğŸ”¥ğŸ”¥ğŸ”¥](https://lfool.github.io/LFool-Notes/)

# [ä¸ºäº†æœ¬ç¯‡æ–‡ç« æ›´å¥½çš„è§‚æ„Ÿï¼Œå¯ä»¥ç‚¹å‡»æ­¤å¤„ï¼ï¼ï¼](https://lfool.github.io/LFool-Notes/algorithm/ä¸ä¸€æ ·çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ .html)

[31. ä¸‹ä¸€ä¸ªæ’åˆ—](https://leetcode.cn/problems/next-permutation/)

[556. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  III](https://leetcode.cn/problems/next-greater-element-iii/)

---

æœ‰ä¸€ç±»é¢˜ç›®æ˜¯è®©æˆ‘ä»¬æ±‚å…ƒç´ å·¦è¾¹æˆ–è€…å³è¾¹ä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ ï¼Œè¿™ç±»é¢˜ç›®éœ€è¦ç”¨åˆ°å•è°ƒæ ˆï¼Œ**è¯¦æƒ…å¯è§ [å•è°ƒæ ˆ](https://lfool.github.io/LFool-Notes/algorithm/å•è°ƒæ ˆ.html)**

è€Œä»Šå¤©çš„ã€Œä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ã€é¢˜ç›®æ˜¯è®©æˆ‘ä»¬é‡æ–°æ’åˆ—æ•°å­—ï¼Œæ‰¾åˆ°å¤§äº `n` çš„æœ€å°æ•´æ•°ï¼Œå’Œã€Œä¸‹ä¸€ä¸ªæ’åˆ—ã€å¾ˆåƒï¼Œ**é¢˜ç›®è¯¦æƒ…å¯è§ [ä¸‹ä¸€ä¸ªæ’åˆ—](https://leetcode.cn/problems/next-permutation/)**

## ä¸‹ä¸€ä¸ªæ’åˆ—

**é¢˜ç›®è¯¦æƒ…å¯è§ [ä¸‹ä¸€ä¸ªæ’åˆ—](https://leetcode.cn/problems/next-permutation/)**

ç»™å®šè‹¥å¹²ä¸ªæ•°å­—ï¼Œå°†å…¶ç»„åˆä¸ºä¸€ä¸ªæ•´æ•°ã€‚å¦‚ä½•å°†è¿™äº›æ•°å­—é‡æ–°æ’åˆ—ï¼Œä»¥å¾—åˆ°ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•´æ•°ã€‚å¦‚ `123` ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°ä¸º `132`ã€‚å¦‚æœæ²¡æœ‰æ›´å¤§çš„æ•´æ•°ï¼Œåˆ™è¾“å‡ºæœ€å°çš„æ•´æ•°

ä»¥ `1,2,3` ä¸ºä¾‹ï¼Œå…¶æ’åˆ—ä¾æ¬¡ä¸ºï¼š123 -> 132 -> 213 -> 231 -> 312 -> 321ï¼Œè¯¥æ¬¡åºä¹Ÿç¬¦åˆä»å°åˆ°å¤§çš„å…³ç³»

### ç®—æ³•æ¨å¯¼

å¦‚ä½•å¾—åˆ°è¿™æ ·çš„æ’åˆ—é¡ºåºï¼Ÿè¿™æ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥åˆ†æï¼š

- æˆ‘ä»¬å¸Œæœ›ä¸‹ä¸€ä¸ªæ•°**æ¯”å½“å‰æ•°å¤§**ï¼Œè¿™æ ·æ‰æ»¡è¶³ã€Œä¸‹ä¸€ä¸ªæ’åˆ—ã€çš„å®šä¹‰ã€‚å› æ­¤åªéœ€è¦**å°†åé¢çš„ã€Œå¤§æ•°ã€ä¸å‰é¢çš„ã€Œå°æ•°ã€äº¤æ¢**ï¼Œå°±èƒ½å¾—åˆ°ä¸€ä¸ªæ›´å¤§çš„æ•°ã€‚æ¯”å¦‚ `123`ï¼Œå°† `2` å’Œ `3` äº¤æ¢å°±èƒ½å¾—åˆ°ä¸€ä¸ªæ›´å¤§çš„ `132`
- æˆ‘ä»¬è¿˜å¸Œæœ›ä¸‹ä¸€ä¸ªæ•°**å¢åŠ çš„å¹…åº¦å°½å¯èƒ½çš„å°**ï¼Œè¿™æ ·æ‰æ»¡è¶³ã€Œä¸‹ä¸€ä¸ªæ’åˆ—ä¸å½“å‰æ’åˆ—ç´§é‚»ã€çš„è¦æ±‚ã€‚ä¸ºäº†æ»¡è¶³è¿™ä¸ªè¦æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ï¼š
    - åœ¨**å°½å¯èƒ½é å³çš„ä½ä½**è¿›è¡Œäº¤æ¢ï¼Œéœ€è¦**ä»åå‘å‰**æŸ¥æ‰¾
    - å°†ä¸€ä¸ª**å°½å¯èƒ½å°çš„ã€Œå¤§æ•°**ã€ä¸å‰é¢çš„ã€Œå°æ•°ã€äº¤æ¢ã€‚æ¯”å¦‚ `123465` ï¼Œä¸‹ä¸€ä¸ªæ’åˆ—åº”è¯¥æŠŠ `5` å’Œ `4` äº¤æ¢è€Œä¸æ˜¯æŠŠ `6` å’Œ `4` äº¤æ¢
    - å°†ã€Œå¤§æ•°ã€æ¢åˆ°å‰é¢åï¼Œéœ€è¦å°†ã€Œå¤§æ•°ã€åé¢çš„æ‰€æœ‰æ•°é‡ç½®ä¸ºå‡åºï¼Œå‡åºæ’åˆ—å°±æ˜¯æœ€å°çš„æ’åˆ—ã€‚ä»¥ `123465` ä¸ºä¾‹ï¼šé¦–å…ˆæŒ‰ç…§ä¸Šä¸€æ­¥ï¼Œäº¤æ¢ `5` å’Œ `4`ï¼Œå¾—åˆ° `123564`ï¼›ç„¶åéœ€è¦å°† `5` ä¹‹åçš„æ•°é‡ç½®ä¸ºå‡åºï¼Œå¾—åˆ° `123546`ã€‚æ˜¾ç„¶ `123546` æ¯” `123564` æ›´å°ï¼Œ`123546` å°±æ˜¯ `123465` çš„ä¸‹ä¸€ä¸ªæ’åˆ—

ä»¥ä¸Šå°±æ˜¯æ±‚ã€Œä¸‹ä¸€ä¸ªæ’åˆ—ã€çš„åˆ†æè¿‡ç¨‹

(æ„Ÿè°¢è¯¥é¢˜è§£ [ä¸‹ä¸€ä¸ªæ’åˆ—ç®—æ³•è¯¦è§£ï¼šæ€è·¯+æ¨å¯¼+æ­¥éª¤ï¼Œçœ‹ä¸æ‡‚ç®—æˆ‘è¾“ï¼](https://leetcode.cn/problems/next-permutation/solution/xia-yi-ge-pai-lie-suan-fa-xiang-jie-si-lu-tui-dao-/))

### å¯è§†åŒ–

ä»¥æ±‚ `12385764` çš„ä¸‹ä¸€ä¸ªæ’åˆ—ä¸ºä¾‹ï¼š

![1.svg](https://pic.leetcode-cn.com/1656838528-BsyyIp-1.svg)


é¦–å…ˆä»åå‘å‰æŸ¥æ‰¾ç¬¬ä¸€ä¸ªç›¸é‚»å‡åºçš„å…ƒç´ å¯¹ `(i, j)`ã€‚è¿™é‡Œ `i = 4`ï¼Œ`j = 5`ï¼Œå¯¹åº”çš„å€¼ä¸º `5`ï¼Œ`7`ï¼š

![2.svg](https://pic.leetcode-cn.com/1656838535-jZdLrI-2.svg)


ç„¶åæˆ‘ä»¬ä» `j = 5; val = 7` å¼€å§‹æ’åºï¼Œå¦‚ç»¿è‰²éƒ¨åˆ†æ‰€ç¤ºï¼š

![3.svg](https://pic.leetcode-cn.com/1656838542-CINhdo-3.svg)


åœ¨ç»¿è‰²éƒ¨åˆ†ä¸­ä»å°åˆ°å¤§å¼€å§‹æ‰¾ç¬¬ä¸€ä¸ªæ¯” `i = 4; val = 5` å¤§çš„å…ƒç´ ï¼Œå¹¶äº¤æ¢ï¼Œå³å€¼ `5` å’Œ `6` äº¤æ¢ï¼š

![4.svg](https://pic.leetcode-cn.com/1656838549-oALSly-4.svg)


å› æ­¤ï¼š`12385764`(æ©™è‰²éƒ¨åˆ†) çš„ä¸‹ä¸€ä¸ªæ’åˆ—å°±æ˜¯ `12386457` (ç»¿è‰²éƒ¨åˆ†)

![5.svg](https://pic.leetcode-cn.com/1656838556-xBPnGR-5.svg)


### ç®—æ³•å®ç°

```java
public void nextPermutation(int[] nums) {
    int n = nums.length;
    // ä»åå‘å‰æŸ¥æ‰¾ç¬¬ä¸€ä¸ªç›¸é‚»å‡åºçš„å…ƒç´ å¯¹
    for (int i = n - 1; i > 0; i--) {
        if (nums[i] > nums[i - 1]) {
            // ä» i å¼€å§‹æ’åº
            Arrays.sort(nums, i, n);
            // ä» i å¼€å§‹å‘åæ‰¾ç¬¬ä¸€ä¸ªæ¯” i - 1 å¤§çš„å…ƒç´ 
            for (int j = i; j < n; j++) {
                // æ‰¾åˆ°å°±äº¤æ¢
                if (nums[j] > nums[i - 1]) {
                    int temp = nums[j];
                    nums[j] = nums[i - 1];
                    nums[i - 1] = temp;
                    return ;
                }
            }
        }
    }
    // ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ’åˆ—æ›´å¤§çš„æ’åˆ—
    Arrays.sort(nums);
    return ;
}
```

## ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  III

**é¢˜ç›®è¯¦æƒ…å¯è§ [ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  III](https://leetcode.cn/problems/next-greater-element-iii/)**

è¿‡ç¨‹åŸºæœ¬ä¸Šå’Œä¸Šä¸ªé¢˜ç›®åˆ†æä¸€è‡´ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```java
public int nextGreaterElement(int n) {
    // è½¬æ¢æˆ char[]
    char[] s = String.valueOf(n).toCharArray();
    // ä»åå‘å‰æŸ¥æ‰¾ç¬¬ä¸€ä¸ªç›¸é‚»å‡åºçš„å…ƒç´ å¯¹
    for (int i = s.length - 1; i > 0; i--) {
        if (s[i] > s[i - 1]) {
            // ä» i å¼€å§‹æ’åº
            Arrays.sort(s, i, s.length);
            // ä» i å¼€å§‹å‘åæ‰¾ç¬¬ä¸€ä¸ªæ¯” i - 1 å¤§çš„å…ƒç´ 
            for (int j = i; j < s.length; j++) {
                // æ‰¾åˆ°å°±äº¤æ¢
                if (s[j] > s[i - 1]) {
                    char t = s[i - 1];
                    s[i - 1] = s[j];
                    s[j] = t;
                    // åˆ¤æ–­æ˜¯å¦ä¸º 32 ä½æ•´æ•°
                    long ans = Long.parseLong(String.valueOf(s));
                    if (ans > Integer.MAX_VALUE) return -1;
                    return (int) ans;
                }
            }
        }
    }
    // æ²¡æœ‰ä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ 
    return -1;
}
```