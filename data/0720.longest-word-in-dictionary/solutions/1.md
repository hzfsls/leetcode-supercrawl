## [720.è¯å…¸ä¸­æœ€é•¿çš„å•è¯ ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/longest-word-in-dictionary/solutions/100000/by-ac_oier-bmot)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)

## æ¨¡æ‹Ÿ

æ•°æ®èŒƒå›´å¾ˆå°ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ¨¡æ‹Ÿæ¥åšã€‚

å…ˆå°†æ‰€æœ‰çš„ $words[i]$ å­˜å…¥ `Set` é›†åˆï¼Œæ–¹ä¾¿åç»­å¯ä»¥è¿‘ä¼¼ $O(1)$ æŸ¥è¯¢æŸä¸ªå­ä¸²æ˜¯å¦å­˜åœ¨ $words$ ä¸­ã€‚

éå† $words$ æ•°ç»„ï¼ˆé¢˜ç›®æ²¡æœ‰è¯´ $words$ ä¸é‡å¤ï¼Œå› æ­¤æœ€å¥½éå†åˆšåˆšé¢„å¤„ç†çš„ `Set`  é›†åˆï¼‰ï¼Œåˆ¤æ–­æ¯ä¸ª $words[i]$ æ˜¯å¦ä¸ºã€Œåˆæ³•å•è¯ã€ï¼ŒåŒæ—¶åˆ©ç”¨å½“å‰çš„æœ€é•¿å•è¯æ¥åšå‰ªæã€‚

ä¸ç®—å‰ªææ•ˆæœï¼Œè¯¥åšæ³•è®¡ç®—é‡ä¸è¶…è¿‡ $10^6$ï¼Œå¯ä»¥è¿‡ã€‚

ä»£ç ï¼š
```Java []
class Solution {
    public String longestWord(String[] words) {
        String ans = "";
        Set<String> set = new HashSet<>();
        for (String s : words) set.add(s);
        for (String s : set) {
            int n = s.length(), m = ans.length();
            if (n < m) continue;
            if (n == m && s.compareTo(ans) > 0) continue;
            boolean ok = true;
            for (int i = 1; i <= n && ok; i++) {
                String sub = s.substring(0, i);
                if (!set.contains(sub)) ok = false;
            }
            if (ok) ans = s;
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šé¢„å¤„ç† `Set` é›†åˆå¤æ‚åº¦è¿‘ä¼¼ $O(n)$ï¼›åˆ¤æ–­æŸä¸ª $words[i]$ æ˜¯å¦åˆæ³•éœ€è¦åˆ¤æ–­æ‰€æœ‰å­ä¸²æ˜¯å¦å‡åœ¨ $words$ ä¸­ï¼Œå¤æ‚åº¦ä¸º $O(m^2)$ï¼Œå…¶ä¸­ $m$ ä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œå¤„ç† $words[i]$ çš„è¿‡ç¨‹è¿˜ä½¿ç”¨åˆ° `compareTo` æ“ä½œï¼Œå…¶å¤æ‚åº¦ä¸º $O(\min(N, M))$ï¼Œå…¶ä¸­ $N$ å’Œ $M$ ä¸ºå‚ä¸æ¯”è¾ƒçš„ä¸¤å­—ç¬¦ä¸²é•¿åº¦ï¼Œè¯¥æ“ä½œç›¸æ¯”äºç”Ÿæˆå­ä¸²å¯å¿½ç•¥ï¼Œè€Œå¯¹äºä¸€ä¸ªé•¿åº¦ä¸º $m$ çš„å­—ç¬¦ä¸²è€Œè¨€ï¼Œç”Ÿæˆå…¶æ‰€æœ‰çš„å­ä¸²çš„è®¡ç®—é‡ä¸ºé¦–é¡¹ä¸º $1$ï¼Œæœ«é¡¹ä¸º $m$ï¼Œå…¬å·®ä¸º $1$ çš„ç­‰å·®æ•°åˆ—æ±‚å’Œç»“æœã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(\sum_{i = 0}^{n - 1}words[i].length^2)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(\sum_{i = 0}^{n - 1}words[i].length)$

---

## å­—å…¸æ ‘

ä¸Šè¿°è§£æ³•ä¸­ã€Œæšä¸¾æŸä¸ª $words[i]$ çš„æ‰€æœ‰å­ä¸²ï¼Œå¹¶åˆ¤æ–­å­ä¸²æ˜¯å¦åœ¨ $words$ æ•°ç»„ä¸­å‡ºç°ã€çš„æ“ä½œå¯ä½¿ç”¨ã€Œå­—å…¸æ ‘ã€æ¥å®ç°ã€‚

**ä¸äº†è§£ã€ŒTrie / å­—å…¸æ ‘ã€çš„åŒå­¦å¯ä»¥çœ‹å‰ç½® ğŸ§€ï¼š[å­—å…¸æ ‘å…¥é—¨](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247488490%26idx%3D1%26sn%3Ddb2998cb0e5f08684ee1b6009b974089)ã€‚é‡Œé¢é€šè¿‡å›¾ä¾‹å±•ç¤ºäº†å­—å…¸æ ‘åŸºæœ¬å½¢æ€ï¼Œä»¥åŠæä¾›äº†ã€Œæ•°ç»„å®ç°ã€å’Œã€ŒTrieNode å®ç°ã€ä¸¤ç§æ–¹å¼ï¼Œè¿˜æœ‰ã€Œæ•°ç»„å¤§å°ä¼°ç®—æ–¹å¼ã€å’Œã€ŒTrie åº”ç”¨é¢ã€ä»‹ç»ã€‚**

å›åˆ°æœ¬é¢˜ï¼Œèµ·å§‹å…ˆå°†æ‰€æœ‰çš„ $words[i]$ å­˜å…¥å­—å…¸æ ‘ï¼Œå¹¶è®°å½•æ¯ä¸ªå­—ç¬¦çš„ç»“å°¾ç¼–å·ã€‚

å¯¹äºæŸä¸ª $words[i]$ è€Œè¨€ï¼Œå…¶èƒ½æˆä¸ºã€Œåˆæ³•å•è¯ã€çš„å……è¦æ¡ä»¶ä¸ºï¼š$words[i]$ çš„æ¯ä¸ªå‰ç¼€ç¼–å·éƒ½æœ‰ã€Œä»¥ç»“å°¾ç¼–å·ã€æ‰€è¢«è®°å½•ã€‚

> ä¸€äº›ç»†èŠ‚ï¼šä¸ºäº†é˜²æ­¢æ¯ä¸ªæ ·ä¾‹éƒ½ `new` å¤§æ•°ç»„ï¼Œæˆ‘ä»¬ä½¿ç”¨ `static` è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶åœ¨è·‘æ ·ä¾‹å‰è¿›è¡Œç›¸åº”çš„æ¸…ç†å·¥ä½œã€‚

ä»£ç ï¼š
```Java []
class Solution {
    static int N = 30010, M = 26;
    static int[][] tr = new int[N][M];
    static boolean[] isEnd = new boolean[N];
    static int idx = 0;
    void add(String s) {
        int p = 0, n = s.length();
        for (int i = 0; i < n; i++) {
            int u = s.charAt(i) - 'a';
            if (tr[p][u] == 0) tr[p][u] = ++idx;
            p = tr[p][u];
        }
        isEnd[p] = true;
    }
    boolean query(String s) {
        int p = 0, n = s.length();
        for (int i = 0; i < n; i++) {
            int u = s.charAt(i) - 'a';
            p = tr[p][u];
            if (!isEnd[p]) return false;
        }
        return true;
    }
    public String longestWord(String[] words) {
        Arrays.fill(isEnd, false);
        for (int i = 0; i <= idx; i++) Arrays.fill(tr[i], 0);
        idx = 0;

        String ans = "";
        for (String s : words) add(s);
        for (String s : words) {
            int n = s.length(), m = ans.length();
            if (n < m) continue;
            if (n == m && s.compareTo(ans) > 0) continue;
            if (query(s)) ans = s;
        }
        return ans;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šå°†æ‰€æœ‰ $words[i]$ å­˜å…¥å­—å…¸æ ‘çš„å¤æ‚åº¦ä¸º $O(\sum_{i = 0}^{n - 1}words[i].length)$ï¼›æŸ¥è¯¢æ¯ä¸ª $words[i]$ æ˜¯å¦åˆæ³•çš„å¤æ‚åº¦ä¸º $O(m)$ï¼Œå…¶ä¸­ $m$ ä¸ºå½“å‰ $words[i]$ é•¿åº¦ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(\sum_{i = 0}^{n - 1}words[i].length)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(C)$

---

## åŒç±»å‹åŠ é¤

**[Trie çš„æ¨¡æ¿çº§è¿ç”¨](https%3A//mp.weixin.qq.com/s?__biz%3DMzU4NDE3MTEyMA%3D%3D%26mid%3D2247490419%26idx%3D1%26sn%3Dc2951aae4fa0d70785306580a1230618) ğŸ‰ ğŸ‰**

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~

