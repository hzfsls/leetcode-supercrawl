## [1095.å±±è„‰æ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼ ä¸­æ–‡çƒ­é—¨é¢˜è§£2](https://leetcode.cn/problems/find-in-mountain-array/solutions/100000/shi-shi-hou-ji-chu-wo-de-mo-neng-er-fen-mo-ban-lia)

ä½œè€…ï¼š[sweetiee](https://leetcode.cn/u/sweetiee)

ğŸ™‹æ‰“å¡æ‰“å¡ï¼

â¤ï¸ å¤§ä½¬ä»¬éšæ‰‹å…³æ³¨æ³¢å…¬ä¼—å·ã€[ç”œå§¨çš„å¥‡å¦™å†’é™©](http://q8bj89g2o.bkt.clouddn.com/sweetiee.jpeg)ã€‘å’ŒçŸ¥ä¹ä¸“æ ã€[ç”œå§¨çš„åŠ›æ‰£é¢˜è§£](https://zhuanlan.zhihu.com/c_1224355183452614656)ã€‘å‘€ï½ â–„â–ˆâ–”â–‰â—

ğŸ’—å…³æ³¨å…¬ä¼—å·åæ‰«ç è¿›ã€Œç”œå§¨çš„æŠ€æœ¯äº¤æµç¾¤ã€å–”ï¼

---

### å±±è„‰æ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼


### ğŸ¤·â€â™€ï¸ é¦–å…ˆï¼Œæœ¬é¢˜çš„è§£å†³æ€è·¯å¾ˆæ˜ç¡®
è¿™ç§ã€Œåˆ†æ®µæ•°ç»„æŸ¥æ‰¾ç›®æ ‡å€¼ã€é—®é¢˜ï¼Œéƒ½å¯ä»¥é€šè¿‡å°†æ•°ç»„åˆ†æ®µï¼Œä»è€Œè½¬åŒ–æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ã€Œæœ‰åºæ•°ç»„æŸ¥æ‰¾ç›®æ ‡å€¼ã€é—®é¢˜ï¼è¿™ä¸ªæˆ‘åœ¨å‰å¤©çš„æ‰“å¡é¢˜ã€Œ33.æœç´¢æ—‹è½¬æ’åºæ•°ç»„ã€çš„é¢˜è§£[ã€Šå¤šæ€è·¯å®Œå…¨æ”»ç•¥ï¼ŒğŸ¤·â€â™€ï¸å¿…é¡»ç§’æ‡‚!ã€‹](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/solution/duo-si-lu-wan-quan-gong-lue-bi-xu-miao-dong-by-swe/)çš„ã€Œæ€è·¯ä¸€ã€ä¸­è®²è§£è¿‡äº†ï¼Œæ¬¢è¿è§‚åº·ï½




### ğŸ¤·â€â™€ï¸ å¥½äº†å¥½äº†çŸ¥é“ç”¨2åˆ†äº†ï¼Œå¯æ˜¯ä¸‹æ ‡æ€»æ˜¯ç©ä¸è½¬ï¼Œæ€ä¹ˆåŠ QAQ
ç›¸ä¿¡å¤§å®¶éƒ½ä¼šä¸‹é¢è¿™ä¸ª **ã€ŒåŸºç¡€äºŒåˆ†æ¨¡æ¿ã€**ï¼š
``` Java
public int search(int[] nums, int target) {
    int lo = 0, hi = nums.length - 1, mid = 0;
    while (lo <= hi) {
        mid = lo + (hi - lo) / 2;
        if (nums[mid] == target) {
            return mid;
        }
        if (nums[mid] < target) {
            lo = mid + 1;
        } else {
            hi = mid - 1;
        }
    }
    return -1;
}
```

**1ã€ä¸ºå•¥æ˜¯ `lo = mid + 1`,`hi = mid - 1` è€Œä¸èƒ½ `lo = mid`, `hi = mid` å‘¢ï¼Ÿ**
çœ‹å¾ªç¯æ¡ä»¶ `while(lo <= hi)` å¯çŸ¥ï¼Œå½“ `lo` å’Œ `hi` å·®å€¼ä¸º 1 æˆ– 0 çš„æ—¶å€™ä»ç„¶ä¼šç»§ç»­å¾ªç¯ï¼Œæ­¤æ—¶ `mid` çš„å€¼å°±ä¸æ›´æ–°äº†ï¼Œä¸ºäº†é˜²æ­¢ `lo` å’Œ `hi` ä¹Ÿä¸æ›´æ–°ä»è€Œæ­»å¾ªç¯ï¼Œæ‰€ä»¥è¿™é‡Œ +1 å’Œ -1 ä¸èƒ½ä¸¢å“¦ã€‚

**2ã€è¿™ä¸ªåŸºç¡€äºŒåˆ†æ¨¡æ¿çš„ä¼˜åŠ¿å’Œå¼Šç«¯æ˜¯å•¥å‘¢ï¼Ÿ**
å¥½å¤„æ˜¯å¯¹äºã€Œæœ‰åºæ•°ç»„æŸ¥æ‰¾ç›®æ ‡å€¼ã€å¾ˆæ–¹ä¾¿å‘¢ï¼
åå¤„æ˜¯å±€é™æ€§å¤ªå¼ºï¼Œå¯¹äºå…¶ä»–äºŒåˆ†é—®é¢˜å°±å¾ˆé¸¡è‚‹ï¼Œæ¯”å¦‚æœ¬é¢˜æŸ¥æ‰¾å³°å€¼ï¼Œéœ€è¦åœ¨åŸæ¨¡æ¿åŸºç¡€ä¸ŠåŠ ä¸Šç‰¹æ®Šçš„æ¡ä»¶åˆ†æ”¯ä»¥åŠå„ç§è¾¹ç•Œåˆ¤æ–­ï¼Œäºæ˜¯æäº¤ä¸€æ¬¡é”™ä¸€æ¬¡ï¼Œé¢å‘æµ‹è¯•ç¼–ç¨‹å“ˆå“ˆå“ˆï¼Œæœ€åç»ˆäºç»ˆäºæŠŠä¸‹æ ‡è°ƒæ•´å¯¹äº†ï¼å¯ä¸‹ä¸€æ¬¡åšçš„æ—¶å€™è¿˜è¦ä»å¤´å†é”™ä¸€éã€‚ã€‚ã€‚Sã€‚ã€‚Aã€‚ã€‚Dã€‚ã€‚ã€‚ã€‚



### ğŸŒäºæ˜¯ï¼Œç»ˆäºè½®åˆ°æˆ‘ã€Œä¸‡èƒ½äºŒåˆ†æ¨¡æ¿ã€å‡ºåœºäº†ï¼
æˆ‘åšçš„ **ã€Œæ‰€æœ‰(æ‰‹åŠ¨åŠ ç²—)ã€** äºŒåˆ†é¢˜éƒ½ç›´æ¥ ~~æ— è„‘~~ å¥—è¿™ä¸ªæ¨¡æ¿çš„ï¼Œå±¡è¯•ä¸çˆ½å‘¢ > <, å†ä¹Ÿä¸ç”¨æ‹…å¿ƒäºŒåˆ†å†™é”™å•¦ã€‚
ä¸‹é¢ç›´æ¥è´´ä»£ç ï¼š
- ä»£ç ä¸­ã€ŒæŸ¥æ‰¾å³°é¡¶ã€ç”¨çš„æ˜¯ã€Œä¸‡èƒ½äºŒåˆ†æ¨¡æ¿ã€
- æ‰¾åˆ°å³°é¡¶ååœ¨ä¸¤æ®µã€Œæœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼ã€ç”¨çš„æ˜¯ä¸Šé¢ä»‹ç»çš„ã€ŒåŸºç¡€äºŒåˆ†æ¨¡æ¿ã€ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ç”¨ä¸‡èƒ½æ¨¡æ¿å•¦ï¼Œä¸‡èƒ½æ¨¡æ¿å°±æ˜¯å¾ˆä¸‡èƒ½>o <ï¼‰

ä¸‡èƒ½æ¨¡æ¿å…¶å®å°±æ˜¯ä¸ç®¡å•¥é—®é¢˜ï¼Œéƒ½é€šè¿‡`while`å¾ªç¯æŠŠæ•°æ®åŒºé—´é€¼è¿‘åˆ°`[lo, hi]ï¼ˆå…¶ä¸­ï¼Œlo + 1 == hiï¼‰`ä¸¤ä¸ªå€¼ï¼Œæ‰€ä»¥å‡ºæ¥å¾ªç¯ååªè¦åˆ¤æ–­ä¸€ä¸‹ `lo` å’Œ `hi` å°±è¡Œäº†ã€‚
``` Java
class Solution {
    public int findInMountainArray(int target, MountainArray mountainArr) {
        // å…ˆæ‰¾åˆ°å³°é¡¶ç´¢å¼• peakIdx
        int lo = 0, hi = mountainArr.length() - 1;
        while (lo + 1 < hi) {
            int mid = lo + (hi - lo) / 2;
            int midVal = mountainArr.get(mid);
            
            if (midVal > mountainArr.get(mid - 1)) {
                lo = mid;
            } else {
                hi = mid;
            } 
        }
        int peakIdx = mountainArr.get(lo) > mountainArr.get(hi)? lo: hi;

        
        // æ ¹æ®å³°é¡¶å°†å±±è„‰æ•°ç»„åˆ†ä¸ºã€Œå‡åºæ•°ç»„ã€å’Œã€Œé™åºæ•°ç»„ã€ä¸¤æ®µï¼Œåˆ†åˆ«è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾
        int idx = binSearch(mountainArr, 0, peakIdx, target, true);
        return idx != -1? idx: binSearch(mountainArr, peakIdx + 1, mountainArr.length() - 1, target, false);
    }

    private int binSearch(MountainArray mountainArr, int lo, int hi, int target, boolean asc) {
        while (lo <= hi) {
            int mid = lo + (hi - lo) / 2;
            int midVal = mountainArr.get(mid);
            
            if (midVal == target) {
                return mid;
            }
            if (midVal < target) {
                lo = asc? mid + 1: lo;
                hi = asc? hi: mid - 1;
            } else {
                hi = asc? mid - 1: hi;
                lo = asc? lo: mid + 1;
            }
        }
        return -1;
    }
}
```

---
â¤ï¸ å¤§ä½¬ä»¬éšæ‰‹æ‰“èµä¸ªã€Œçˆ±å¿ƒèµã€å§ â–„â–ˆâ–”â–‰â—
â¤ï¸ å¦‚æœèƒ½éšæ‰‹å…³æ³¨æ³¢å…¬ä¼—å·ã€[ç”œå§¨çš„å¥‡å¦™å†’é™©](http://q8bj89g2o.bkt.clouddn.com/sweetiee.jpeg)ã€‘å’ŒçŸ¥ä¹ä¸“æ ã€[ç”œå§¨çš„åŠ›æ‰£é¢˜è§£](https://zhuanlan.zhihu.com/c_1224355183452614656)ã€‘å°±å¤ªå¥½äº†å­ â–„â–ˆâ–”â–‰â—
ğŸ’—å…³æ³¨å…¬ä¼—å·åæ‰«ç è¿›ã€Œç”œå§¨çš„æŠ€æœ¯äº¤æµç¾¤ã€å–”ï¼