## [81.æœç´¢æ—‹è½¬æ’åºæ•°ç»„ II ä¸­æ–‡çƒ­é—¨é¢˜è§£2](https://leetcode.cn/problems/search-in-rotated-sorted-array-ii/solutions/100000/gong-shui-san-xie-xiang-jie-wei-he-yuan-xtam4)

ä½œè€…ï¼š[AC_OIer](https://leetcode.cn/u/AC_OIer)
## äºŒåˆ†è§£æ³•

æ ¹æ®é¢˜æ„ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œæ‰€è°“çš„æ—‹è½¬å…¶å®å°±æ˜¯ã€Œå°†æŸä¸ªä¸‹æ ‡å‰é¢çš„æ‰€æœ‰æ•°æ•´ä½“ç§»åˆ°åé¢ï¼Œä½¿å¾—æ•°ç»„ä»æ•´ä½“æœ‰åºå˜ä¸ºåˆ†æ®µæœ‰åºã€ã€‚

ä½†å’Œ [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/solution/sou-suo-xuan-zhuan-pai-xu-shu-zu-by-leetcode-solut/) ä¸åŒçš„æ˜¯ï¼Œæœ¬é¢˜å…ƒç´ å¹¶ä¸å”¯ä¸€ã€‚

**è¿™æ„å‘³ç€æˆ‘ä»¬æ— æ³•ç›´æ¥æ ¹æ®ä¸** $nums[0]$ **çš„å¤§å°å…³ç³»ï¼Œå°†æ•°ç»„åˆ’åˆ†ä¸ºä¸¤æ®µï¼Œå³æ— æ³•é€šè¿‡ã€ŒäºŒåˆ†ã€æ¥æ‰¾åˆ°æ—‹è½¬ç‚¹ã€‚**

**å› ä¸ºã€ŒäºŒåˆ†ã€çš„æœ¬è´¨æ˜¯äºŒæ®µæ€§ï¼Œå¹¶éå•è°ƒæ€§ã€‚åªè¦ä¸€æ®µæ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå¦å¤–ä¸€æ®µä¸æ»¡è¶³æŸä¸ªæ€§è´¨ï¼Œå°±å¯ä»¥ç”¨ã€ŒäºŒåˆ†ã€ã€‚**

å¦‚æœä½ æœ‰çœ‹è¿‡æˆ‘ [ã€å®«æ°´ä¸‰å¶ã€‘ä¸¥æ ¼ O(logN)ï¼Œä¸€èµ·çœ‹æ¸…äºŒåˆ†çš„æœ¬è´¨](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/solution/shua-chuan-lc-yan-ge-ologn100yi-qi-kan-q-xifo/) è¿™ç¯‡é¢˜è§£ï¼Œä½ åº”è¯¥å¾ˆå®¹æ˜“å°±ç†è§£ä¸Šå¥è¯çš„æ„æ€ã€‚å¦‚æœæ²¡æœ‰ä¹Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆè§£å†³æœ¬é¢˜ï¼Œåœ¨ç†è§£åä½ å†å»åš [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/solution/sou-suo-xuan-zhuan-pai-xu-shu-zu-by-leetcode-solut/)ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸¤é¢˜éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸å­˜åœ¨å…ˆåå…³ç³»ã€‚

ä¸¾ä¸ªğŸŒ°ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•°æ® [0,1,2,2,2,3,4,5] æ¥ç†è§£ä¸ºä»€ä¹ˆä¸åŒçš„æ—‹è½¬ç‚¹ä¼šå¯¼è‡´ã€ŒäºŒæ®µæ€§ä¸¢å¤±ã€ï¼š

![image.png](https://pic.leetcode-cn.com/1617852745-LoBNPK-image.png)

**ä»£ç ï¼ˆæ„Ÿè°¢ [@Alfredo](/u/alfredocheng/)ã€ [@007](/u/007-v8/) å’Œ [@å¤©](/u/tian-et/) ä¸‰ä½åŒå­¦æä¾›çš„å…¶ä»–è¯­è¨€ç‰ˆæœ¬ï¼‰ï¼š**
```java []
class Solution {
    public boolean search(int[] nums, int t) {
        int n = nums.length;
        int l = 0, r = n - 1;
        // æ¢å¤äºŒæ®µæ€§
        while (l < r && nums[0] == nums[r]) r--;

        // ç¬¬ä¸€æ¬¡äºŒåˆ†ï¼Œæ‰¾æ—‹è½¬ç‚¹
        while (l < r) {
            int mid = l + r + 1 >> 1;
            if (nums[mid] >= nums[0]) {
                l = mid;
            } else {
                r = mid - 1;
            }
        }
        
        int idx = n;
        if (nums[r] >= nums[0] && r + 1 < n) idx = r + 1;

        // ç¬¬äºŒæ¬¡äºŒåˆ†ï¼Œæ‰¾ç›®æ ‡å€¼
        int ans = find(nums, 0, idx - 1, t);
        if (ans != -1) return true;
        ans = find(nums, idx, n - 1, t);
        return ans != -1;
    }
    int find(int[] nums, int l, int r, int t) {
        while (l < r) {
            int mid = l + r >> 1;
            if (nums[mid] >= t) {
                r = mid;
            } else {
                l = mid + 1;
            }
        }
        return nums[r] == t ? r : -1;
    }
}
```
```c++ []
class Solution {
public:
    bool search(vector<int>& nums, int t) {
        int n = nums.size();
        int l = 0, r = n - 1;
        // æ¢å¤äºŒæ®µæ€§
        while (l < r && nums[0] == nums[r]) r--;

        // ç¬¬ä¸€æ¬¡äºŒåˆ†ï¼Œæ‰¾æ—‹è½¬ç‚¹
        while (l < r) {
            int mid = (l + r + 1) >> 1;
            if (nums[mid] >= nums[0]) {
                l = mid;
            } else {
                r = mid - 1;
            }
        }
        
        int idx = n;
        if (nums[r] >= nums[0] && r + 1 < n) idx = r + 1;

        // ç¬¬äºŒæ¬¡äºŒåˆ†ï¼Œæ‰¾ç›®æ ‡å€¼
        int ans = find(nums, 0, idx - 1, t);
        if (ans != -1) return true;
        ans = find(nums, idx, n - 1, t);
        return ans != -1;
    }

    int find(vector<int>& nums, int l, int r, int t) {
        while (l < r) {
            int mid = l + r >> 1;
            if (nums[mid] >= t) {
                r = mid;
            } else {
                l = mid + 1;
            }
        }
        return nums[r] == t ? r : -1;
    }
};
```
```golang []
func search(nums []int, target int) bool {
	n := len(nums)
	left := 0
	right := n - 1
	// æ¢å¤äºŒæ®µæ€§
	for left < right && nums[0] == nums[right] {
		right--
	}

	// ç¬¬ä¸€æ¬¡äºŒåˆ†ï¼Œæ‰¾æ—‹è½¬ç‚¹
	for left < right {
		mid := (left + right + 1) >> 1
		if nums[mid] >= nums[0] {
			left = mid
		} else {
			right = mid - 1
		}
	}

	idx := n
	if nums[right] >= nums[0] && right+1 < n {
		idx = right + 1
	}
	// ç¬¬äºŒæ¬¡äºŒåˆ†ï¼Œæ‰¾ç›®æ ‡å€¼
	ans := find(nums, 0, idx-1, target)
	if ans != -1 {
		return true
	}
	ans = find(nums, idx, n-1, target)
	return ans != -1
}
func find(nums []int, l int, r int, t int) int {
	for l < r {
		mid := (l + r) >> 1
		if nums[mid] >= t {
			r = mid
		} else {
			l = mid + 1
		}
	}
	if nums[r] == t {
		return t
	}
	return -1
}
```
```c# []
public class Solution {
    public bool Search(int[] nums, int target)
    {
        int n = nums.Length;
        int l = 0, r = n - 1;
        while (l < r && nums[0] == nums[r]) r--;

        while (l < r)
        {
            int mid = (l + r + 1) >> 1;
            if (nums[mid] >= nums[0])
            {
                l = mid;
            }
            else
            {
                r = mid - 1;
            }
        }
        int idx = n;
        if (nums[r] >= nums[0] && r + 1 < n) idx = r + 1;

        int ans = find(nums, 0, idx - 1, target);
        if (ans != -1) return true;
        ans = find(nums, idx, n - 1, target);
        return ans != -1;

    }
    int find(int[] nums, int l, int r, int t)
    {
        while (l < r)
        {
            int mid = (l + r ) >> 1;
            if (nums[mid] >= t)
            {
                r = mid;
            }
            else
            {
                l = mid + 1;
            }
        }
        return nums[r] == t ? r : -1;
    }
}
```
* æ—¶é—´å¤æ‚åº¦ï¼šæ¢å¤äºŒæ®µæ€§å¤„ç†ä¸­ï¼Œæœ€åçš„æƒ…å†µä¸‹ï¼ˆè€ƒè™‘æ•´ä¸ªæ•°ç»„éƒ½æ˜¯åŒä¸€ä¸ªæ•°ï¼‰å¤æ‚åº¦æ˜¯ $O(n)$ï¼Œè€Œä¹‹åçš„æ‰¾æ—‹è½¬ç‚¹å’Œç›®æ ‡å€¼éƒ½æ˜¯ã€ŒäºŒåˆ†ã€ï¼Œå¤æ‚åº¦ä¸º $O(log{n})$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(n)$ çš„ã€‚
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚

***

## è¿›é˜¶

å¦‚æœçœŸæ­£ç†è§£ã€ŒäºŒåˆ†ã€çš„è¯ï¼Œæœ¬é¢˜å’Œ [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/solution/sou-suo-xuan-zhuan-pai-xu-shu-zu-by-leetcode-solut/) åŒºåˆ«ä¸å¤§ã€‚

å»ºè®®å¤§å®¶åœ¨å®Œæˆä¸¤é¢˜çš„åŸºç¡€ä¸Šè¯•è¯• [é¢è¯•é¢˜ 10.03. æœç´¢æ—‹è½¬æ•°ç»„](https://leetcode-cn.com/problems/search-rotate-array-lcci/) ã€‚

***
## å…¶ä»–ã€ŒäºŒåˆ†ã€ç›¸å…³é¢˜è§£

* äºŒåˆ†æ¨¡æ¿
    [29. ä¸¤æ•°ç›¸é™¤](https://leetcode-cn.com/problems/divide-two-integers/) : [äºŒåˆ† + å€å¢ä¹˜æ³•è§£æ³•ï¼ˆå«æ¨¡æ¿ï¼‰](https://leetcode-cn.com/problems/divide-two-integers/solution/shua-chuan-lc-er-fen-bei-zeng-cheng-fa-j-m73b/)

* äºŒåˆ†æœ¬è´¨ & æ¢å¤äºŒæ®µæ€§å¤„ç†

    [33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ï¼ˆæ‰¾ç›®æ ‡å€¼ï¼‰](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/) : [ä¸¥æ ¼ O(logN)ï¼Œä¸€èµ·çœ‹æ¸…äºŒåˆ†çš„æœ¬è´¨](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/solution/shua-chuan-lc-yan-ge-ologn100yi-qi-kan-q-xifo/)

    [81. æœç´¢æ—‹è½¬æ’åºæ•°ç»„ IIï¼ˆæ‰¾ç›®æ ‡å€¼ï¼‰](https://leetcode-cn.com/problems/search-in-rotated-sorted-array-ii/) : [è¯¦è§£ä¸ºä½•å…ƒç´ ç›¸åŒä¼šå¯¼è‡´ O(n)ï¼Œä¸€èµ·çœ‹æ¸…äºŒåˆ†çš„æœ¬è´¨](https://leetcode-cn.com/problems/search-in-rotated-sorted-array-ii/solution/gong-shui-san-xie-xiang-jie-wei-he-yuan-xtam4/)

    [153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ï¼ˆæ‰¾æœ€å°å€¼ï¼‰](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/) : [ä¸¥æ ¼ O(logN)ï¼Œä¸€èµ·çœ‹æ¸…äºŒåˆ†çš„æœ¬è´¨](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array/solution/gong-shui-san-xie-yan-ge-olognyi-qi-kan-6d969/)

    [154. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼ IIï¼ˆæ‰¾æœ€å°å€¼ï¼‰](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array-ii/) : [è¯¦è§£ä¸ºä½•å…ƒç´ ç›¸åŒä¼šå¯¼è‡´ O(n)ï¼Œä¸€èµ·çœ‹æ¸…äºŒåˆ†çš„æœ¬è´¨](https://leetcode-cn.com/problems/find-minimum-in-rotated-sorted-array-ii/solution/gong-shui-san-xie-xiang-jie-wei-he-yuan-7xbty/)

* äºŒåˆ† check å‡½æ•°å¦‚ä½•ç¡®å®š
    [34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/) : [è€ƒå¯Ÿå¯¹ã€ŒäºŒåˆ†ã€çš„ç†è§£ï¼Œä»¥åŠ check å‡½æ•°çš„ã€Œå¤§äº å°äºã€æ€ä¹ˆå†™](https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/solution/gong-shui-san-xie-kao-cha-dui-er-fen-de-86bk0/)

* äºŒåˆ†ç­”æ¡ˆçš„é¢˜ç›®
    [1482. åˆ¶ä½œ m æŸèŠ±æ‰€éœ€çš„æœ€å°‘å¤©æ•°](https://leetcode-cn.com/problems/minimum-number-of-days-to-make-m-bouquets/) : [åˆ©ç”¨ã€ŒäºŒæ®µæ€§ã€æ‰¾åˆ†å‰²ç‚¹ï¼Œä»¥åŠä¼˜åŒ– check å‡½æ•°](https://leetcode-cn.com/problems/minimum-number-of-days-to-make-m-bouquets/solution/gong-shui-san-xie-li-yong-er-duan-xing-z-ysv4/)
    [1011. åœ¨ D å¤©å†…é€è¾¾åŒ…è£¹çš„èƒ½åŠ›](https://leetcode-cn.com/problems/capacity-to-ship-packages-within-d-days/) : [åˆ©ç”¨ã€ŒäºŒæ®µæ€§ã€æ‰¾åˆ†å‰²ç‚¹ï¼Œä»¥åŠå¦‚ä½•ç¡®å®šã€ŒäºŒåˆ†èŒƒå›´ã€](https://leetcode-cn.com/problems/capacity-to-ship-packages-within-d-days/solution/gong-shui-san-xie-li-yong-er-duan-xing-z-95zj/)

***
## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

**å¦‚æœ‰ä¸ç†è§£çš„åœ°æ–¹ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€ï¼Œæˆ‘éƒ½ä¼šé€ä¸€å›å¤ ~**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ 