## [238.é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯ ä¸­æ–‡å®˜æ–¹é¢˜è§£](https://leetcode.cn/problems/product-of-array-except-self/solutions/100000/chu-zi-shen-yi-wai-shu-zu-de-cheng-ji-by-leetcode-)
### ğŸ“ºè§†é¢‘é¢˜è§£  

![238.é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯.mp4](5f8f385b-1288-4c91-8a65-e7490a96764c)

### ğŸ“–æ–‡å­—é¢˜è§£

#### å‰è¨€

è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œå¯ä»¥åœ¨çº¿æ€§æ—¶é—´å’Œç©ºé—´å†…è§£å†³ã€‚å…ˆè®¡ç®—ç»™å®šæ•°ç»„æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ï¼Œç„¶åå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´  $x$ï¼Œå°†æ€»çš„ä¹˜ç§¯é™¤ä»¥ $x$ æ¥æ±‚å¾—é™¤è‡ªèº«å€¼çš„ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯ã€‚

ç„¶è€Œè¿™æ ·çš„è§£å†³æ–¹æ³•æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœè¾“å…¥æ•°ç»„ä¸­å‡ºç° 0ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±å¤±æ•ˆäº†ã€‚è€Œä¸”åœ¨é—®é¢˜ä¸­è¯´æ˜äº†ä¸å…è®¸ä½¿ç”¨é™¤æ³•è¿ç®—ã€‚è¿™å¢åŠ äº†è¿™ä¸ªé—®é¢˜çš„éš¾åº¦ã€‚

#### æ–¹æ³•ä¸€ï¼šå·¦å³ä¹˜ç§¯åˆ—è¡¨

**æ€è·¯**

æˆ‘ä»¬ä¸å¿…å°†æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯é™¤ä»¥ç»™å®šç´¢å¼•å¤„çš„æ•°å­—å¾—åˆ°ç›¸åº”çš„ç­”æ¡ˆï¼Œè€Œæ˜¯åˆ©ç”¨ç´¢å¼•å·¦ä¾§æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯å’Œå³ä¾§æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ï¼ˆå³å‰ç¼€ä¸åç¼€ï¼‰ç›¸ä¹˜å¾—åˆ°ç­”æ¡ˆã€‚

å¯¹äºç»™å®šç´¢å¼• $i$ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒå·¦è¾¹æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ä¹˜ä»¥å³è¾¹æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ã€‚ä¸‹é¢è®©æˆ‘ä»¬æ›´åŠ å…·ä½“çš„æè¿°è¿™ä¸ªç®—æ³•ã€‚

**ç®—æ³•**

1. åˆå§‹åŒ–ä¸¤ä¸ªç©ºæ•°ç»„ `L` å’Œ `R`ã€‚å¯¹äºç»™å®šç´¢å¼• `i`ï¼Œ`L[i]` ä»£è¡¨çš„æ˜¯ `i` å·¦ä¾§æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ï¼Œ`R[i]` ä»£è¡¨çš„æ˜¯ `i` å³ä¾§æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ã€‚
2. æˆ‘ä»¬éœ€è¦ç”¨ä¸¤ä¸ªå¾ªç¯æ¥å¡«å…… `L` å’Œ `R` æ•°ç»„çš„å€¼ã€‚å¯¹äºæ•°ç»„ `L`ï¼Œ`L[0]` åº”è¯¥æ˜¯ `1`ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ çš„å·¦è¾¹æ²¡æœ‰å…ƒç´ ã€‚å¯¹äºå…¶ä»–å…ƒç´ ï¼š`L[i] = L[i-1] * nums[i-1]`ã€‚
3. åŒç†ï¼Œå¯¹äºæ•°ç»„ `R`ï¼Œ`R[length-1]` åº”ä¸º `1`ã€‚`length` æŒ‡çš„æ˜¯è¾“å…¥æ•°ç»„çš„å¤§å°ã€‚å…¶ä»–å…ƒç´ ï¼š`R[i] = R[i+1] * nums[i+1]`ã€‚
4. å½“ `R` å’Œ `L` æ•°ç»„å¡«å……å®Œæˆï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è¾“å…¥æ•°ç»„ä¸Šè¿­ä»£ï¼Œä¸”ç´¢å¼• `i` å¤„çš„å€¼ä¸ºï¼š`L[i] * R[i]`ã€‚

è®©æˆ‘ä»¬ç”¨ä»¥ä¸‹å›¾ç‰‡çœ‹çœ‹ç®—æ³•æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š

<![fig1](https://assets.leetcode-cn.com/solution-static/238/1.PNG),![fig2](https://assets.leetcode-cn.com/solution-static/238/2.PNG),![fig3](https://assets.leetcode-cn.com/solution-static/238/3.PNG),![fig4](https://assets.leetcode-cn.com/solution-static/238/4.PNG),![fig5](https://assets.leetcode-cn.com/solution-static/238/5.PNG),![fig6](https://assets.leetcode-cn.com/solution-static/238/6.PNG),![fig7](https://assets.leetcode-cn.com/solution-static/238/7.PNG),![fig8](https://assets.leetcode-cn.com/solution-static/238/8.PNG),![fig9](https://assets.leetcode-cn.com/solution-static/238/9.PNG),![fig10](https://assets.leetcode-cn.com/solution-static/238/10.PNG)>

```C++ [sol1-C++]
class Solution {
public:
    vector<int> productExceptSelf(vector<int>& nums) {
        int length = nums.size();

        // L å’Œ R åˆ†åˆ«è¡¨ç¤ºå·¦å³ä¸¤ä¾§çš„ä¹˜ç§¯åˆ—è¡¨
        vector<int> L(length, 0), R(length, 0);

        vector<int> answer(length);

        // L[i] ä¸ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        // å¯¹äºç´¢å¼•ä¸º '0' çš„å…ƒç´ ï¼Œå› ä¸ºå·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ L[0] = 1
        L[0] = 1;
        for (int i = 1; i < length; i++) {
            L[i] = nums[i - 1] * L[i - 1];
        }

        // R[i] ä¸ºç´¢å¼• i å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        // å¯¹äºç´¢å¼•ä¸º 'length-1' çš„å…ƒç´ ï¼Œå› ä¸ºå³ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R[length-1] = 1
        R[length - 1] = 1;
        for (int i = length - 2; i >= 0; i--) {
            R[i] = nums[i + 1] * R[i + 1];
        }

        // å¯¹äºç´¢å¼• iï¼Œé™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯å°±æ˜¯å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ä¹˜ä»¥å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        for (int i = 0; i < length; i++) {
            answer[i] = L[i] * R[i];
        }

        return answer;
    }
};
```

```python [sol1-Python3]
class Solution:
    def productExceptSelf(self, nums: List[int]) -> List[int]:
        length = len(nums)
        
        # L å’Œ R åˆ†åˆ«è¡¨ç¤ºå·¦å³ä¸¤ä¾§çš„ä¹˜ç§¯åˆ—è¡¨
        L, R, answer = [0]*length, [0]*length, [0]*length
        
        # L[i] ä¸ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        # å¯¹äºç´¢å¼•ä¸º '0' çš„å…ƒç´ ï¼Œå› ä¸ºå·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ L[0] = 1
        L[0] = 1
        for i in range(1, length):
            L[i] = nums[i - 1] * L[i - 1]
        
        # R[i] ä¸ºç´¢å¼• i å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        # å¯¹äºç´¢å¼•ä¸º 'length-1' çš„å…ƒç´ ï¼Œå› ä¸ºå³ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R[length-1] = 1
        R[length - 1] = 1
        for i in reversed(range(length - 1)):
            R[i] = nums[i + 1] * R[i + 1]

        # å¯¹äºç´¢å¼• iï¼Œé™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯å°±æ˜¯å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ä¹˜ä»¥å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        for i in range(length):
            answer[i] = L[i] * R[i]
        
        return answer
```

```java [sol1-Java]
class Solution {
    public int[] productExceptSelf(int[] nums) {
        int length = nums.length;

        // L å’Œ R åˆ†åˆ«è¡¨ç¤ºå·¦å³ä¸¤ä¾§çš„ä¹˜ç§¯åˆ—è¡¨
        int[] L = new int[length];
        int[] R = new int[length];

        int[] answer = new int[length];

        // L[i] ä¸ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        // å¯¹äºç´¢å¼•ä¸º '0' çš„å…ƒç´ ï¼Œå› ä¸ºå·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ L[0] = 1
        L[0] = 1;
        for (int i = 1; i < length; i++) {
            L[i] = nums[i - 1] * L[i - 1];
        }

        // R[i] ä¸ºç´¢å¼• i å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        // å¯¹äºç´¢å¼•ä¸º 'length-1' çš„å…ƒç´ ï¼Œå› ä¸ºå³ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R[length-1] = 1
        R[length - 1] = 1;
        for (int i = length - 2; i >= 0; i--) {
            R[i] = nums[i + 1] * R[i + 1];
        }

        // å¯¹äºç´¢å¼• iï¼Œé™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯å°±æ˜¯å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ä¹˜ä»¥å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        for (int i = 0; i < length; i++) {
            answer[i] = L[i] * R[i];
        }

        return answer;
    }
}
```

```golang [sol1-Golang]
func productExceptSelf(nums []int) []int {
    length := len(nums)

    // L å’Œ R åˆ†åˆ«è¡¨ç¤ºå·¦å³ä¸¤ä¾§çš„ä¹˜ç§¯åˆ—è¡¨
    L, R, answer := make([]int, length), make([]int, length), make([]int, length)

    // L[i] ä¸ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
    // å¯¹äºç´¢å¼•ä¸º '0' çš„å…ƒç´ ï¼Œå› ä¸ºå·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ L[0] = 1
    L[0] = 1
    for i := 1; i < length; i++ {
        L[i] = nums[i-1] * L[i-1]
    }

    // R[i] ä¸ºç´¢å¼• i å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
    // å¯¹äºç´¢å¼•ä¸º 'length-1' çš„å…ƒç´ ï¼Œå› ä¸ºå³ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R[length-1] = 1
    R[length-1] = 1
    for i := length - 2; i >= 0; i-- {
        R[i] = nums[i+1] * R[i+1]
    }
    
    // å¯¹äºç´¢å¼• iï¼Œé™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯å°±æ˜¯å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ä¹˜ä»¥å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
    for i := 0; i < length; i++ {
        answer[i] = L[i] * R[i]
    }
    return answer
}
```

```TypeScript [sol1-TypeScript]
var productExceptSelf = function(nums: number[]): number[] {
    const length = nums.length;

    // L å’Œ R åˆ†åˆ«è¡¨ç¤ºå·¦å³ä¸¤ä¾§çš„ä¹˜ç§¯åˆ—è¡¨
    const L = new Array<number>(length);
    const R = new Array<number>(length);

    const answer = new Array<number>(length);

    // L[i] ä¸ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
    // å¯¹äºç´¢å¼•ä¸º '0' çš„å…ƒç´ ï¼Œå› ä¸ºå·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ L[0] = 1
    L[0] = 1;
    for (let i = 1; i < length; i++) {
        L[i] = nums[i - 1] * L[i - 1];
    }

    // R[i] ä¸ºç´¢å¼• i å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
    // å¯¹äºç´¢å¼•ä¸º 'length-1' çš„å…ƒç´ ï¼Œå› ä¸ºå³ä¾§æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R[length-1] = 1
    R[length - 1] = 1;
    for (let i = length - 2; i >= 0; i--) {
        R[i] = nums[i + 1] * R[i + 1];
    }

    // å¯¹äºç´¢å¼• iï¼Œé™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯å°±æ˜¯å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ä¹˜ä»¥å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
    for (let i = 0; i < length; i++) {
        answer[i] = L[i] * R[i];
    }

    return answer;
};
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸­ $N$ æŒ‡çš„æ˜¯æ•°ç»„ `nums` çš„å¤§å°ã€‚é¢„å¤„ç† `L` å’Œ `R` æ•°ç»„ä»¥åŠæœ€åçš„éå†è®¡ç®—éƒ½æ˜¯ $O(N)$ çš„æ—¶é—´å¤æ‚åº¦ã€‚
* ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸­ $N$ æŒ‡çš„æ˜¯æ•°ç»„ `nums` çš„å¤§å°ã€‚ä½¿ç”¨äº† `L` å’Œ `R` æ•°ç»„å»æ„é€ ç­”æ¡ˆï¼Œ`L` å’Œ `R` æ•°ç»„çš„é•¿åº¦ä¸ºæ•°ç»„ `nums` çš„å¤§å°ã€‚

#### æ–¹æ³•äºŒï¼šç©ºé—´å¤æ‚åº¦ $O(1)$ çš„æ–¹æ³•

**æ€è·¯**

å°½ç®¡ä¸Šé¢çš„æ–¹æ³•å·²ç»èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ç©ºé—´å¤æ‚åº¦å¹¶ä¸ä¸ºå¸¸æ•°ã€‚

ç”±äºè¾“å‡ºæ•°ç»„ä¸ç®—åœ¨ç©ºé—´å¤æ‚åº¦å†…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°† `L` æˆ– `R` æ•°ç»„ç”¨è¾“å‡ºæ•°ç»„æ¥è®¡ç®—ã€‚å…ˆæŠŠè¾“å‡ºæ•°ç»„å½“ä½œ `L` æ•°ç»„æ¥è®¡ç®—ï¼Œç„¶åå†åŠ¨æ€æ„é€  `R` æ•°ç»„å¾—åˆ°ç»“æœã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹åŸºäºè¿™ä¸ªæ€æƒ³çš„ç®—æ³•ã€‚

**ç®—æ³•**

1. åˆå§‹åŒ– `answer` æ•°ç»„ï¼Œå¯¹äºç»™å®šç´¢å¼• `i`ï¼Œ`answer[i]` ä»£è¡¨çš„æ˜¯ `i` å·¦ä¾§æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯ã€‚
2. æ„é€ æ–¹å¼ä¸ä¹‹å‰ç›¸åŒï¼Œåªæ˜¯æˆ‘ä»¬è¯•å›¾èŠ‚çœç©ºé—´ï¼Œå…ˆæŠŠ `answer` ä½œä¸ºæ–¹æ³•ä¸€çš„ `L` æ•°ç»„ã€‚
3. è¿™ç§æ–¹æ³•çš„å”¯ä¸€å˜åŒ–å°±æ˜¯æˆ‘ä»¬æ²¡æœ‰æ„é€  `R` æ•°ç»„ã€‚è€Œæ˜¯ç”¨ä¸€ä¸ªéå†æ¥è·Ÿè¸ªå³è¾¹å…ƒç´ çš„ä¹˜ç§¯ã€‚å¹¶æ›´æ–°æ•°ç»„ $answer[i]=answer[i]*R$ã€‚ç„¶å $R$ æ›´æ–°ä¸º $R=R*nums[i]$ï¼Œå…¶ä¸­å˜é‡ $R$ è¡¨ç¤ºçš„å°±æ˜¯ç´¢å¼•å³ä¾§æ•°å­—çš„ä¹˜ç§¯ã€‚

```cpp [sol2-C++]
class Solution {
public:
    vector<int> productExceptSelf(vector<int>& nums) {
        int length = nums.size();
        vector<int> answer(length);

        // answer[i] è¡¨ç¤ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        // å› ä¸ºç´¢å¼•ä¸º '0' çš„å…ƒç´ å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œ æ‰€ä»¥ answer[0] = 1
        answer[0] = 1;
        for (int i = 1; i < length; i++) {
            answer[i] = nums[i - 1] * answer[i - 1];
        }

        // R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        // åˆšå¼€å§‹å³è¾¹æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R = 1
        int R = 1;
        for (int i = length - 1; i >= 0; i--) {
            // å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹çš„ä¹˜ç§¯ä¸º answer[i]ï¼Œå³è¾¹çš„ä¹˜ç§¯ä¸º R
            answer[i] = answer[i] * R;
            // R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªç»“æœæ—¶éœ€è¦å°†å½“å‰å€¼ä¹˜åˆ° R ä¸Š
            R *= nums[i];
        }
        return answer;
    }
};
```

```python [sol2-Python3]
class Solution:
    def productExceptSelf(self, nums: List[int]) -> List[int]:
        length = len(nums)
        answer = [0]*length
        
        # answer[i] è¡¨ç¤ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        # å› ä¸ºç´¢å¼•ä¸º '0' çš„å…ƒç´ å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œ æ‰€ä»¥ answer[0] = 1
        answer[0] = 1
        for i in range(1, length):
            answer[i] = nums[i - 1] * answer[i - 1]
        
        # R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        # åˆšå¼€å§‹å³è¾¹æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R = 1
        R = 1;
        for i in reversed(range(length)):
            # å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹çš„ä¹˜ç§¯ä¸º answer[i]ï¼Œå³è¾¹çš„ä¹˜ç§¯ä¸º R
            answer[i] = answer[i] * R
            # R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªç»“æœæ—¶éœ€è¦å°†å½“å‰å€¼ä¹˜åˆ° R ä¸Š
            R *= nums[i]
        
        return answer
```

```java [sol2-Java]
class Solution {
    public int[] productExceptSelf(int[] nums) {
        int length = nums.length;
        int[] answer = new int[length];

        // answer[i] è¡¨ç¤ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        // å› ä¸ºç´¢å¼•ä¸º '0' çš„å…ƒç´ å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œ æ‰€ä»¥ answer[0] = 1
        answer[0] = 1;
        for (int i = 1; i < length; i++) {
            answer[i] = nums[i - 1] * answer[i - 1];
        }

        // R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
        // åˆšå¼€å§‹å³è¾¹æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R = 1
        int R = 1;
        for (int i = length - 1; i >= 0; i--) {
            // å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹çš„ä¹˜ç§¯ä¸º answer[i]ï¼Œå³è¾¹çš„ä¹˜ç§¯ä¸º R
            answer[i] = answer[i] * R;
            // R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªç»“æœæ—¶éœ€è¦å°†å½“å‰å€¼ä¹˜åˆ° R ä¸Š
            R *= nums[i];
        }
        return answer;
    }
}
```

```golang [sol2-Golang]
func productExceptSelf(nums []int) []int {
    length := len(nums)
    answer := make([]int, length)

    // answer[i] è¡¨ç¤ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
    // å› ä¸ºç´¢å¼•ä¸º '0' çš„å…ƒç´ å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œ æ‰€ä»¥ answer[0] = 1
    answer[0] = 1
    for i := 1; i < length; i++ {
        answer[i] = nums[i-1] * answer[i-1]
    }

    // R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
    // åˆšå¼€å§‹å³è¾¹æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R = 1
    R := 1
    for i := length - 1; i >= 0; i-- {
        // å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹çš„ä¹˜ç§¯ä¸º answer[i]ï¼Œå³è¾¹çš„ä¹˜ç§¯ä¸º R
        answer[i] = answer[i] * R
        // R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªç»“æœæ—¶éœ€è¦å°†å½“å‰å€¼ä¹˜åˆ° R ä¸Š
        R *= nums[i]
    }
    return answer
}
```

```TypeScript [sol2-TypeScript]
var productExceptSelf = function(nums: number[]): number[] {
    const length = nums.length;
    const answer = new Array<number>(length);

    // answer[i] è¡¨ç¤ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
    // å› ä¸ºç´¢å¼•ä¸º '0' çš„å…ƒç´ å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œ æ‰€ä»¥ answer[0] = 1
    answer[0] = 1;
    for (let i = 1; i < length; i++) {
        answer[i] = nums[i - 1] * answer[i - 1];
    }

    // R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
    // åˆšå¼€å§‹å³è¾¹æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R = 1
    let R = 1;
    for (let i = length - 1; i >= 0; i--) {
        // å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹çš„ä¹˜ç§¯ä¸º answer[i]ï¼Œå³è¾¹çš„ä¹˜ç§¯ä¸º R
        answer[i] = answer[i] * R;
        // R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªç»“æœæ—¶éœ€è¦å°†å½“å‰å€¼ä¹˜åˆ° R ä¸Š
        R *= nums[i];
    }
    return answer;
};
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸­ $N$ æŒ‡çš„æ˜¯æ•°ç»„ `nums` çš„å¤§å°ã€‚åˆ†æä¸æ–¹æ³•ä¸€ç›¸åŒã€‚
* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ï¼Œè¾“å‡ºæ•°ç»„ä¸ç®—è¿›ç©ºé—´å¤æ‚åº¦ä¸­ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦å¸¸æ•°çš„ç©ºé—´å­˜æ”¾å˜é‡ã€‚