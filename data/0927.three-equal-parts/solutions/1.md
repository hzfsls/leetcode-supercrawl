## [927.ä¸‰ç­‰åˆ† ä¸­æ–‡çƒ­é—¨é¢˜è§£1](https://leetcode.cn/problems/three-equal-parts/solutions/100000/by-lcbin-7ir1)

ä½œè€…ï¼š[lcbin](https://leetcode.cn/u/lcbin)


**æ–¹æ³•ä¸€ï¼šè®¡æ•° + ä¸‰æŒ‡é’ˆ**

æˆ‘ä»¬è®°æ•°ç»„çš„é•¿åº¦ä¸º $n$ï¼Œæ•°ç»„ä¸­ $1$ çš„æ•°é‡ä¸º $cnt$ã€‚

æ˜¾ç„¶ $cnt$ å¿…é¡»æ˜¯ $3$ çš„å€æ•°ï¼Œå¦åˆ™æ— æ³•å°†æ•°ç»„ä¸‰ç­‰åˆ†ï¼Œå¯ä»¥æå‰è¿”å› $[-1, -1]$ã€‚å¦‚æœ $cnt$ ä¸º $0$ï¼Œé‚£ä¹ˆæ„å‘³ç€æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½ä¸º $0$ï¼Œç›´æ¥è¿”å› $[0, n - 1]$ å³å¯ã€‚

æˆ‘ä»¬å°† $cnt$ é™¤ä»¥ $3$ï¼Œå¾—åˆ°æ¯ä¸€ä»½ä¸­ $1$ çš„æ•°é‡ï¼Œç„¶åæ‰¾åˆ°æ¯ä¸€ä»½çš„ç¬¬ä¸€ä¸ª $1$ åœ¨æ•°ç»„ `arr` ä¸­çš„ä½ç½®ï¼ˆå‚è€ƒä»¥ä¸‹ä»£ç ä¸­çš„ $find(x)$ å‡½æ•°ï¼‰ï¼Œåˆ†åˆ«è®°ä¸º $i$, $j$, $k$ã€‚

```bash
0 1 1 0 0 0 1 1 0 0 0 0 0 1 1 0 0
  ^         ^             ^
  i         j             k
```

æ¥ç€æˆ‘ä»¬ä» $i$, $j$, $k$ å¼€å§‹å¾€ååŒæ—¶éå†æ¯ä¸€éƒ¨åˆ†ï¼Œåˆ¤æ–­ä¸‰éƒ¨åˆ†å¯¹åº”çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œæ˜¯åˆ™ç»§ç»­éå†ï¼Œç›´è‡³ $k$ åˆ°è¾¾ $arr$ æœ«å°¾ã€‚

```bash
0 1 1 0 0 0 1 1 0 0 0 0 0 1 1 0 0
          ^         ^             ^
          i         j             k
```

éå†ç»“æŸæ—¶ï¼Œè‹¥ $k=n$ï¼Œè¯´æ˜æ»¡è¶³ä¸‰ç­‰åˆ†ï¼Œè¿”å›æ­¤æ—¶çš„ $[i - 1, j]$ ä½œä¸ºç­”æ¡ˆï¼Œå¦åˆ™è¿”å› $[-1, -1]$ã€‚

æ—¶é—´å¤æ‚åº¦ $O(n)$ï¼Œç©ºé—´å¤æ‚åº¦ $O(1)$ã€‚å…¶ä¸­ $n$ è¡¨ç¤º `arr` çš„é•¿åº¦ã€‚


```python [sol1-Python3]
class Solution:
    def threeEqualParts(self, arr: List[int]) -> List[int]:
        def find(x):
            s = 0
            for i, v in enumerate(arr):
                s += v
                if s == x:
                    return i

        n = len(arr)
        cnt, mod = divmod(sum(arr), 3)
        if mod:
            return [-1, -1]
        if cnt == 0:
            return [0, n - 1]

        i, j, k = find(1), find(cnt + 1), find(cnt * 2 + 1)
        while k < n and arr[i] == arr[j] == arr[k]:
            i, j, k = i + 1, j + 1, k + 1
        return [i - 1, j] if k == n else [-1, -1]
```


```java [sol1-Java]
class Solution {
    private int[] arr;

    public int[] threeEqualParts(int[] arr) {
        this.arr = arr;
        int cnt = 0;
        int n = arr.length;
        for (int v : arr) {
            cnt += v;
        }
        if (cnt % 3 != 0) {
            return new int[]{-1, -1};
        }
        if (cnt == 0) {
            return new int[]{0, n - 1};
        }
        cnt /= 3;

        int i = find(1), j = find(cnt + 1), k = find(cnt * 2 + 1);
        for (; k < n && arr[i] == arr[j] && arr[j] == arr[k]; ++i, ++j, ++k) {
        }
        return k == n ? new int[]{i - 1, j} : new int[]{-1, -1};
    }

    private int find(int x) {
        int s = 0;
        for (int i = 0; i < arr.length; ++i) {
            s += arr[i];
            if (s == x) {
                return i;
            }
        }
        return 0;
    }
}
```


```cpp [sol1-C++]
class Solution {
public:
    vector<int> threeEqualParts(vector<int>& arr) {
        int n = arr.size();
        int cnt = accumulate(arr.begin(), arr.end(), 0);
        if (cnt % 3) return {-1, -1};
        if (!cnt) return {0, n - 1};
        cnt /= 3;

        auto find = [&](int x) {
            int s = 0;
            for (int i = 0; i < n; ++i) {
                s += arr[i];
                if (s == x) return i;
            }
            return 0;
        };
        int i = find(1), j = find(cnt + 1), k = find(cnt * 2 + 1);
        for (; k < n && arr[i] == arr[j] && arr[j] == arr[k]; ++i, ++j, ++k) {}
        return k == n ? vector<int>{i - 1, j} : vector<int>{-1, -1};
    }
};
```


```go [sol1-Go]
func threeEqualParts(arr []int) []int {
	find := func(x int) int {
		s := 0
		for i, v := range arr {
			s += v
			if s == x {
				return i
			}
		}
		return 0
	}
	n := len(arr)
	cnt := 0
	for _, v := range arr {
		cnt += v
	}
	if cnt%3 != 0 {
		return []int{-1, -1}
	}
	if cnt == 0 {
		return []int{0, n - 1}
	}
	cnt /= 3
	i, j, k := find(1), find(cnt+1), find(cnt*2+1)
	for ; k < n && arr[i] == arr[j] && arr[j] == arr[k]; i, j, k = i+1, j+1, k+1 {
	}
	if k == n {
		return []int{i - 1, j}
	}
	return []int{-1, -1}
}
```


---

æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºäº¤æµï¼Œæ¬¢è¿è¯„è®ºåŒºæä¾›å…¶å®ƒè§£é¢˜æ€è·¯ï¼ˆä»£ç ï¼‰ï¼Œä¹Ÿå¯ä»¥ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ä½œè€…å“ˆğŸ˜„~