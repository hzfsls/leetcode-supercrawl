### ğŸ“º è§†é¢‘é¢˜è§£

![...å·çš„åµŒå¥—æ·±åº¦ -Lizzi(1).mp4](7b0eee29-172e-4dbf-b30f-6ae008be489c)

### ğŸ“– æ–‡å­—é¢˜è§£

#### æ–¹æ³•ä¸€ï¼šç”¨æ ˆè¿›è¡Œæ‹¬å·åŒ¹é…

**æ€è·¯åŠç®—æ³•**

è¦æ±‚åˆ’åˆ†å‡ºä½¿å¾—æœ€å¤§åµŒå¥—æ·±åº¦æœ€å°çš„åˆ†ç»„ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—çŸ¥é“å¦‚ä½•è®¡ç®—åµŒå¥—æ·±åº¦ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ ˆå®ç°æ‹¬å·åŒ¹é…æ¥è®¡ç®—ï¼š

ç»´æŠ¤ä¸€ä¸ªæ ˆ `s`ï¼Œä»å·¦è‡³å³éå†æ‹¬å·å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼š

- å¦‚æœå½“å‰å­—ç¬¦æ˜¯ `(`ï¼Œå°±æŠŠ `(` å‹å…¥æ ˆä¸­ï¼Œæ­¤æ—¶è¿™ä¸ª `(` çš„åµŒå¥—æ·±åº¦ä¸ºæ ˆçš„é«˜åº¦ï¼›

- å¦‚æœå½“å‰å­—ç¬¦æ˜¯ `)`ï¼Œæ­¤æ—¶è¿™ä¸ª `)` çš„åµŒå¥—æ·±åº¦ä¸ºæ ˆçš„é«˜åº¦ï¼Œéšåå†ä»æ ˆä¸­å¼¹å‡ºä¸€ä¸ª `(`ã€‚

ä¸‹é¢ç»™å‡ºäº†æ‹¬å·åºåˆ— `(()(())())` åœ¨æ¯ä¸€ä¸ªå­—ç¬¦å¤„çš„åµŒå¥—æ·±åº¦ï¼š

```
æ‹¬å·åºåˆ—   ( ( ) ( ( ) ) ( ) )
ä¸‹æ ‡ç¼–å·   0 1 2 3 4 5 6 7 8 9
åµŒå¥—æ·±åº¦   1 2 2 2 3 3 2 2 2 1 
```

çŸ¥é“å¦‚ä½•è®¡ç®—åµŒå¥—æ·±åº¦ï¼Œé—®é¢˜å°±å¾ˆç®€å•äº†ï¼šåªè¦åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¿è¯æ ˆå†…ä¸€åŠçš„æ‹¬å·å±äºåºåˆ— `A`ï¼Œä¸€åŠçš„æ‹¬å·å±äºåºåˆ— `B`ï¼Œé‚£ä¹ˆå°±èƒ½ä¿è¯æ‹†åˆ†åæœ€å¤§çš„åµŒå¥—æ·±åº¦æœ€å°ï¼Œæ˜¯å½“å‰æœ€å¤§åµŒå¥—æ·±åº¦çš„ä¸€åŠã€‚è¦å®ç°è¿™æ ·çš„å¯¹åŠåˆ†é…ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå¥‡æ•°å±‚çš„ `(` åˆ†é…ç»™ `A`ï¼Œå¶æ•°å±‚çš„ `(` åˆ†é…ç»™ `B` å³å¯ã€‚å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å°†åµŒå¥—æ·±åº¦ä¸º `1` å’Œ `3` çš„æ‰€æœ‰æ‹¬å· `(())` åˆ†é…ç»™ `A`ï¼ŒåµŒå¥—æ·±åº¦ä¸º `2` çš„æ‰€æœ‰æ‹¬å· `()()()` åˆ†é…ç»™ `B`ã€‚

æ­¤å¤–ï¼Œç”±äºåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæ ˆä¸­åªä¼šå­˜æ”¾ `(`ï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦ç»´æŠ¤ä¸€ä¸ªçœŸæ­£çš„æ ˆï¼Œåªéœ€è¦ç”¨ä¸€ä¸ªå˜é‡æ¨¡æ‹Ÿè®°å½•æ ˆçš„å¤§å°ã€‚

```Python [sol1-Python3]
class Solution:
    def maxDepthAfterSplit(self, seq: str) -> List[int]:
        ans = []
        d = 0
        for c in seq:
            if c == '(':
                d += 1
                ans.append(d % 2)
            if c == ')':
                ans.append(d % 2)
                d -= 1
        return ans
```
```C++ [sol1-C++]
class Solution {
public:
    vector<int> maxDepthAfterSplit(string seq) {
        int d = 0;
        vector<int> ans;
        for (char& c : seq)
            if (c == '(') {
                ++d;
                ans.push_back(d % 2);
            }
            else {
                ans.push_back(d % 2);
                --d;
            }
        return ans;
    }
};
```
```Java [sol1-Java]
class Solution {
    public int[] maxDepthAfterSplit(String seq) {
        int d = 0;
        int length = seq.length();
        int[] ans = new int[length];
        for (int i = 0; i < length; i++) {
            if (seq.charAt(i) == '(') {
                ++d;
                ans[i] = d % 2;
            } else {
                ans[i] = d % 2;
                --d;
            }
        }
        return ans;
    }
}
```
```Javascript [sol1-Javascript]
var maxDepthAfterSplit = function(seq) {
    let dep = 0;
    return seq.split("").map((value, index) => {
        if (value === '(') {
            ++dep;
            return dep % 2;
        } else {
            let ans = dep % 2;
            --dep;
            return ans;
        }
    });
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€è¦éå†æ‹¬å·å­—ç¬¦ä¸²ä¸€æ¬¡ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚é™¤ç­”æ¡ˆæ•°ç»„å¤–ï¼Œæˆ‘ä»¬åªéœ€è¦å¸¸æ•°ä¸ªå˜é‡ã€‚

#### æ–¹æ³•äºŒï¼šæ‰¾è§„å¾‹

**æ€è·¯åŠç®—æ³•**

æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­ `(()(())())`ï¼Œä½†è¿™é‡Œæˆ‘ä»¬æŠŠ `(` å’Œ `)` çš„åµŒå¥—æ·±åº¦åˆ†æˆä¸¤è¡Œï¼š

```
æ‹¬å·åºåˆ—   ( ( ) ( ( ) ) ( ) )
ä¸‹æ ‡ç¼–å·   0 1 2 3 4 5 6 7 8 9
åµŒå¥—æ·±åº¦   1 2 - 2 3 - - 2 - -
åµŒå¥—æ·±åº¦   - - 2 - - 3 2 - 2 1 
```

æœ‰æ²¡æœ‰å‘ç°ä»€ä¹ˆè§„å¾‹ï¼Ÿ

- å·¦æ‹¬å· `(` çš„ä¸‹æ ‡ç¼–å·ä¸åµŒå¥—æ·±åº¦çš„å¥‡å¶æ€§ç›¸åï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š

    - ä¸‹æ ‡ç¼–å·ä¸ºå¥‡æ•°çš„ `(`ï¼Œå…¶åµŒå¥—æ·±åº¦ä¸ºå¶æ•°ï¼Œåˆ†é…ç»™ `B`ï¼›

    - ä¸‹æ ‡ç¼–å·ä¸ºå¶æ•°çš„ `(`ï¼Œå…¶åµŒå¥—æ·±åº¦ä¸ºå¥‡æ•°ï¼Œåˆ†é…ç»™ `A`ã€‚

- å³æ‹¬å· `)` çš„ä¸‹æ ‡ç¼–å·ä¸åµŒå¥—æ·±åº¦çš„å¥‡å¶æ€§ç›¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š

    - ä¸‹æ ‡ç¼–å·ä¸ºå¥‡æ•°çš„ `)`ï¼Œå…¶åµŒå¥—æ·±åº¦ä¸ºå¥‡æ•°ï¼Œåˆ†é…ç»™ `A`ï¼›

    - ä¸‹æ ‡ç¼–å·ä¸ºå¶æ•°çš„ `)`ï¼Œå…¶åµŒå¥—æ·±åº¦ä¸ºå¶æ•°ï¼Œåˆ†é…ç»™ `B`ã€‚

è¿™æ ·ä»¥æ¥ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®æ¯ä¸ªä½ç½®æ˜¯å“ªä¸€ç§æ‹¬å·ä»¥åŠè¯¥ä½ç½®çš„ä¸‹æ ‡ç¼–å·ï¼Œå°±èƒ½ç¡®å®šå°†å¯¹åº”çš„å¯¹åº”çš„æ‹¬å·åˆ†åˆ°å“ªä¸ªç»„äº†ã€‚

å¯¹æ­¤è§„å¾‹æ„Ÿå…´è¶£çš„åŒå­¦çš„åŒå­¦å¯ä»¥é˜…è¯»ä¸‹é¢çš„è¯æ˜éƒ¨åˆ†ï¼Œè‹¥ä¸æ„Ÿå…´è¶£ï¼Œå¯ä»¥ç›´æ¥è·³åˆ°ä»£ç éƒ¨åˆ†ã€‚

**è¯æ˜**

- å¯¹äºå­—ç¬¦ä¸²ä¸­çš„ä»»æ„ä¸€ä¸ªå·¦æ‹¬å· $($ï¼Œå®ƒçš„ä¸‹æ ‡ç¼–å·ä¸º $x$ï¼ŒåµŒå¥—æ·±åº¦ä¸º $y$ã€‚å¦‚æœå®ƒä¹‹æœ‰ $l$ ä¸ªå·¦æ‹¬å·å’Œ $r$ ä¸ªå³æ‹¬å·ï¼Œé‚£ä¹ˆæ ¹æ®åµŒå¥—æ·±åº¦çš„å®šä¹‰ï¼Œæœ‰ï¼š

    $$
    y = l - r + 1
    $$
    
  ä¸‹æ ‡ç¼–å·ä¸ $l$ å’Œ $r$ çš„å…³ç³»ä¹Ÿå¯ä»¥ç›´æ¥å¾—åˆ°ï¼Œæ³¨æ„ä¸‹æ ‡ç¼–å·ä» $0$ å¼€å§‹ï¼š

    $$
    x = l + r
    $$

  ç”±äº $l - r$ å’Œ $l + r$ åŒå¥‡å¶ï¼Œå› æ­¤ $l - r + 1$ï¼ˆå³ $y$ï¼‰å’Œ $l + r$ï¼ˆå³ $x$ï¼‰çš„å¥‡å¶æ€§ç›¸åã€‚

- å¯¹äºå­—ç¬¦ä¸²ä¸­çš„ä»»æ„ä¸€ä¸ªå³æ‹¬å· $)$ï¼Œå®ƒçš„ä¸‹æ ‡ç¼–å·ä¸º $x$ï¼ŒåµŒå¥—æ·±åº¦ä¸º $y$ã€‚å¦‚æœå®ƒä¹‹æœ‰ $l$ ä¸ªå·¦æ‹¬å·å’Œ $r$ ä¸ªå³æ‹¬å·ï¼Œé‚£ä¹ˆæ ¹æ®åµŒå¥—æ·±åº¦çš„å®šä¹‰ï¼Œæœ‰ï¼š

    $$
    y = l - r
    $$
    
  ä¸‹æ ‡ç¼–å·ä¸ $l$ å’Œ $r$ çš„å…³ç³»ä¹Ÿå¯ä»¥ç›´æ¥å¾—åˆ°ï¼Œæ³¨æ„ä¸‹æ ‡ç¼–å·ä» $0$ å¼€å§‹ï¼š

    $$
    x = l + r
    $$

  å› æ­¤ $y$ å’Œ $x$ çš„å¥‡å¶æ€§ç›¸åŒã€‚

```Python [sol2-Python3]
class Solution:
    def maxDepthAfterSplit(self, seq: str) -> List[int]:
        ans = list()
        for i, ch in enumerate(seq):
            if ch == '(':
                ans.append(i % 2)
            else:
                ans.append(1 - i % 2)
            # ä¸Šé¢çš„ä»£ç ä¹Ÿå¯ä»¥ç®€å†™æˆ
            # ans.append((i & 1) ^ (ch == '('))
            # C++ å’Œ Javascript ä»£ç ä¸­ç›´æ¥ç»™å‡ºäº†ç®€å†™çš„æ–¹æ³•
        return ans
```
```C++ [sol2-C++]
class Solution {
public:
    vector<int> maxDepthAfterSplit(string seq) {
        vector<int> ans;
        for (int i = 0; i < (int)seq.size(); ++i) {
            ans.push_back(i & 1 ^ (seq[i] == '('));
        }
        return ans;
    }
};
```
```Java [sol2-Java]
class Solution {
    public int[] maxDepthAfterSplit(String seq) {
        int length = seq.length();
        int[] ans = new int[length];
        for (int i = 0; i < length; ++i) {
            ans[i] = i & 1 ^ (seq.charAt(i) == '(' ? 1 : 0);
        }
        return ans;
    }
}
```
```Javascript [sol2-Javascript]
var maxDepthAfterSplit = function(seq) {
    return seq.split("").map((value, index) => index & 1 ^ (value === '('));
};
```

**å¤æ‚åº¦åˆ†æ**

- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€è¦éå†æ‹¬å·å­—ç¬¦ä¸²ä¸€æ¬¡ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚é™¤ç­”æ¡ˆæ•°ç»„å¤–ï¼Œæˆ‘ä»¬åªéœ€è¦å¸¸æ•°ä¸ªå˜é‡ã€‚